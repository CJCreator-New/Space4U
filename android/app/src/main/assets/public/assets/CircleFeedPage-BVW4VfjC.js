import{b as e,j as t,s,u as a}from"./index-C2hV942_.js";import{r,j as n,u as i}from"./react-vendor-B4gIioy9.js";import{m as o}from"./mockCircles-7k7XJQN9.js";import{c as l,P as c}from"./PostCard-BEW6XkKt.js";import{C as d,J as m,X as u,N as x,E as h,O as p,e as g,U as y,Q as f,V as b,W as v,P as j}from"./icons-Cn7BKMG2.js";import{f as N}from"./helpers-BubsLHy_.js";import{S as w}from"./SafeComponent-Bl7I87cI.js";import"./badgeSystem-B5B5Dmxk.js";const S=[{id:1,circleId:1,author:{username:"AnxiousBear",avatar:"🐻"},content:"Having a tough day with work deadlines. Just needed to share somewhere safe. The breathing exercises aren't working today.",timestamp:"2 hours ago",hearts:23,commentCount:8,isHearted:!1,tags:["work-stress","breathing"]},{id:2,circleId:2,author:{username:"HopefulSun",avatar:"☀️"},content:"Three weeks anxiety-free! Small win but it matters to me. Still taking it one day at a time.",timestamp:"4 hours ago",hearts:47,commentCount:12,isHearted:!1,tags:["milestone","progress"]},{id:3,circleId:3,author:{username:"TiredOwl",avatar:"🦉"},content:"Does anyone else feel guilty for taking mental health days? My manager was understanding but I still feel like I'm letting everyone down.",timestamp:"6 hours ago",hearts:31,commentCount:15,isHearted:!1,tags:["guilt","work-life"]},{id:4,circleId:1,author:{username:"CalmWave",avatar:"🌊"},content:"Found a breathing technique that actually helps. 4-7-8 method: inhale 4, hold 7, exhale 8. Happy to share more details if anyone wants.",timestamp:"8 hours ago",hearts:38,commentCount:9,isHearted:!1,tags:["techniques","breathing","helpful"]},{id:5,circleId:4,author:{username:"LonelyHeart",avatar:"💙"},content:"Ended a toxic relationship last month. Still processing but I know it was right. Some days are harder than others.",timestamp:"12 hours ago",hearts:29,commentCount:11,isHearted:!1,tags:["relationships","healing"]},{id:6,circleId:5,author:{username:"StudyBug",avatar:"🐛"},content:"Finals week is killing me. Can't sleep, can't eat properly. Anyone have tips for managing study anxiety?",timestamp:"1 day ago",hearts:19,commentCount:7,isHearted:!1,tags:["finals","study-tips"]},{id:7,circleId:2,author:{username:"QuietMoon",avatar:"🌙"},content:"Bad brain day today. Everything feels overwhelming. Just reminding myself this feeling will pass.",timestamp:"1 day ago",hearts:42,commentCount:16,isHearted:!1,tags:["bad-days","reminder"]},{id:8,circleId:6,author:{username:"RainbowFox",avatar:"🦊"},content:"Coming out to my parents this weekend. Nervous but ready. Your support here has given me so much courage.",timestamp:"2 days ago",hearts:56,commentCount:18,isHearted:!1,tags:["coming-out","courage"]},{id:9,circleId:7,author:{username:"TiredParent",avatar:"😴"},content:"Baby didn't sleep again. I love them but I'm running on empty. How do other parents cope with the exhaustion?",timestamp:"2 days ago",hearts:24,commentCount:13,isHearted:!1,tags:["sleep-deprivation","parenting"]},{id:10,circleId:8,author:{username:"SelfCareCat",avatar:"🐱"},content:"Started a gratitude journal this week. Writing down 3 things daily. It's small but shifting my perspective.",timestamp:"3 days ago",hearts:33,commentCount:6,isHearted:!1,tags:["gratitude","journaling"]},{id:11,circleId:1,author:{username:"PanicPanda",avatar:"🐼"},content:"Panic attack at the grocery store today. A kind stranger helped me through it. Humanity still exists.",timestamp:"3 days ago",hearts:67,commentCount:22,isHearted:!1,tags:["panic-attack","kindness"]},{id:12,circleId:3,author:{username:"BurnoutBee",avatar:"🐝"},content:"Thinking about quitting my job. The stress is affecting my health but I need the income. Feeling trapped.",timestamp:"4 days ago",hearts:28,commentCount:14,isHearted:!1,tags:["burnout","career-change"]},{id:13,circleId:2,author:{username:"StrugglingStar",avatar:"⭐"},content:"Therapy session was rough today. Unpacked some heavy stuff. Feeling raw but also lighter somehow.",timestamp:"4 days ago",hearts:41,commentCount:10,isHearted:!1,tags:["therapy","healing"]},{id:14,circleId:4,author:{username:"LoveBird",avatar:"🕊️"},content:"Partner doesn't understand my anxiety. They mean well but 'just relax' isn't helpful. How do I explain it better?",timestamp:"5 days ago",hearts:35,commentCount:17,isHearted:!1,tags:["relationships","understanding"]},{id:15,circleId:8,author:{username:"MindfulMouse",avatar:"🐭"},content:"Meditation streak: 30 days! Started with just 2 minutes. Now up to 15. Progress isn't always linear but it's progress.",timestamp:"5 days ago",hearts:52,commentCount:8,isHearted:!1,tags:["meditation","milestone"]},{id:16,circleId:5,author:{username:"StressedStudent",avatar:"📖"},content:"Imposter syndrome is hitting hard. Everyone seems smarter than me. How do you deal with feeling like a fraud?",timestamp:"6 days ago",hearts:44,commentCount:19,isHearted:!1,tags:["imposter-syndrome","confidence"]},{id:17,circleId:6,author:{username:"ProudButterfly",avatar:"🦋"},content:"One year on HRT today! The journey has been challenging but I'm finally feeling like myself.",timestamp:"6 days ago",hearts:73,commentCount:25,isHearted:!1,tags:["transition","milestone"]},{id:18,circleId:7,author:{username:"NewMomBear",avatar:"🐻"},content:"Postpartum anxiety is real. Love my baby but the constant worry is exhausting. Seeing a therapist next week.",timestamp:"1 week ago",hearts:39,commentCount:12,isHearted:!1,tags:["postpartum","anxiety"]},{id:19,circleId:1,author:{username:"BreathingBird",avatar:"🐦"},content:"Social anxiety made me cancel plans again. Friends are understanding but I feel like I'm missing out on life.",timestamp:"1 week ago",hearts:26,commentCount:9,isHearted:!1,tags:["social-anxiety","isolation"]},{id:20,circleId:8,author:{username:"WellnessWolf",avatar:"🐺"},content:"Bad mental health day turned around with a walk in nature. Sometimes the simplest things help the most.",timestamp:"1 week ago",hearts:31,commentCount:5,isHearted:!1,tags:["nature","self-care"]}],C=["advice-needed","venting","success-story","question","support","resources"],k=["Self-harm","Eating disorders","Substance abuse","Suicide ideation","Domestic violence","Sexual assault","Death/grief","Medical procedures"];function I({isOpen:s,onClose:a,circle:n,onPostCreated:i}){const[o,c]=r.useState(""),[g,y]=r.useState([]),[f,b]=r.useState(!1),[v,j]=r.useState(""),[N,w]=r.useState(!1),[S,I]=r.useState(""),[H,E]=r.useState(!1),[_,O]=r.useState(!1),[T,P]=r.useState(!1),[z,J]=r.useState([]),[B,D]=r.useState(""),F=r.useRef(null),{user:W}=e(),L=JSON.parse(localStorage.getItem("safespace_user_profile")||"{}");r.useEffect((()=>{s&&(M(),setTimeout((()=>F.current?.focus()),100))}),[s]),r.useEffect((()=>{const e=e=>{"Escape"===e.key?A():(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&Y()};return s&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}}),[s,o]);const M=()=>{const e=JSON.parse(localStorage.getItem("safespace_drafts")||"[]").filter((e=>e.circleId===n?.id));J(e)},A=()=>{o.trim()?window.confirm("Discard draft? Your post will be lost.")&&(q(),a()):(q(),a())},q=()=>{c(""),y([]),b(!1),j(""),w(!1),I(""),D(""),O(!1),P(!1)},R=e=>{g.length<3&&!g.includes(e)&&y([...g,e]),j(""),b(!1)},Y=async()=>{if(!(!o.trim()||o.length>500||H)&&W){E(!0),D("");try{const{data:e,error:t}=await l.createPost(W.id,n.id,o.trim(),!1);if(t)throw t;O(!0),setTimeout((()=>{q(),a(),i?.(e?.[0])}),1500)}catch(e){D("Failed to post. Please try again.")}finally{E(!1)}}},K=o.trim()&&o.length<=500&&!H;return s?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end md:items-center justify-center z-50",children:t.jsx("div",{className:"bg-surface w-full md:max-w-2xl md:mx-4 rounded-t-3xl md:rounded-3xl max-h-[90vh] overflow-hidden animate-slide-up",children:_?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-success/10 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(d,{className:"text-success",size:32})}),t.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"Posted!"}),t.jsx("p",{className:"text-text-secondary",children:"Your voice matters ❤️"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between p-5 md:p-8 border-b border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("h2",{className:"text-xl font-semibold text-text-primary",children:["Share with ",n?.name]}),z.length>0&&t.jsxs("button",{onClick:()=>P(!T),className:"flex items-center gap-1 px-3 py-1 bg-gray-100 rounded-full text-sm text-text-secondary hover:bg-gray-200 transition-colors",children:[t.jsx(m,{size:14}),"Drafts (",z.length,")"]})]}),t.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(u,{size:20})})]}),t.jsx("div",{className:"px-5 md:px-8 py-4 bg-gray-50",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center text-lg",children:L.avatar||"🐻"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-text-primary",children:L.username||"Anonymous"}),t.jsx("p",{className:"text-sm text-text-secondary",children:"Posting to circle"})]})]})}),T&&t.jsxs("div",{className:"px-5 md:px-8 py-4 border-b border-gray-100",children:[t.jsx("h4",{className:"font-medium text-text-primary mb-3",children:"Your Drafts"}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:z.map((e=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[t.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>(e=>{c(e.content),y(e.tags||[]),w(e.hasTriggerWarning||!1),I(e.triggerWarning||""),P(!1);const t=JSON.parse(localStorage.getItem("safespace_drafts")||"[]").filter((t=>t.id!==e.id));localStorage.setItem("safespace_drafts",JSON.stringify(t)),M()})(e),children:[t.jsx("p",{className:"text-sm text-text-primary line-clamp-1",children:e.content}),t.jsx("p",{className:"text-xs text-text-secondary",children:new Date(e.timestamp).toLocaleDateString()})]}),t.jsx("button",{onClick:()=>(e=>{const t=JSON.parse(localStorage.getItem("safespace_drafts")||"[]").filter((t=>t.id!==e));localStorage.setItem("safespace_drafts",JSON.stringify(t)),M()})(e.id),className:"p-1 text-text-secondary hover:text-danger transition-colors",children:t.jsx(u,{size:16})})]},e.id)))})]}),t.jsxs("div",{className:"p-5 md:p-8 flex-1 overflow-y-auto",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("textarea",{ref:F,value:o,onChange:e=>c(e.target.value),placeholder:"What's on your mind? This is a safe space...",className:"w-full min-h-[150px] max-h-[400px] p-0 border-none outline-none resize-none text-text-primary placeholder-text-secondary leading-relaxed",style:{fontSize:"16px"}}),t.jsxs("div",{className:"flex justify-between items-center mt-2",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>b(!f),className:"flex items-center gap-2 px-3 py-2 text-text-secondary hover:text-primary hover:bg-primary/10 rounded-xl transition-colors",children:[t.jsx(x,{size:16}),"Add tags"]}),t.jsxs("button",{onClick:()=>w(!N),className:"flex items-center gap-2 px-3 py-2 rounded-xl transition-colors "+(N?"text-warning bg-warning/10":"text-text-secondary hover:text-warning hover:bg-warning/10"),children:[t.jsx(h,{size:16}),"Trigger warning"]})]}),t.jsxs("span",{className:"text-sm font-medium "+(o.length<=400?"text-success":o.length<=475?"text-warning":"text-danger"),children:[o.length,"/500"]})]})]}),f&&t.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-xl",children:[t.jsx("h4",{className:"font-medium text-text-primary mb-3",children:"Add tags (max 3)"}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:C.map((e=>t.jsxs("button",{onClick:()=>R(e),disabled:g.length>=3||g.includes(e),className:"px-3 py-1 bg-white border border-gray-200 rounded-full text-sm text-text-primary hover:border-primary disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["#",e]},e)))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"Custom tag...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-xl focus:border-primary outline-none text-sm",onKeyPress:e=>"Enter"===e.key&&v.trim()&&R(v.trim())}),t.jsx("button",{onClick:()=>v.trim()&&R(v.trim()),disabled:!v.trim()||g.length>=3,className:"px-4 py-2 bg-primary text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary/90 transition-colors",children:"Add"})]})]}),N&&t.jsxs("div",{className:"mb-4 p-4 bg-warning/5 border border-warning/20 rounded-xl",children:[t.jsx("h4",{className:"font-medium text-text-primary mb-3",children:"Trigger Warning"}),t.jsxs("select",{value:S,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-xl focus:border-primary outline-none",children:[t.jsx("option",{value:"",children:"Select topic..."}),k.map((e=>t.jsx("option",{value:e,children:e},e)))]})]}),g.length>0&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((e=>t.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-sm text-white",style:{backgroundColor:n?.color},children:["#",e,t.jsx("button",{onClick:()=>{return t=e,void y(g.filter((e=>e!==t)));var t},className:"hover:bg-white/20 rounded-full p-0.5 transition-colors",children:t.jsx(u,{size:12})})]},e)))})}),B&&t.jsx("div",{className:"mb-4 p-3 bg-danger/10 border border-danger/20 rounded-xl",children:t.jsx("p",{className:"text-danger text-sm",children:B})})]}),t.jsxs("div",{className:"p-5 md:p-8 border-t border-gray-100",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[t.jsx("button",{onClick:Y,disabled:!K,className:"flex-1 md:flex-none md:px-8 py-3 rounded-xl font-semibold transition-all "+(K?"bg-primary text-white hover:bg-primary/90":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:H?t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(p,{className:"animate-spin",size:16}),"Posting..."]}):"Post"}),t.jsx("button",{onClick:()=>{if(!o.trim())return;const e={id:Date.now(),circleId:n.id,circleName:n.name,content:o,tags:g,hasTriggerWarning:N,triggerWarning:S,timestamp:(new Date).toISOString()},t=[...JSON.parse(localStorage.getItem("safespace_drafts")||"[]"),e];localStorage.setItem("safespace_drafts",JSON.stringify(t)),q(),a()},disabled:!o.trim(),className:"px-6 py-3 border border-gray-200 text-text-secondary rounded-xl hover:border-primary hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save as draft"}),t.jsx("button",{onClick:A,className:"px-6 py-3 text-text-secondary hover:text-text-primary transition-colors",children:"Cancel"})]}),t.jsxs("p",{className:"text-xs text-text-secondary text-center",children:["Remember: Be kind, supportive, and respectful •"," ",t.jsx("button",{className:"text-primary hover:underline",children:"Community Guidelines"})]})]})]})})}):null}function H(){const{t:l}=a(),{circleId:d}=n(),m=i(),{user:u}=e(),[x,h]=r.useState(null),{posts:p,loading:C}=function(e){const[t,a]=r.useState([]),[n,i]=r.useState(!0);async function o(){if(i(!0),!s){const t=S.filter((t=>t.circleId===parseInt(e)));return a(t),void i(!1)}const{data:t}=await s.from("posts").select("*, profiles(username, avatar_url)").eq("circle_id",e).order("created_at",{ascending:!1});a(t||[]),i(!1)}return r.useEffect((()=>{if(o(),!s)return;const t=s.channel(`posts:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:`circle_id=eq.${e}`},(e=>a((t=>[e.new,...t])))).on("postgres_changes",{event:"DELETE",schema:"public",table:"posts",filter:`circle_id=eq.${e}`},(e=>a((t=>t.filter((t=>t.id!==e.old.id)))))).subscribe();return()=>s.removeChannel(t)}),[e]),{posts:t,loading:n,refetch:o}}(d),k=function(t){const[a,n]=r.useState(0),{user:i}=e();return r.useEffect((()=>{if(!i||!t||!s)return;const e=s.channel(`circle:${t}:presence`,{config:{presence:{key:i.id}}});return e.on("presence",{event:"sync"},(()=>{const t=e.presenceState();n(Object.keys(t).length)})).subscribe((async t=>{"SUBSCRIBED"===t&&await e.track({user_id:i.id,online_at:(new Date).toISOString()})})),()=>s.removeChannel(e)}),[i,t]),a}(d),[H,E]=r.useState([]),[_,O]=r.useState(!0),[T,P]=r.useState(!1),[z,J]=r.useState("recent"),[B,D]=r.useState("all"),[F,W]=r.useState("list"),[L,M]=r.useState(!1),[A,q]=r.useState(1),[R,Y]=r.useState(!0),[K,U]=r.useState(!1);r.useEffect((()=>{$()}),[d]),r.useEffect((()=>{if(!C){const e=G(p,z),t=V(e,B);E(t),O(!1)}}),[p,C,z,B]),r.useEffect((()=>{const e=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-300&&R&&!T&&Q()};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[R,T,Q]);const $=()=>{const e=o.find((e=>e.id===parseInt(d)));h(e)},Q=r.useCallback((()=>{!T&&R&&(P(!0),setTimeout((()=>{const e=S.filter((e=>e.circleId===parseInt(d))),t=G(e,z),s=V(t,B),a=A+1,r=s.slice(0,10*a);E(r),q(a),Y(s.length>10*a),P(!1)}),1e3))}),[d,z,B,A,T,R]),G=(e,t)=>{switch(t){case"popular":return[...e].sort(((e,t)=>t.hearts-e.hearts));case"trending":return[...e].sort(((e,t)=>t.commentCount-e.commentCount));default:return[...e].sort(((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)))}},V=(e,t)=>{const s=JSON.parse(localStorage.getItem("safespace_hearted")||"[]"),a=JSON.parse(localStorage.getItem("safespace_user_posts")||"[]");switch(t){case"hearted":return e.filter((e=>s.includes(e.id)));case"commented":return e.filter((e=>a.some((t=>t.postId===e.id))));default:return e}},X=(e,t)=>{const s=JSON.parse(localStorage.getItem("safespace_hearted")||"[]"),a=t?[...s,e]:s.filter((t=>t!==e));localStorage.setItem("safespace_hearted",JSON.stringify(a))},Z=()=>{const e=document.createElement("div");e.textContent=l("circles.linkCopied"),e.className="fixed top-4 right-4 bg-success text-white px-4 py-2 rounded-xl shadow-lg z-50",document.body.appendChild(e),setTimeout((()=>document.body.removeChild(e)),2e3)},ee=e=>{D(e),q(1)};return _||!x?t.jsx(w,{children:t.jsx("div",{className:"max-w-2xl mx-auto",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),t.jsx("div",{className:"space-y-4",children:Array.from({length:3},((e,s)=>t.jsxs("div",{className:"card p-4",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),t.jsx("div",{className:"h-20 bg-gray-200 rounded"})]},s)))})]})})}):t.jsx(w,{children:t.jsxs("div",{className:"max-w-2xl mx-auto pb-20",children:[t.jsxs("div",{className:"sticky top-0 bg-background z-40 pb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>m("/circles"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(g,{size:20})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-2xl",children:x.icon}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-text-primary",children:x.name}),t.jsxs("div",{className:"flex items-center gap-1 text-sm text-text-secondary",children:[t.jsx(y,{size:14}),t.jsxs("span",{children:[N(x.members)," members"]}),k>0&&t.jsxs("span",{className:"ml-2 text-green-600",children:["• ",l("circles.online",{count:k})]})]})]})]})]}),t.jsxs("button",{onClick:()=>{const e=JSON.parse(localStorage.getItem("safespace_circles")||"[]").filter((e=>e!==parseInt(d)));localStorage.setItem("safespace_circles",JSON.stringify(e)),m("/circles")},className:"px-4 py-2 text-danger border border-danger rounded-xl hover:bg-danger hover:text-white transition-colors",children:[t.jsx("span",{className:"hidden sm:inline",children:l("circles.leaveCircle")}),t.jsx("span",{className:"sm:hidden",children:l("circles.leave")})]})]}),t.jsx("div",{className:"mb-4",children:t.jsxs("button",{onClick:()=>M(!L),className:"flex items-center gap-2 text-text-secondary hover:text-text-primary transition-colors",children:[t.jsx("span",{className:"text-sm",children:x.description}),t.jsx(f,{size:16,className:"transition-transform "+(L?"rotate-180":"")})]})}),t.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:z,onChange:e=>{return t=e.target.value,J(t),void q(1);var t},className:"px-3 py-2 border border-gray-200 rounded-xl text-sm focus:border-primary outline-none",children:[t.jsx("option",{value:"recent",children:l("circles.recent")}),t.jsx("option",{value:"popular",children:l("circles.popular")}),t.jsx("option",{value:"trending",children:l("circles.trending")})]}),t.jsxs("select",{value:B,onChange:e=>ee(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-xl text-sm focus:border-primary outline-none",children:[t.jsx("option",{value:"all",children:l("circles.allPosts")}),t.jsx("option",{value:"hearted",children:l("circles.postsIveHearted")}),t.jsx("option",{value:"commented",children:l("circles.postsIveCommented")})]})]}),t.jsxs("div",{className:"flex gap-2 sm:hidden",children:[t.jsx("button",{onClick:()=>W("list"),className:"p-2 rounded-lg "+("list"===F?"bg-primary text-white":"text-text-secondary"),children:t.jsx(b,{size:16})}),t.jsx("button",{onClick:()=>W("grid"),className:"p-2 rounded-lg "+("grid"===F?"bg-primary text-white":"text-text-secondary"),children:t.jsx(v,{size:16})})]})]})]}),0===H.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-4xl mb-4",children:x.icon}),t.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:l("all"===B?"circles.beFirstToStart":"circles.noPostsMatch")}),t.jsx("p",{className:"text-text-secondary mb-6",children:l("all"===B?"circles.shareWhatsOnMind":"circles.tryAdjustingFilters")}),"all"!==B&&t.jsx("button",{onClick:()=>ee("all"),className:"px-6 py-3 bg-primary text-white rounded-xl font-semibold hover:bg-primary/90 transition-colors",children:l("circles.clearFilters")})]}):t.jsx("div",{className:"space-y-3",children:H.map((e=>t.jsx(c,{post:e,circleColor:x.color,onHeart:X,onShare:Z},e.id)))}),T&&t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),t.jsx("p",{className:"text-text-secondary text-sm mt-2",children:l("circles.loadingMore")})]}),!R&&H.length>0&&t.jsx("div",{className:"text-center py-6",children:t.jsx("p",{className:"text-text-secondary",children:l("circles.caughtUp")})}),t.jsx("button",{onClick:()=>U(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center z-50 hover:scale-110",style:{backgroundColor:x.color},children:t.jsx(j,{size:24})}),t.jsx(I,{isOpen:K,onClose:()=>U(!1),circle:x,onPostCreated:e=>{E((t=>[e,...t])),window.scrollTo({top:0,behavior:"smooth"})}})]})})}export{H as default};
