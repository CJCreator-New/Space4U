import{j as e}from"./index-C2hV942_.js";import{r as s,u as t}from"./react-vendor-B4gIioy9.js";import{u as i}from"./useDebounce-DCk0LtND.js";import{e as a,j as n,V as r,Z as l,aW as c}from"./icons-Cn7BKMG2.js";function o({items:t,itemHeight:i,containerHeight:a,renderItem:n,className:r=""}){const{visibleItems:l,totalHeight:c,containerRef:o,handleScroll:d}=function({items:e,itemHeight:t,containerHeight:i,overscan:a=3}){const[n,r]=s.useState(0),l=s.useRef(null),c=Math.floor(n/t),o=Math.ceil((n+i)/t),d=Math.max(0,c-a),m=Math.min(e.length,o+a);return{visibleItems:e.slice(d,m).map(((e,s)=>({...e,index:d+s,offsetTop:(d+s)*t}))),totalHeight:e.length*t,containerRef:l,handleScroll:e=>{r(e.target.scrollTop)}}}({items:t,itemHeight:i,containerHeight:a});return e.jsx("div",{ref:o,onScroll:d,className:`overflow-auto ${r}`,style:{height:a},children:e.jsx("div",{style:{height:c,position:"relative"},children:l.map((s=>e.jsx("div",{style:{position:"absolute",top:s.offsetTop,left:0,right:0,height:i},children:n(s,s.index)},s.index)))})})}function d({src:t,alt:i,placeholder:a,className:n="",...r}){const{imageSrc:l,isLoading:c,error:o}=function(e,t={}){const{placeholder:i="",quality:a=75,lazy:n=!0}=t,[r,l]=s.useState(i),[c,o]=s.useState(!0),[d,m]=s.useState(null);return s.useEffect((()=>{if(!e)return;const s=new Image;if(s.onload=()=>{l(e),o(!1)},s.onerror=()=>{m("Failed to load image"),o(!1)},n&&"IntersectionObserver"in window){const t=new IntersectionObserver((([i])=>{i.isIntersecting&&(s.src=e,t.disconnect())}),{rootMargin:"50px"}),i=document.createElement("div");return t.observe(i),()=>t.disconnect()}s.src=e}),[e,n]),{imageSrc:r,isLoading:c,error:d}}(t,{placeholder:a,lazy:!0});return o?e.jsx("div",{className:`bg-gray-200 flex items-center justify-center ${n}`,children:e.jsx("span",{className:"text-gray-400 text-sm",children:"Failed to load"})}):e.jsx("img",{src:l,alt:i,className:`transition-opacity duration-300 ${c?"opacity-0":"opacity-100"} ${n}`,loading:"lazy",...r})}function m(){const m=t(),[x,h]=s.useState(""),[f,g]=s.useState(0),j=i(x,300),u=s.useMemo((()=>((e,s)=>{performance.now();const t=s();return performance.now(),t})(0,(()=>Array.from({length:1e3},((e,s)=>({id:s,title:`Item ${s+1}`,description:`Description for item ${s+1}`})))))),[]),p=s.useMemo((()=>j?u.filter((e=>e.title.toLowerCase().includes(j.toLowerCase()))):u),[j,u]),N=function(e,t=300){const i=s.useRef(Date.now());return s.useCallback(((...s)=>{const a=Date.now();a-i.current>=t&&(e(...s),i.current=a)}),[e,t])}((()=>{g((e=>e+1))}),100);return e.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-teal-600 text-white p-6 sticky top-0 z-10",children:[e.jsx("button",{onClick:()=>m(-1),className:"touch-target mb-4",children:e.jsx(a,{size:24})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Performance Demo"}),e.jsx("p",{className:"text-green-100 mt-1",children:"Optimization techniques"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("section",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center",children:e.jsx(n,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Debounced Search"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"300ms delay"})]})]}),e.jsx("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"Search 1000 items...",className:"input w-full mb-3"}),e.jsxs("div",{className:"flex justify-between text-sm text-text-secondary",children:[e.jsxs("span",{children:["Typing: ",x]}),e.jsxs("span",{children:["Searching: ",j]})]}),e.jsxs("div",{className:"mt-2 text-sm font-medium text-indigo-600",children:["Found: ",p.length," items"]})]}),e.jsxs("section",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(r,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Virtual List"}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Rendering ",p.length," items efficiently"]})]})]}),e.jsx(o,{items:p,itemHeight:60,containerHeight:400,className:"border rounded-lg",renderItem:s=>e.jsxs("div",{className:"border-b p-4 bg-white hover:bg-gray-50",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-sm text-text-secondary",children:s.description})]})})]}),e.jsxs("section",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center",children:e.jsx(l,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Throttled Events"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"100ms throttle"})]})]}),e.jsx("div",{onScroll:N,className:"h-48 overflow-auto border rounded-lg p-4 bg-gray-50",children:e.jsxs("div",{className:"h-96",children:[e.jsx("p",{className:"font-medium mb-2",children:"Scroll this area"}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Scroll events fired: ",f]}),e.jsx("div",{className:"mt-4 space-y-2",children:Array.from({length:20},((s,t)=>e.jsxs("div",{className:"bg-white p-3 rounded",children:["Scroll content ",t+1]},t)))})]})})]}),e.jsxs("section",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:e.jsx(c,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Lazy Loading Images"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Load on scroll"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Array.from({length:6},((s,t)=>e.jsx(d,{src:`https://picsum.photos/200/200?random=${t}`,alt:`Image ${t+1}`,placeholder:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Crect fill='%23f0f0f0' width='200' height='200'/%3E%3C/svg%3E",className:"w-full h-32 object-cover rounded-lg"},t)))})]}),e.jsxs("section",{className:"card p-6 bg-gradient-to-br from-indigo-50 to-purple-50",children:[e.jsx("h2",{className:"font-semibold mb-4",children:"Performance Optimizations"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"✅ Virtual scrolling"}),e.jsx("span",{className:"text-green-600 font-medium",children:"~95% faster"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"✅ Debounced search"}),e.jsx("span",{className:"text-green-600 font-medium",children:"~80% less renders"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"✅ Throttled events"}),e.jsx("span",{className:"text-green-600 font-medium",children:"~90% less calls"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"✅ Lazy images"}),e.jsx("span",{className:"text-green-600 font-medium",children:"~70% faster load"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"✅ Memoization"}),e.jsx("span",{className:"text-green-600 font-medium",children:"~60% less compute"})]})]})]})]})]})}export{m as default};
