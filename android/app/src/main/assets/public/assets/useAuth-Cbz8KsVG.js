import{r}from"./react-vendor-B4gIioy9.js";import{s as n}from"./index-C2hV942_.js";function a(){const[a,t]=r.useState(null),[e,s]=r.useState(!0);r.useEffect((()=>{if(!n)return void s(!1);n.auth.getSession().then((({data:{session:r}})=>{t(r?.user??null),s(!1)}));const{data:{subscription:r}}=n.auth.onAuthStateChange(((r,n)=>{t(n?.user??null)}));return()=>r.unsubscribe()}),[]);return{user:a,loading:e,signUp:async(r,a,t)=>{if(!n)return{data:null,error:"Backend not configured"};const{data:e,error:s}=await n.auth.signUp({email:r,password:a,options:{data:{username:t}}});return!s&&e.user&&await n.from("profiles").insert([{id:e.user.id,username:t,points:0,level:1}]),{data:e,error:s}},signIn:async(r,a)=>n?await n.auth.signInWithPassword({email:r,password:a}):{data:null,error:"Backend not configured"},signOut:async()=>n?await n.auth.signOut():{error:"Backend not configured"}}}export{a as u};
