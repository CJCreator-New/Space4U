import{c as e,j as t,a as s}from"./index-Duv89VAf.js";import{r as a,u as r,L as l}from"./react-vendor-B4gIioy9.js";import{a as o,c as i,P as n}from"./badgeSystem-B5B5Dmxk.js";import{P as d,o as c,p as m,X as x,q as g,r as h,s as u,t as p,T as b,u as y,Z as j,S as f,M as N,v,w as k,B as w,U as S,a as D,x as C,l as O}from"./icons-DVxOjm_j.js";import{R as I,A as T,C as M,X as L,Y as z,T as E,a as F}from"./charts-BTXtbyhr.js";import{S as _}from"./SafeComponent-DdckI7LM.js";import{g as A,u as J,i as $,a as P}from"./personalizationEngine-5ackT6If.js";import{u as U}from"./useHaptic-BDOgnnVY.js";import{M as W}from"./MicroInteraction-DVat0hLF.js";import{g as G}from"./premiumUtils-Ccr3qdNt.js";const Y=new class{constructor(){this.queue=this.loadQueue(),this.isOnline=navigator.onLine,window.addEventListener("online",(()=>{this.isOnline=!0,this.processQueue()})),window.addEventListener("offline",(()=>{this.isOnline=!1}))}loadQueue(){try{const e=localStorage.getItem("offline_queue");return e?JSON.parse(e):[]}catch{return[]}}saveQueue(){try{localStorage.setItem("offline_queue",JSON.stringify(this.queue))}catch(e){}}addAction(e){const t={id:Date.now()+Math.random(),action:e,timestamp:(new Date).toISOString(),retries:0};return this.queue.push(t),this.saveQueue(),this.isOnline&&this.processQueue(),t.id}async processQueue(){if(!this.isOnline||0===this.queue.length)return;const e=[...this.queue];for(const s of e)try{await this.executeAction(s.action),this.removeFromQueue(s.id)}catch(t){s.retries++,s.retries>=3&&this.removeFromQueue(s.id)}this.saveQueue()}async executeAction(e){switch(e.type){case"MOOD_LOG":return this.syncMoodLog(e.data);case"POST_CREATE":return this.syncPost(e.data);case"COMMENT_CREATE":return this.syncComment(e.data)}}async syncMoodLog(e){const t=JSON.parse(localStorage.getItem("safespace_moods")||"{}");t[e.date]=e,localStorage.setItem("safespace_moods",JSON.stringify(t))}async syncPost(e){const t=JSON.parse(localStorage.getItem("safespace_user_posts")||"[]");t.push(e),localStorage.setItem("safespace_user_posts",JSON.stringify(t))}async syncComment(e){}removeFromQueue(e){this.queue=this.queue.filter((t=>t.id!==e))}getQueueLength(){return this.queue.length}clearQueue(){this.queue=[],this.saveQueue()}},Q=e("https://jzxbovqisripvsxvmkbb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6eGJvdnFpc3JpcHZzeHZta2JiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTc4ODksImV4cCI6MjA3NTA3Mzg4OX0.kH6hEyXL4xPPo6Xm8oU0WLsuc3W9VzJtPpVxalRVY1s");function q(){const[e,t]=a.useState({}),[s,r]=a.useState(!0);a.useEffect((()=>{l()}),[]);const l=async()=>{const{data:{user:e}}=await Q.auth.getUser();if(!e){const e=JSON.parse(localStorage.getItem("safespace_moods")||"{}");return t(e),void r(!1)}const{data:s,error:a}=await Q.from("moods").select("*").eq("user_id",e.id).order("date",{ascending:!1});if(!a&&s){const e=s.reduce(((e,t)=>(e[t.date]=t,e)),{});t(e)}r(!1)};return{moods:e,loading:s,saveMood:async(s,a)=>{const{data:{user:r}}=await Q.auth.getUser();if(!r){const r={...e,[s]:a};return localStorage.setItem("safespace_moods",JSON.stringify(r)),t(r),{success:!0}}const{error:l}=await Q.from("moods").upsert([{user_id:r.id,date:s,...a}]);return l?{success:!1,error:l}:(t({...e,[s]:a}),{success:!0})},refreshMoods:l}}const H=[{id:"work",label:"Work",color:"blue",category:"productivity"},{id:"productive",label:"Productive",color:"green",category:"productivity"},{id:"stressed",label:"Stressed",color:"red",category:"productivity"},{id:"exercise",label:"Exercise",color:"emerald",category:"health"},{id:"sleep",label:"Sleep",color:"indigo",category:"health"},{id:"tired",label:"Tired",color:"gray",category:"health"},{id:"energetic",label:"Energetic",color:"yellow",category:"health"},{id:"social",label:"Social",color:"pink",category:"social"},{id:"family",label:"Family",color:"rose",category:"social"},{id:"friends",label:"Friends",color:"purple",category:"social"},{id:"lonely",label:"Lonely",color:"slate",category:"social"},{id:"anxious",label:"Anxious",color:"orange",category:"mental"},{id:"calm",label:"Calm",color:"teal",category:"mental"},{id:"motivated",label:"Motivated",color:"lime",category:"mental"},{id:"overwhelmed",label:"Overwhelmed",color:"red",category:"mental"},{id:"meditation",label:"Meditation",color:"violet",category:"activity"},{id:"therapy",label:"Therapy",color:"cyan",category:"activity"},{id:"hobby",label:"Hobby",color:"amber",category:"activity"}],R={blue:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",green:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",red:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300",emerald:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300",indigo:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300",gray:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",yellow:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300",pink:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300",rose:"bg-rose-100 text-rose-700 dark:bg-rose-900 dark:text-rose-300",purple:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",slate:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",orange:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",teal:"bg-teal-100 text-teal-700 dark:bg-teal-900 dark:text-teal-300",lime:"bg-lime-100 text-lime-700 dark:bg-lime-900 dark:text-lime-300",violet:"bg-violet-100 text-violet-700 dark:bg-violet-900 dark:text-violet-300",cyan:"bg-cyan-100 text-cyan-700 dark:bg-cyan-900 dark:text-cyan-300",amber:"bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300"},B={productivity:{label:"Work & Productivity",icon:"üíº"},health:{label:"Physical Health",icon:"üí™"},social:{label:"Social & Relationships",icon:"üë•"},mental:{label:"Mental & Emotional",icon:"üß†"},activity:{label:"Activities",icon:"üéØ"}};function V({selectedTags:e=[],onChange:s,maxTags:r=5}){const{tags:l,createTag:o}=function(){const[e,t]=a.useState([]),[s,r]=a.useState(!0);a.useEffect((()=>{l()}),[]);const l=()=>{try{const e=JSON.parse(localStorage.getItem("safespace_custom_tags")||"[]");t([...H,...e])}catch(e){t(H)}finally{r(!1)}};return{tags:e,loading:s,createTag:(e,s="gray",a="custom")=>{try{const r=JSON.parse(localStorage.getItem("safespace_custom_tags")||"[]"),l={id:`custom_${Date.now()}`,label:e,color:s,category:a,custom:!0,createdAt:(new Date).toISOString()},o=[...r,l];return localStorage.setItem("safespace_custom_tags",JSON.stringify(o)),t([...H,...o]),{success:!0,tag:l}}catch(r){return{success:!1,error:r.message}}},deleteTag:e=>{try{const s=JSON.parse(localStorage.getItem("safespace_custom_tags")||"[]").filter((t=>t.id!==e));return localStorage.setItem("safespace_custom_tags",JSON.stringify(s)),t([...H,...s]),{success:!0}}catch(s){return{success:!1,error:s.message}}},getTagById:t=>e.find((e=>e.id===t)),getTagsByCategory:t=>e.filter((e=>e.category===t)),refreshTags:l}}(),[i,n]=a.useState(!1),[c,m]=a.useState(""),[x,g]=a.useState("blue"),[h,u]=a.useState("all"),p="all"===h?l:l.filter((e=>e.category===h));return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"block text-sm font-medium",children:["Tags (",e.length,"/",r,")"]}),t.jsxs("button",{type:"button",onClick:()=>n(!i),className:"text-sm text-primary flex items-center gap-1",children:[t.jsx(d,{size:16}),"Create Tag"]})]}),t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[t.jsx("button",{onClick:()=>u("all"),className:"px-3 py-1 rounded-lg text-sm font-medium whitespace-nowrap "+("all"===h?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700"),children:"All"}),Object.entries(B).map((([e,{label:s,icon:a}])=>t.jsxs("button",{onClick:()=>u(e),className:"px-3 py-1 rounded-lg text-sm font-medium whitespace-nowrap "+(h===e?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700"),children:[a," ",s]},e)))]}),i&&t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl space-y-3",children:[t.jsx("input",{type:"text",value:c,onChange:e=>m(e.target.value),placeholder:"Tag name...",className:"w-full px-3 py-2 rounded-lg border dark:bg-gray-700",maxLength:20}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.keys(R).map((e=>t.jsx("button",{type:"button",onClick:()=>g(e),className:`w-8 h-8 rounded-full ${R[e]} ${x===e?"ring-2 ring-primary":""}`},e)))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{if(c.trim()){const t=o(c.trim(),x,"custom");t.success&&(s([...e,t.tag.id]),m(""),n(!1))}},className:"flex-1 bg-primary text-white py-2 rounded-lg font-medium",children:"Create"}),t.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg",children:"Cancel"})]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((a=>{const l=e.includes(a.id);return t.jsxs("button",{type:"button",onClick:()=>{return t=a.id,void(e.includes(t)?s(e.filter((e=>e!==t))):e.length<r&&s([...e,t]));var t},className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${R[a.color]} ${l?"ring-2 ring-primary":"opacity-60 hover:opacity-100"}`,children:[a.label,l&&t.jsx("span",{className:"ml-1",children:"‚úì"})]},a.id)}))}),e.length>=r&&t.jsxs("p",{className:"text-sm text-orange-600",children:["Maximum ",r," tags reached"]})]})}const X=[{emoji:"üòä",label:"Amazing",value:5,color:"#10B981"},{emoji:"üôÇ",label:"Good",value:4,color:"#84CC16"},{emoji:"üòê",label:"Okay",value:3,color:"#F59E0B"},{emoji:"üò¢",label:"Low",value:2,color:"#F97316"},{emoji:"üò∞",label:"Struggling",value:1,color:"#EF4444"}];function Z({onMoodLogged:e}){const[r,l]=a.useState(null),[d,c]=a.useState(""),[m,x]=a.useState([]),[g,h]=a.useState(!1),[u,p]=a.useState(!1),[b,y]=a.useState(!1),[j,f]=a.useState(null),[N,v]=a.useState(0),[k,w]=a.useState(!1),[S,D]=a.useState([]),C=(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`})(),O=new Date,I=O.getHours(),T=I<12?"Good morning":I<17?"Good afternoon":"Good evening",M=O.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),{moods:L,saveMood:z}=q();a.useEffect((()=>{const e=L[C];e&&(f(e),p(!0)),E(L)}),[C,L]);const E=e=>{let t=0;const s=new Date;for(let a=0;a<365;a++){const r=new Date(s);r.setDate(s.getDate()-a);if(!e[r.toISOString().split("T")[0]])break;t++}v(t)},F=()=>{D([])},_=()=>{p(!1),f(null)},A=200-d.length,J=A<20?"text-danger":A<50?"text-warning":"text-text-secondary";return b?t.jsxs("div",{className:"card p-6 mb-6 text-center dark:bg-gray-800 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:"üéâ"}),t.jsx("h3",{className:"text-xl font-semibold text-text-primary dark:text-white mb-2",children:"Mood logged!"}),N>1&&t.jsxs("p",{className:"text-text-secondary",children:[N," day streak! Keep it up üî•"]})]}):u&&j?t.jsx("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-3xl",children:j.emoji}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-text-primary dark:text-white",children:["Today's mood: ",j.label]}),j.note&&t.jsx("p",{className:"text-text-secondary dark:text-gray-300 text-sm truncate max-w-xs",children:j.note})]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("button",{onClick:_,className:"px-4 py-2 bg-primary dark:bg-primary-light text-white rounded-xl text-sm font-medium hover:bg-primary/90 dark:hover:bg-primary-light/90 transition-colors",children:"Update"}),t.jsx("button",{className:"text-text-secondary dark:text-gray-300 text-sm hover:text-text-primary dark:hover:text-white",children:"View History"})]})]})}):t.jsxs("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-text-secondary dark:text-gray-300 text-sm",children:M}),t.jsxs("h2",{className:"text-xl font-semibold text-text-primary dark:text-white",children:[T,"!"]}),t.jsx("p",{className:"text-text-primary dark:text-gray-100 mt-2",children:"How are you feeling right now?"})]}),t.jsx("div",{className:"flex justify-between gap-2 mb-4",children:X.map((e=>t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("button",{onClick:()=>(e=>{l(e),h(!0),s(`Selected ${e.label} mood`)})(e),"aria-label":`Select ${e.label} mood`,"aria-pressed":r?.value===e.value,className:"w-14 h-14 md:w-16 md:h-16 rounded-2xl flex items-center justify-center text-2xl md:text-3xl transition-all duration-200 hover:scale-110 "+(r?.value===e.value?"scale-110 shadow-lg":"hover:shadow-md"),style:{backgroundColor:`${e.color}20`},children:e.emoji}),r?.value===e.value&&t.jsx("span",{className:"text-xs text-text-secondary dark:text-gray-300 mt-1 font-medium",children:e.label})]},e.value)))}),g&&t.jsxs("div",{className:"overflow-hidden transition-all duration-300 ease-out",children:[t.jsx("div",{className:"mb-4",children:t.jsx(V,{selectedTags:m,onChange:x,maxTags:5})}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"mood-note",className:"sr-only",children:"Add a note about your mood (optional)"}),t.jsx("textarea",{id:"mood-note",value:d,onChange:e=>c(e.target.value.slice(0,200)),placeholder:"Want to add a note? (optional)","aria-label":"Mood note",className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl resize-none focus:border-primary dark:focus:border-primary-light outline-none transition-colors",rows:3,maxLength:200}),t.jsx("div",{className:"flex justify-end mt-1",children:t.jsxs("span",{className:`text-xs ${J}`,children:[A,"/200"]})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsx("button",{onClick:async()=>{const t={mood:r.value,emoji:r.emoji,label:r.label,note:d.trim(),tags:m,timestamp:(new Date).toISOString()};await z(C,t),(e=>{Y.addAction({type:"MOOD_LOG",data:e})})({...t,date:C}),o(n.moodLog);const a=i().filter((e=>e.unlocked));a.length>0&&D(a),y(!0),E({...L,[C]:t}),s("Mood logged successfully!"),setTimeout((()=>{y(!1),f(t),p(!0),l(null),c(""),h(!1),e?.()}),3e3)},"aria-label":"Log your mood",className:"flex-1 bg-primary dark:bg-primary-light text-white py-3 rounded-xl font-semibold hover:bg-primary/90 dark:hover:bg-primary-light/90 transition-colors",children:"Log Mood"}),t.jsx("button",{onClick:()=>{l(null),h(!1),c(""),x([])},className:"text-text-secondary dark:text-gray-300 hover:text-text-primary dark:hover:text-white transition-colors",children:"Skip for now"})]})]}),S.length>0&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:F,role:"dialog","aria-labelledby":"badge-modal-title","aria-modal":"true",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"üéâ"}),t.jsx("h3",{id:"badge-modal-title",className:"text-2xl font-bold text-text-primary dark:text-white mb-2",children:"Badge Unlocked!"}),S.map(((e,s)=>t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{className:"text-4xl mb-2",children:e.badge.emoji}),t.jsx("h4",{className:"text-xl font-semibold text-text-primary dark:text-white",children:e.badge.name}),t.jsx("p",{className:"text-text-secondary dark:text-gray-300",children:e.badge.description}),t.jsxs("p",{className:"text-primary dark:text-primary-light font-medium mt-2",children:["+",e.badge.points," points"]})]},s))),t.jsx("button",{onClick:F,className:"mt-4 px-6 py-3 bg-primary dark:bg-primary-light text-white rounded-xl font-medium hover:bg-primary/90 dark:hover:bg-primary-light/90 transition-colors",children:"Awesome!"})]})})})]})}const K={5:"#10B981",4:"#84CC16",3:"#F59E0B",2:"#F97316",1:"#EF4444"},ee={5:"Amazing",4:"Good",3:"Okay",2:"Low",1:"Struggling"};function te(){const[e,s]=a.useState("week"),[r,l]=a.useState(new Date),{moods:o,loading:i}=q(),[n,d]=a.useState(null),[u,p]=a.useState(!1),b=e=>{const t=[],s=new Date(e),a=s.getDay();s.setDate(s.getDate()-a);for(let r=0;r<7;r++){const e=new Date(s);e.setDate(s.getDate()+r),t.push(e)}return t},y=e=>e.toISOString().split("T")[0],j=e=>{const t=new Date;return e.toDateString()===t.toDateString()},f=e=>{const t=new Date(r);t.setDate(t.getDate()+7*e),l(t)},N=e=>{const t=new Date(r);t.setMonth(t.getMonth()+e),l(t)},v=e=>{const t=y(e),s=o[t];s&&(d({date:e,mood:s}),p(!0))};if(i)return t.jsx("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4"}),t.jsx("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:7},((e,s)=>t.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"},s)))})]})});return Object.keys(o).length>0?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h3",{className:"text-xl font-semibold text-text-primary dark:text-white",children:["Your Mood This ","week"===e?"Week":"Month"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>s("week"),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors "+("week"===e?"bg-primary text-white":"text-text-secondary hover:text-text-primary"),children:"Week"}),t.jsx("button",{onClick:()=>s("month"),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors "+("month"===e?"bg-primary text-white":"text-text-secondary hover:text-primary"),children:"Month"})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("button",{onClick:()=>"week"===e?f(-1):N(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(c,{size:20})}),t.jsx("span",{className:"font-medium text-text-primary",children:"week"===e?(()=>{const e=b(r),t=e[0],s=e[6];return`${t.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`})():r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),t.jsx("button",{onClick:()=>"week"===e?f(1):N(1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(m,{size:20})})]}),"week"===e?t.jsx("div",{className:"grid grid-cols-7 gap-2",children:b(r).map(((e,s)=>{const a=y(e),r=o[a];return t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-text-secondary mb-1",children:["S","M","T","W","T","F","S"][s]}),t.jsx("div",{className:"text-sm font-medium mb-2",children:e.getDate()}),t.jsx("button",{onClick:()=>v(e),className:`w-full h-16 rounded-xl flex items-center justify-center text-2xl transition-all hover:scale-105 ${j(e)?"ring-2 ring-primary":""} ${r?"cursor-pointer shadow-sm":"border-2 border-dashed border-gray-300 cursor-default"}`,style:{backgroundColor:r?`${K[r.mood]}20`:"transparent"},disabled:!r,children:r?r.emoji:""})]},s)}))}):t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>t.jsx("div",{className:"text-center text-xs font-medium text-text-secondary p-2",children:e},e))),(e=>{const t=e.getFullYear(),s=e.getMonth(),a=new Date(t,s,1),r=new Date(a);r.setDate(r.getDate()-a.getDay());const l=[],o=new Date(r);for(;l.length<42;)l.push(new Date(o)),o.setDate(o.getDate()+1);return l})(r).map(((e,s)=>{const a=y(e),l=o[a],i=((e,t)=>e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear())(e,r);return t.jsxs("button",{onClick:()=>v(e),className:`aspect-square p-1 rounded-lg text-sm transition-all hover:scale-105 ${j(e)?"ring-2 ring-primary":""} ${i?"text-text-primary":"text-gray-300"} ${l?"cursor-pointer":"cursor-default"}`,style:{backgroundColor:l?`${K[l.mood]}20`:"transparent"},disabled:!l,children:[t.jsx("div",{className:"font-medium",children:e.getDate()}),l&&t.jsx("div",{className:"text-lg leading-none",children:l.emoji})]},s)}))]})]}),u&&n&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-surface dark:bg-gray-800 rounded-2xl p-6 max-w-sm w-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:n.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),t.jsx("button",{onClick:()=>p(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:t.jsx(x,{size:20})})]}),t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("div",{className:"text-4xl mb-2",children:n.mood.emoji}),t.jsxs("p",{className:"text-lg font-medium text-text-primary",children:["You felt ",ee[n.mood.mood]]})]}),n.mood.note&&t.jsx("div",{className:"bg-gray-50 rounded-xl p-3 mb-4",children:t.jsx("p",{className:"text-text-secondary text-sm",children:n.mood.note})}),t.jsxs("p",{className:"text-xs text-text-secondary mb-4",children:["Logged at ",new Date(n.mood.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"flex-1 flex items-center justify-center gap-2 py-2 px-4 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors",children:[t.jsx(g,{size:16}),"Edit"]}),t.jsxs("button",{onClick:async()=>{if(n){const e=y(n.date),t={...o};delete t[e],localStorage.setItem("safespace_moods",JSON.stringify(t)),p(!1)}},className:"flex items-center justify-center gap-2 py-2 px-4 bg-danger text-white rounded-xl font-medium hover:bg-danger/90 transition-colors",children:[t.jsx(h,{size:16}),"Delete"]})]})]})})]}):t.jsxs("div",{className:"card p-6 mb-6 text-center dark:bg-gray-800 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:"üìä"}),t.jsx("h3",{className:"text-xl font-semibold text-text-primary dark:text-white mb-2",children:"Your Mood History"}),t.jsx("p",{className:"text-text-secondary dark:text-gray-300 mb-4",children:"Start tracking your mood to see patterns over time"}),t.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"px-6 py-2 bg-primary dark:bg-primary-light text-white rounded-xl font-medium hover:bg-primary/90 dark:hover:bg-primary-light/90 transition-colors",children:"Log your first mood"})]})}const se={5:{label:"Amazing",emoji:"üòä"},4:{label:"Good",emoji:"üôÇ"},3:{label:"Okay",emoji:"üòê"},2:{label:"Low",emoji:"üò¢"},1:{label:"Struggling",emoji:"üò∞"}};function ae(){const[e,s]=a.useState("7"),[r,l]=a.useState([]),[o,i]=a.useState(null),{moods:n,loading:d}=q(),[c,m]=a.useState(!0);a.useEffect((()=>{d||x()}),[e,n,d]);const x=()=>{const t=Object.entries(n||{}).map((([e,t])=>({date:e,mood:t.mood,emoji:t.emoji,label:t.label,note:t.note,timestamp:t.timestamp}))).sort(((e,t)=>new Date(e.date)-new Date(t.date))),s="all"===e?t.length:parseInt(e),a=("all"===e?t:t.slice(-s)).map((e=>({...e,displayDate:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})));l(a),g(a,t),m(!1)},g=(t,s)=>{if(0===t.length)return void i(null);const a=t.reduce(((e,t)=>e+t.mood),0)/t.length,r="all"===e?[]:s.slice(-2*parseInt(e),-parseInt(e)),l=a-(r.length>0?r.reduce(((e,t)=>e+t.mood),0)/r.length:a),o=t.reduce(((e,t)=>t.mood>e.mood?t:e)),n=t.reduce(((e,t)=>(e[t.mood]=(e[t.mood]||0)+1,e)),{}),d=Object.keys(n).reduce(((e,t)=>n[e]>n[t]?e:t)),c=t.filter((e=>e.mood>=4)).length,m=Math.round(c/t.length*100),x=t.reduce(((e,t)=>{const s=new Date(t.date).getDay();return e[s]||(e[s]=[]),e[s].push(t.mood),e}),{}),g=Object.entries(x).map((([e,t])=>{const s=t.reduce(((e,t)=>e+t),0)/t.length,a=t.reduce(((e,t)=>e+Math.pow(t-s,2)),0)/t.length;return{day:parseInt(e),variance:a}})),h=g.length>0?g.reduce(((e,t)=>t.variance<e.variance?t:e)):null;i({average:a,trend:l,bestDay:o,mostCommonMood:parseInt(d),goodDaysPercent:m,mostConsistentDay:h?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][h.day]:null})},h=a.useCallback((({active:e,payload:s,label:a})=>{if(e&&s&&s.length){const e=s[0].payload;return t.jsxs("div",{className:"bg-surface dark:bg-gray-700 p-3 rounded-xl shadow-lg border dark:border-gray-600",children:[t.jsx("p",{className:"font-medium",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),t.jsxs("p",{className:"text-lg",children:[e.emoji," ",e.label]}),e.note&&t.jsx("p",{className:"text-sm text-text-secondary mt-1 max-w-xs",children:e.note.length>50?`${e.note.slice(0,50)}...`:e.note})]})}return null}),[]),j=a.useCallback((e=>se[e]?.emoji||""),[]);if(c)return t.jsx("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-48 mb-4"}),t.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded"})]})});if(r.length<3)return t.jsxs("div",{className:"card p-6 mb-6 text-center dark:bg-gray-800 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:"üìà"}),t.jsx("h3",{className:"text-xl font-semibold text-text-primary dark:text-white mb-2",children:"Your Mood Trends"}),t.jsx("p",{className:"text-text-secondary dark:text-gray-300 mb-4",children:"Keep logging to see trends"}),t.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-full h-2 mb-2",children:t.jsx("div",{className:"bg-primary dark:bg-primary-light h-2 rounded-full transition-all duration-300",style:{width:r.length/3*100+"%"}})}),t.jsxs("p",{className:"text-sm text-text-secondary dark:text-gray-300",children:[r.length,"/3 moods needed"]})]});const f=a.useMemo((()=>({7:"Last 7 days",30:"Last 30 days",all:"All time"})),[]);return t.jsxs("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-text-primary dark:text-white",children:"Your Mood Trends"}),t.jsx("p",{className:"text-text-secondary dark:text-gray-300 text-sm",children:f[e]})]}),t.jsx("div",{className:"flex gap-2",children:["7","30","all"].map((a=>t.jsx("button",{onClick:()=>s(a),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors "+(e===a?"bg-primary dark:bg-primary-light text-white":"text-text-secondary dark:text-gray-300 hover:text-text-primary dark:hover:text-white"),children:"all"===a?"All time":`${a} days`},a)))})]}),o&&t.jsxs("div",{className:"mb-6 p-4 bg-primary/5 dark:bg-primary/10 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:se[Math.round(o.average)]?.emoji}),t.jsxs("span",{className:"text-lg font-semibold",children:["Your average mood: ",o.average.toFixed(1)]})]}),0!==o.trend&&t.jsxs("p",{className:"text-sm text-text-secondary",children:[o.trend>0?"‚Üë":"‚Üì"," ",Math.abs(o.trend).toFixed(1)," ",o.trend>0?"better":"lower"," than last period"]})]}),t.jsx("div",{className:"h-64 md:h-80 mb-6",children:t.jsx(I,{width:"100%",height:"100%",children:t.jsxs(T,{data:r,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"moodGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#4F46E5",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#4F46E5",stopOpacity:0})]})}),t.jsx(M,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),t.jsx(L,{dataKey:"displayDate",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"}}),t.jsx(z,{domain:[1,5],ticks:[1,2,3,4,5],tickFormatter:j,axisLine:!1,tickLine:!1,tick:{fontSize:16}}),t.jsx(E,{content:t.jsx(h,{})}),t.jsx(F,{type:"monotone",dataKey:"mood",stroke:"#4F46E5",strokeWidth:3,fill:"url(#moodGradient)",dot:{fill:"#4F46E5",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#4F46E5",strokeWidth:2},animationDuration:1e3,animationEasing:"ease-out",isAnimationActive:!0})]})})}),o&&t.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[t.jsx(u,{className:"text-primary dark:text-primary-light",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium dark:text-white",children:"Best day"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-gray-300",children:[new Date(o.bestDay.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",o.bestDay.emoji]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[t.jsx(p,{className:"text-primary dark:text-primary-light",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium dark:text-white",children:"Most common mood"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-gray-300",children:[se[o.mostCommonMood]?.emoji," ",se[o.mostCommonMood]?.label]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[t.jsx(b,{className:"text-primary dark:text-primary-light",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium dark:text-white",children:"Good days"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-gray-300",children:[o.goodDaysPercent,"% felt good or better"]})]})]}),o.mostConsistentDay&&t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[t.jsx(y,{className:"text-primary dark:text-primary-light",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium dark:text-white",children:"Most consistent"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-gray-300",children:[o.mostConsistentDay,"s"]})]})]})]})]})}const re={anxiety:["breathing-exercises","worry-scheduler","coping-skills","dbt-skills"],depression:["gratitude","habits","social","therapy-prep"],stress:["breathing-exercises","meditation","sleep-tracker","wellness-plan"],journaling:["gratitude","emotion-tracker","therapy-prep","voice-journal"],social:["circles","peer-support","accountability","private-groups"]},le=e=>{const t=A();return!!t.usage?.features?.[e]},oe=e=>({gratitude:["journaling","mood-tracker","habits"],habits:["wellness-plan","reminders","challenges"],"mood-tracker":["emotion-tracker","analytics","insights"],circles:["social","peer-support","private-groups"]}[e]||[]);function ie({feature:e,isRecommended:s,isActive:l,priority:o,onDismiss:i}){const n=r(),[d,c]=a.useState(!1),m={urgent:{icon:f,text:"Needs Attention",color:"bg-red-500"},high:{icon:b,text:"Recommended",color:"bg-primary"},medium:{icon:j,text:"Quick Win",color:"bg-yellow-500"},low:null}[o],x=e.icon;return t.jsxs("div",{className:`card p-6 hover:shadow-xl transition-all relative ${{urgent:"border-2 border-red-400 shadow-lg shadow-red-100",high:"border-2 border-primary shadow-lg shadow-primary/20",medium:"border border-primary/30",low:"border border-gray-200"}[o]} ${l?"ring-2 ring-primary":""}`,children:[m&&t.jsxs("div",{className:`absolute -top-2 -right-2 ${m.color} text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 shadow-lg`,children:[t.jsx(m.icon,{className:"w-3 h-3"}),t.jsx("span",{children:m.text})]}),t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${e.gradient||"from-primary to-purple-500"} flex items-center justify-center text-white shadow-lg`,children:t.jsx(x,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg",children:e.name}),e.subtitle&&t.jsx("p",{className:"text-xs text-text-secondary",children:e.subtitle})]})]}),i&&t.jsx("button",{onClick:()=>c(!d),className:"p-1 hover:bg-hover rounded",children:t.jsx(N,{className:"w-4 h-4"})})]}),e.description&&t.jsx("p",{className:"text-sm text-text-secondary mb-4",children:e.description}),e.stats&&t.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:e.stats.map(((e,s)=>t.jsxs("div",{className:"bg-hover rounded-lg p-2 text-center",children:[t.jsx("p",{className:"text-lg font-bold text-primary",children:e.value}),t.jsx("p",{className:"text-xs text-text-secondary",children:e.label})]},s)))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>n(e.path),className:"btn-primary flex-1 text-sm",children:e.action||"Open"}),e.secondaryAction&&t.jsx("button",{onClick:e.secondaryAction.onClick,className:"btn-secondary text-sm",children:e.secondaryAction.label})]}),d&&i&&t.jsx("div",{className:"absolute top-12 right-4 bg-white shadow-xl rounded-lg p-2 z-10 border",children:t.jsx("button",{onClick:()=>{i(),c(!1)},className:"text-sm px-3 py-2 hover:bg-hover rounded w-full text-left",children:"Not interested"})})]})}const ne={gratitude:{name:"Gratitude Journal",icon:D,path:"/gratitude",color:"text-pink-500"},habits:{name:"Habit Tracker",icon:p,path:"/habits",color:"text-green-500"},"mood-tracker":{name:"Mood Tracker",icon:D,path:"/",color:"text-blue-500"},circles:{name:"Support Circles",icon:S,path:"/circles",color:"text-purple-500"},wellness:{name:"Wellness Score",icon:b,path:"/wellness",color:"text-teal-500"},insights:{name:"Insights",icon:w,path:"/insights",color:"text-indigo-500"},resources:{name:"Resources",icon:k,path:"/resources",color:"text-orange-500"},"sleep-tracker":{name:"Sleep Tracker",icon:v,path:"/tools",color:"text-blue-600"}};function de(){const e=r(),[s,l]=a.useState([]),[o,i]=a.useState([]),[n,d]=a.useState(!1),c=$();return a.useEffect((()=>{if(!c)return;const e=((e=6)=>{const t=A(),s=t.usage?.features||{};return Object.entries(s).sort((([,e],[,t])=>{const s=.7*e.count+(Date.now()-new Date(e.lastUsed).getTime()<864e5?100:0);return.7*t.count+(Date.now()-new Date(t.lastUsed).getTime()<864e5?100:0)-s})).slice(0,e).map((([e])=>e))})(6),t=(()=>{const e=A(),t=(new Date).getHours();return e.usage?.timePatterns?.[t]||[]})(),s=[...new Set([...t,...e])].slice(0,6),a=s.length>0?s:["mood-tracker","gratitude","habits","circles","wellness","insights"];l(a);const r=(()=>{const e=A();if(!e.enabled)return[];const t=[];(JSON.parse(localStorage.getItem("safespace_user_profile")||"{}").goals||[]).forEach((e=>{(re[e]||[]).forEach((s=>{le(s)||t.push({featureId:s,reason:`Recommended for your ${e} goal`,priority:"high",timestamp:(new Date).toISOString()})}))}));const s=JSON.parse(localStorage.getItem("safespace_moods")||"{}"),a=Object.values(s).slice(-7);a.reduce(((e,t)=>e+t.rating),0)/a.length<3&&t.push({featureId:"crisis-support",reason:"Your recent mood shows you might need extra support",priority:"urgent",timestamp:(new Date).toISOString()});const r=e.usage?.features||{},l=Object.entries(r).sort((([,e],[,t])=>t.count-e.count))[0];if(l&&l[1].count>5){const[e]=l;oe(e).forEach((s=>{le(s)||t.push({featureId:s,reason:`You might also like this based on your use of ${e}`,priority:"medium",timestamp:(new Date).toISOString()})}))}const o=e.recommendations?.dismissed||[];return t.filter((e=>!o.includes(e.featureId))).sort(((e,t)=>{const s={urgent:3,high:2,medium:1,low:0};return s[t.priority]-s[e.priority]})).slice(0,5)})();i(r);const o=(()=>{const e=JSON.parse(localStorage.getItem("safespace_moods")||"{}"),t=Object.values(e).slice(-1)[0];return(t?Math.floor((Date.now()-new Date(t.date).getTime())/864e5):999)>=3})();d(o)}),[c]),c?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[t.jsx(f,{className:"w-4 h-4 text-primary"}),t.jsx("span",{children:"Personalized for you"})]}),n&&t.jsxs("div",{className:"card p-4 bg-blue-50 border border-blue-200",children:[t.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"We miss you! üíô"}),t.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"It's been a few days since your last mood check-in. How are you feeling today?"}),t.jsx("button",{onClick:()=>e("/"),className:"btn-primary text-sm",children:"Quick Mood Check-In"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold mb-3",children:"Your Top Tools"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e=>{const s=ne[e];return s?t.jsx(ie,{feature:{name:s.name,icon:s.icon,path:s.path,gradient:"from-primary to-purple-500"},priority:"medium"},e):null}))})]}),o.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold mb-3",children:"Recommended for You"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map((e=>{const s=ne[e.featureId];return s?t.jsx(ie,{feature:{name:s.name,icon:s.icon,path:s.path,description:e.reason,gradient:"from-primary to-purple-500"},priority:e.priority,isRecommended:!0,onDismiss:()=>(e=>{const t=A(),s=t.recommendations?.dismissed||[];s.push(e),J({recommendations:{...t.recommendations,dismissed:s}})})(e.featureId)},e.featureId):null}))})]})]}):null}function ce({actions:e=[]}){const[s,r]=a.useState(!1),{vibrate:l}=U();return t.jsxs(t.Fragment,{children:[s&&t.jsx("div",{className:"fixed inset-0 bg-black/20 z-40 animate-fadeIn",onClick:()=>r(!1)}),t.jsxs("div",{className:"fixed bottom-20 right-4 md:bottom-8 z-50 flex flex-col-reverse items-end gap-3",children:[s&&e.map(((e,s)=>t.jsxs("div",{className:"flex items-center gap-3 animate-slideUp",style:{animationDelay:50*s+"ms"},children:[t.jsx("span",{className:"bg-gray-900 dark:bg-gray-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg",children:e.label}),t.jsx("button",{onClick:()=>(e=>{l("medium"),e.onClick(),r(!1)})(e),className:"w-12 h-12 bg-white dark:bg-gray-800 rounded-full shadow-lg flex items-center justify-center text-primary hover:scale-110 transition-transform active:scale-95","aria-label":e.label,children:e.icon})]},s))),t.jsx("button",{onClick:()=>{l("light"),r(!s)},className:"w-14 h-14 bg-gradient-to-r from-primary to-secondary rounded-full shadow-2xl flex items-center justify-center text-white hover:scale-110 transition-transform active:scale-95","aria-label":s?"Close menu":"Open menu",children:s?t.jsx(x,{size:24}):t.jsx(d,{size:24})})]})]})}function me(){const e=r(),[s,o]=a.useState(null),[i,n]=a.useState(0),[d,c]=a.useState(null),[m,x]=a.useState(!1),{isPremium:g,trialActive:h,daysLeft:u}=G();a.useEffect((()=>{try{const e=localStorage.getItem("safespace_user");e&&o(JSON.parse(e)),P(),((e,t=0)=>{const s=A();if(!s.enabled)return;const a=s.usage?.features||{},r=a[e]||{count:0,totalDuration:0},l={count:r.count+1,lastUsed:(new Date).toISOString(),totalDuration:r.totalDuration+t,avgDuration:Math.round((r.totalDuration+t)/(r.count+1))};a[e]=l,J({usage:{...s.usage,features:a}})})("home",0)}catch(e){c("Failed to load user data")}}),[]);const p=[{icon:t.jsx(O,{size:20}),label:"Log Mood",onClick:()=>x(!0),color:"from-indigo-500 to-purple-600"},{icon:t.jsx(D,{size:20}),label:"Gratitude",onClick:()=>e("/gratitude"),color:"from-pink-500 to-red-600"},{icon:t.jsx(k,{size:20}),label:"Journal",onClick:()=>e("/advanced-tools"),color:"from-blue-500 to-cyan-600"}];return d?t.jsx("div",{className:"max-w-4xl mx-auto p-4",children:t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[t.jsx("p",{className:"text-red-600 mb-4",children:d}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reload Page"})]})}):t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-8 mb-6 shadow-xl",children:[t.jsx("div",{className:"absolute inset-0 bg-black/10"}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[s?.avatar&&t.jsxs("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-3xl border-2 border-white/30 shadow-lg relative",children:[s.avatar,g&&t.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full flex items-center justify-center",children:t.jsx(C,{size:14,className:"text-white"})})]}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white drop-shadow-lg",children:["Welcome back",s?.username?`, ${s.username}`:"","! üëã"]}),t.jsx("p",{className:"text-white/90 text-lg mt-1",children:"Your mental health support companion"})]})]}),g&&t.jsxs("div",{className:"hidden md:flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full border border-white/30",children:[t.jsx(C,{size:18,className:"text-yellow-300"}),t.jsx("span",{className:"text-white font-medium",children:h?`Trial: ${u} days left`:"Premium"})]})]})]}),!g&&t.jsx(l,{to:"/premium",className:"block mb-6",children:t.jsx("div",{className:"card p-6 bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300 hover:shadow-xl transition-all",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full flex items-center justify-center",children:t.jsx(C,{className:"text-white",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Upgrade to Premium"}),t.jsx("p",{className:"text-sm text-gray-700",children:"Unlock unlimited features, custom themes, and advanced analytics"})]})]}),t.jsx(f,{className:"text-yellow-500",size:24})]})})}),m&&t.jsx(_,{children:t.jsx("div",{className:"mb-6",children:t.jsx(Z,{onMoodLogged:()=>{try{n((e=>e+1)),x(!1)}catch(e){}}})})}),t.jsx(_,{children:t.jsx("div",{className:"mb-6",children:t.jsx(te,{},i)})}),t.jsx(_,{children:t.jsx("div",{className:"mb-6",children:t.jsx(ae,{},i)})}),t.jsx(_,{children:t.jsx("div",{className:"mb-6",children:t.jsx(de,{})})}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Wellness Tools"}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsx(W,{type:"lift",children:t.jsxs(l,{to:"/gratitude",className:"card p-6 hover:shadow-xl transition-all duration-300 group block",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"‚ù§Ô∏è"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Gratitude"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Daily gratitude practice"})]})}),t.jsx(W,{type:"lift",children:t.jsxs(l,{to:"/habits",className:"card p-6 hover:shadow-xl transition-all duration-300 group block",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üéØ"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Habits"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Track daily habits"})]})}),t.jsx(W,{type:"lift",children:t.jsxs(l,{to:"/emotions",className:"card p-6 hover:shadow-xl transition-all duration-300 group block",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üí≠"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Emotions"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Understand your feelings"})]})}),t.jsxs(l,{to:"/coping-skills",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üõ†Ô∏è"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Coping Skills"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Strategies for tough times"})]}),t.jsxs(l,{to:"/reminders",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"‚è∞"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Reminders"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Stay on track"})]}),t.jsxs(l,{to:"/tools",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üß∞"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Therapy Tools"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"CBT, DBT, and more"})]}),t.jsxs(l,{to:"/wellness",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üìä"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Wellness Score"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Track overall progress"})]}),t.jsxs(l,{to:"/advanced-tools",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üöÄ"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Tools"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Triggers, journal, therapy"})]}),t.jsxs(l,{to:"/gamification",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üèÜ"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Gamification"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Challenges, quests, streaks"})]}),t.jsxs(l,{to:"/wellness-plan",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üìÖ"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Wellness Plan"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Daily routine builder"})]}),t.jsxs(l,{to:"/social",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"ü§ù"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Social Hub"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Connect & support"})]}),t.jsxs(l,{to:"/analytics",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üìä"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Analytics"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Deep insights"})]}),t.jsxs(l,{to:"/professional",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üè•"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Professional"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Therapist & crisis"})]}),t.jsxs(l,{to:"/technical",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üì°"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Technical"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Voice, offline, PWA"})]}),t.jsxs(l,{to:"/premium/features",className:"card p-6 hover:shadow-xl transition-all duration-300 group border-2 border-yellow-400",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üëë"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Premium Features"})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:"Exclusive tools"})]})]})]}),t.jsx(ce,{actions:p})]})}export{me as default};
