import{j as e}from"./index-Duv89VAf.js";import{u as s,r as t}from"./react-vendor-B4gIioy9.js";import{S as a}from"./SafeComponent-DdckI7LM.js";import{L as i}from"./LimitWarningBanner-DHTA60kX.js";import{g as l}from"./premiumUtils-Ccr3qdNt.js";import{D as n,d as c}from"./disclaimers-vV8DlMF2.js";import{R as r,r as m}from"./ResearchCard-C85HT-rf.js";import{x as o,P as d,T as x,ao as h,ap as j}from"./icons-DVxOjm_j.js";function p(){const p=s(),[b,f]=t.useState([]),[u,N]=t.useState(!1),[g,y]=t.useState({name:"",icon:"ðŸŽ¯",color:"blue",frequency:"daily"}),{isPremium:v}=l();t.useEffect((()=>{const e=JSON.parse(localStorage.getItem("safespace_habits")||"[]");f(e)}),[]);const w=()=>{!v&&b.length>=5?p("/premium"):N(!0)},S=e=>{let s=0,t=new Date;for(;e.completions[t.toISOString().split("T")[0]];)s++,t.setDate(t.getDate()-1);return s},k=(new Date).toISOString().split("T")[0];return e.jsx(a,{children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Habit Tracker"}),v&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-full text-xs font-medium",children:[e.jsx(o,{size:12}),"Premium"]})]}),e.jsx("p",{className:"text-text-secondary",children:"Build better habits, one day at a time"})]}),e.jsxs("button",{onClick:w,className:"btn-primary",children:[e.jsx(d,{className:"w-5 h-5"})," Add Habit"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(n,{disclaimer:c.habits})}),e.jsx("div",{className:"mb-6",children:e.jsx(r,{citations:m.habits,title:"The Science of Habit Formation"})}),!v&&b.length>=5&&e.jsx(i,{limit:5,feature:"habits",current:b.length}),0===b.length?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(x,{className:"w-16 h-16 text-text-secondary mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Start Building Habits"}),e.jsx("p",{className:"text-text-secondary mb-4",children:"Research shows it takes an average of 66 days to form a new habit"}),e.jsxs("div",{className:"max-w-md mx-auto mb-6 text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Keys to successful habit formation:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Start small and be consistent"}),e.jsx("li",{children:"â€¢ Stack new habits with existing ones"}),e.jsx("li",{children:"â€¢ Track your progress daily"}),e.jsx("li",{children:"â€¢ Be patient - habits take time to form"})]})]}),e.jsxs("button",{onClick:w,className:"btn-primary",children:[e.jsx(d,{className:"w-5 h-5"})," Create First Habit"]})]}):e.jsx("div",{className:"space-y-4",children:b.map((s=>e.jsx("div",{className:"card p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>(e=>{const s=(new Date).toISOString().split("T")[0],t=b.map((t=>{if(t.id===e){const e={...t.completions};return e[s]=!e[s],{...t,completions:e}}return t}));localStorage.setItem("safespace_habits",JSON.stringify(t)),f(t)})(s.id),className:"text-4xl hover:scale-110 transition-transform",children:s.completions[k]?e.jsx(h,{className:"w-10 h-10 text-green-500"}):e.jsx(j,{className:"w-10 h-10 text-text-secondary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsx("h3",{className:"text-xl font-semibold",children:s.name})]}),e.jsxs("p",{className:"text-text-secondary text-sm",children:[S(s)," day streak â€¢ ",Object.values(s.completions).filter(Boolean).length," total"]})]})]})})},s.id)))}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"New Habit"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Habit Name"}),e.jsx("input",{value:g.name,onChange:e=>y({...g,name:e.target.value}),className:"input w-full",placeholder:"Exercise, Meditate, Read..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Icon"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["ðŸŽ¯","ðŸ’ª","ðŸ§˜","ðŸ“š","ðŸ’§","ðŸƒ","ðŸŽ¨","ðŸŽµ"].map((s=>e.jsx("button",{onClick:()=>y({...g,icon:s}),className:"text-3xl p-2 rounded-lg "+(g.icon===s?"bg-primary/20":"hover:bg-hover"),children:s},s)))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{onClick:()=>{const e={...g,id:Date.now(),completions:{}},s=[...b,e];localStorage.setItem("safespace_habits",JSON.stringify(s)),f(s),N(!1),y({name:"",icon:"ðŸŽ¯",color:"blue",frequency:"daily"})},disabled:!g.name,className:"btn-primary flex-1",children:"Create"})]})]})]})})]})})}export{p as default};
