import{j as e}from"./index-Duv89VAf.js";import{r as s,u as t}from"./react-vendor-B4gIioy9.js";import{u as a}from"./useAuth-BgjoR0ce.js";import{E as l,a5 as n,ag as i,X as r,I as o,ak as c,P as d,a1 as m,a2 as x,a3 as h,r as u,h as p,z as g,B as b,a as f,al as j,v,am as N,A as y,x as w,T as k,ai as _,k as C}from"./icons-DVxOjm_j.js";import{D as S,d as T}from"./disclaimers-vV8DlMF2.js";import{R as I,r as A}from"./ResearchCard-C85HT-rf.js";import{S as O}from"./SafeComponent-DdckI7LM.js";import{g as P}from"./premiumUtils-Ccr3qdNt.js";import{C as D}from"./CrisisResources-B9wVHjNH.js";function E({type:s="general"}){const t={general:{title:"Important Notice",icon:l,color:"blue",content:"This tool is designed to support your mental wellness journey, not replace professional care. If you're experiencing a mental health crisis, please contact a professional immediately."},assessment:{title:"Screening Tool Disclaimer",icon:l,color:"yellow",content:"This is a screening tool, not a diagnostic instrument. Results should be discussed with a qualified mental health professional. These assessments cannot replace a clinical evaluation."},crisis:{title:"Crisis Support",icon:n,color:"red",content:"If you're in immediate danger or having thoughts of self-harm, please call emergency services (911) or the National Suicide Prevention Lifeline at 988 immediately."},therapy:{title:"Therapeutic Tool Notice",icon:l,color:"purple",content:"These evidence-based techniques are most effective when used alongside professional therapy. They are educational tools to support your mental health journey."}}[s],a=t.icon;return e.jsx("div",{className:`card p-4 bg-${t.color}-50 border border-${t.color}-200 mb-6`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(a,{className:`w-5 h-5 text-${t.color}-600 flex-shrink-0 mt-0.5`}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:t.title}),e.jsx("p",{className:"text-gray-700 mb-3",children:t.content}),"crisis"===s&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("a",{href:"tel:988",className:"flex items-center gap-2 text-red-600 hover:text-red-700 font-medium",children:[e.jsx(n,{size:16}),e.jsx("span",{children:"Call 988 - Suicide & Crisis Lifeline"})]}),e.jsxs("a",{href:"https://988lifeline.org",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-red-600 hover:text-red-700 font-medium",children:[e.jsx(i,{size:16}),e.jsx("span",{children:"Visit 988lifeline.org"})]})]})]})]})})}function z({onClose:t}){const{user:l}=a(),[n,i]=s.useState(1),[m,x]=s.useState({situation:"",automatic_thought:"",emotions:[{emotion:"",intensity:5}],evidence_for:"",evidence_against:"",balanced_thought:"",outcome_emotions:[{emotion:"",intensity:5}]}),h=e=>{x((s=>({...s,[e]:[...s[e],{emotion:"",intensity:5}]})))},u=(e,s,t,a)=>{x((l=>({...l,[e]:l[e].map(((e,l)=>l===s?{...e,[t]:a}:e))})))},p=(e,s)=>{x((t=>({...t,[e]:t[e].filter(((e,t)=>t!==s))})))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"CBT Thought Record"}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Step ",n," of 4"]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[1===n&&e.jsxs(e.Fragment,{children:[e.jsx(E,{type:"therapy"}),e.jsx("div",{className:"card p-4 bg-blue-50 border border-blue-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("p",{className:"font-medium mb-1",children:"How CBT Thought Records Work"}),e.jsx("p",{children:"This technique helps you identify and challenge negative thought patterns. By examining the evidence, you can develop more balanced perspectives."})]})]})})]}),1===n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"1. What was the situation?"}),e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Describe the event or situation that triggered your thoughts"}),e.jsx("textarea",{value:m.situation,onChange:e=>x({...m,situation:e.target.value}),className:"input w-full h-24",placeholder:"Example: I sent a text to my friend and they didn't reply for 3 hours..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"2. What automatic thought came to mind?"}),e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"What went through your mind? What did you think would happen?"}),e.jsx("textarea",{value:m.automatic_thought,onChange:e=>x({...m,automatic_thought:e.target.value}),className:"input w-full h-24",placeholder:"Example: They're ignoring me. They must be angry with me..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"3. What emotions did you feel?"}),e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Rate the intensity from 1 (mild) to 10 (extreme)"}),m.emotions.map(((s,t)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{value:s.emotion,onChange:e=>u("emotions",t,"emotion",e.target.value),className:"input flex-1",placeholder:"Emotion (e.g., anxious, sad)"}),e.jsx("input",{type:"range",min:"1",max:"10",value:s.intensity,onChange:e=>u("emotions",t,"intensity",parseInt(e.target.value)),className:"w-32"}),e.jsx("span",{className:"w-8 text-center",children:s.intensity}),m.emotions.length>1&&e.jsx("button",{onClick:()=>p("emotions",t),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(c,{className:"w-4 h-4"})})]},t))),e.jsxs("button",{onClick:()=>h("emotions"),className:"btn-secondary text-sm",children:[e.jsx(d,{className:"w-4 h-4"})," Add Emotion"]})]})]}),2===n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Evidence FOR the thought"}),e.jsx("textarea",{value:m.evidence_for,onChange:e=>x({...m,evidence_for:e.target.value}),className:"input w-full h-32",placeholder:"What facts support this thought?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Evidence AGAINST the thought"}),e.jsx("textarea",{value:m.evidence_against,onChange:e=>x({...m,evidence_against:e.target.value}),className:"input w-full h-32",placeholder:"What facts contradict this thought?"})]})]}),3===n&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Balanced thought"}),e.jsx("textarea",{value:m.balanced_thought,onChange:e=>x({...m,balanced_thought:e.target.value}),className:"input w-full h-40",placeholder:"Based on the evidence, what's a more balanced way to think about this?"})]}),4===n&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"How do you feel now?"}),m.outcome_emotions.map(((s,t)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{value:s.emotion,onChange:e=>u("outcome_emotions",t,"emotion",e.target.value),className:"input flex-1",placeholder:"Emotion"}),e.jsx("input",{type:"range",min:"1",max:"10",value:s.intensity,onChange:e=>u("outcome_emotions",t,"intensity",parseInt(e.target.value)),className:"w-32"}),e.jsx("span",{className:"w-8 text-center",children:s.intensity}),m.outcome_emotions.length>1&&e.jsx("button",{onClick:()=>p("outcome_emotions",t),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(c,{className:"w-4 h-4"})})]},t))),e.jsxs("button",{onClick:()=>h("outcome_emotions"),className:"btn-secondary text-sm",children:[e.jsx(d,{className:"w-4 h-4"})," Add Emotion"]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-surface border-t border-border p-6 flex gap-3",children:[n>1&&e.jsx("button",{onClick:()=>i(n-1),className:"btn-secondary flex-1",children:"Previous"}),n<4?e.jsx("button",{onClick:()=>i(n+1),className:"btn-primary flex-1",children:"Next"}):e.jsx("button",{onClick:async()=>{if(l);else{const e=JSON.parse(localStorage.getItem("safespace_thought_records")||"[]");e.push({...m,id:Date.now(),created_at:(new Date).toISOString()}),localStorage.setItem("safespace_thought_records",JSON.stringify(e))}t()},className:"btn-primary flex-1",children:"Save Record"})]})]})})}const R={mindfulness:{label:"Mindfulness",skills:["Observe","Describe","Participate","One-mindfully","Non-judgmentally","Effectively"]},distress_tolerance:{label:"Distress Tolerance",skills:["STOP","TIP","ACCEPTS","Self-Soothe","IMPROVE","Pros and Cons"]},emotion_regulation:{label:"Emotion Regulation",skills:["Check the Facts","Opposite Action","Problem Solving","ABC PLEASE","Build Mastery","Cope Ahead"]},interpersonal_effectiveness:{label:"Interpersonal Effectiveness",skills:["DEAR MAN","GIVE","FAST","Validation"]}};function B({onClose:t}){const{user:l}=a(),[n,i]=s.useState({skill_type:"mindfulness",skill_name:"",situation:"",what_happened:"",skill_used:"",effectiveness:5,notes:""});return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"DBT Skills Practice"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Skill Category"}),e.jsx("select",{value:n.skill_type,onChange:e=>i({...n,skill_type:e.target.value,skill_name:""}),className:"input w-full",children:Object.entries(R).map((([s,{label:t}])=>e.jsx("option",{value:s,children:t},s)))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Specific Skill"}),e.jsxs("select",{value:n.skill_name,onChange:e=>i({...n,skill_name:e.target.value}),className:"input w-full",children:[e.jsx("option",{value:"",children:"Select a skill..."}),R[n.skill_type].skills.map((s=>e.jsx("option",{value:s,children:s},s)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Situation"}),e.jsx("textarea",{value:n.situation,onChange:e=>i({...n,situation:e.target.value}),className:"input w-full h-24",placeholder:"What was happening?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"How did you use the skill?"}),e.jsx("textarea",{value:n.skill_used,onChange:e=>i({...n,skill_used:e.target.value}),className:"input w-full h-32",placeholder:"Describe how you applied this DBT skill..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Effectiveness (1-10)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"1",max:"10",value:n.effectiveness,onChange:e=>i({...n,effectiveness:parseInt(e.target.value)}),className:"flex-1"}),e.jsx("span",{className:"text-2xl font-bold w-12 text-center",children:n.effectiveness})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Additional Notes"}),e.jsx("textarea",{value:n.notes,onChange:e=>i({...n,notes:e.target.value}),className:"input w-full h-24",placeholder:"Any other observations..."})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-surface border-t border-border p-6",children:e.jsx("button",{onClick:async()=>{if(l);else{const e=JSON.parse(localStorage.getItem("safespace_dbt_skills")||"[]");e.push({...n,id:Date.now(),created_at:(new Date).toISOString()}),localStorage.setItem("safespace_dbt_skills",JSON.stringify(e))}t()},className:"btn-primary w-full",children:"Save Practice Log"})})]})})}const M=[{id:"meditation",name:"Guided Meditation",duration:10,description:"Focus on breath and body awareness"},{id:"body_scan",name:"Body Scan",duration:15,description:"Progressive relaxation through body"},{id:"mindful_breathing",name:"Mindful Breathing",duration:5,description:"Simple breath awareness"},{id:"loving_kindness",name:"Loving Kindness",duration:12,description:"Cultivate compassion and kindness"}];function F({onClose:t}){const{user:l}=a(),[n,i]=s.useState(null),[o,c]=s.useState(!1),[d,u]=s.useState(0),[p,g]=s.useState({mood_before:3,mood_after:3,notes:""}),b=async()=>{const e={exercise_type:n.id,duration:n.duration,mood_before:p.mood_before,mood_after:p.mood_after,notes:p.notes};if(l);else{const s=JSON.parse(localStorage.getItem("safespace_mindfulness_sessions")||"[]");s.push({...e,id:Date.now(),created_at:(new Date).toISOString()}),localStorage.setItem("safespace_mindfulness_sessions",JSON.stringify(s))}t()};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-lg w-full p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:n.name}),e.jsx("p",{className:"text-text-secondary",children:n.description})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"text-6xl font-bold mb-4",children:[Math.floor(d/60),":",(d%60).toString().padStart(2,"0")]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>c(!o),className:"btn-primary",children:o?e.jsx(m,{className:"w-5 h-5"}):e.jsx(x,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>u(60*n.duration),className:"btn-secondary",children:e.jsx(h,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mood Before (1-5)"}),e.jsx("input",{type:"range",min:"1",max:"5",value:p.mood_before,onChange:e=>g({...p,mood_before:parseInt(e.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mood After (1-5)"}),e.jsx("input",{type:"range",min:"1",max:"5",value:p.mood_after,onChange:e=>g({...p,mood_after:parseInt(e.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),e.jsx("textarea",{value:p.notes,onChange:e=>g({...p,notes:e.target.value}),className:"input w-full h-24",placeholder:"How was your experience?"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>i(null),className:"btn-secondary flex-1",children:"Back"}),e.jsx("button",{onClick:b,className:"btn-primary flex-1",children:"Complete"})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Mindfulness Exercises"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:M.map((s=>e.jsxs("button",{onClick:()=>(e=>{i(e),u(60*e.duration)})(s),className:"card p-6 text-left hover:scale-105 transition-transform",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s.name}),e.jsx("p",{className:"text-text-secondary text-sm mb-3",children:s.description}),e.jsxs("span",{className:"text-primary font-medium",children:[s.duration," minutes"]})]},s.id)))})]})})}const J=["Caffeine","Exercise","Stress","Screen Time","Alcohol","Late Meal","Nap"];function W({onClose:t}){const{user:l}=a(),[n,i]=s.useState({date:(new Date).toISOString().split("T")[0],bedtime:"22:00",wake_time:"06:00",sleep_quality:3,factors:[],notes:""}),o=()=>{const[e,s]=n.bedtime.split(":").map(Number),[t,a]=n.wake_time.split(":").map(Number);let l=t-e,i=a-s;return l<0&&(l+=24),i<0&&(l--,i+=60),(l+i/60).toFixed(1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Sleep Hygiene Tracker"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(S,{disclaimer:T.sleep}),e.jsx(I,{citations:A.sleep,title:"Sleep & Mental Health"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),e.jsx("input",{type:"date",value:n.date,onChange:e=>i({...n,date:e.target.value}),className:"input w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bedtime"}),e.jsx("input",{type:"time",value:n.bedtime,onChange:e=>i({...n,bedtime:e.target.value}),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wake Time"}),e.jsx("input",{type:"time",value:n.wake_time,onChange:e=>i({...n,wake_time:e.target.value}),className:"input w-full"})]})]}),e.jsxs("div",{className:"card p-4 bg-primary/10",children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Total Sleep Duration"}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:[o()," hours"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Sleep Quality (1-5)"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map((s=>e.jsx("button",{onClick:()=>i({...n,sleep_quality:s}),className:"flex-1 py-3 rounded-xl font-medium transition-colors "+(n.sleep_quality===s?"bg-primary text-white":"bg-hover text-text-secondary hover:bg-hover/80"),children:s},s)))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Factors Affecting Sleep"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:J.map((s=>e.jsx("button",{onClick:()=>(e=>{i((s=>({...s,factors:s.factors.includes(e)?s.factors.filter((s=>s!==e)):[...s.factors,e]})))})(s),className:"px-4 py-2 rounded-xl text-sm font-medium transition-colors "+(n.factors.includes(s)?"bg-primary text-white":"bg-hover text-text-secondary hover:bg-hover/80"),children:s},s)))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),e.jsx("textarea",{value:n.notes,onChange:e=>i({...n,notes:e.target.value}),className:"input w-full h-24",placeholder:"Any observations about your sleep..."})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-surface border-t border-border p-6",children:e.jsx("button",{onClick:async()=>{const e={...n,sleep_duration:parseFloat(o())};if(l);else{const s=JSON.parse(localStorage.getItem("safespace_sleep_logs")||"[]"),t=s.findIndex((e=>e.date===n.date));t>=0?s[t]={...e,id:s[t].id}:s.push({...e,id:Date.now()}),localStorage.setItem("safespace_sleep_logs",JSON.stringify(s))}t()},className:"btn-primary w-full",children:"Save Sleep Log"})})]})})}function q({onClose:t}){const{user:l}=a(),[n,i]=s.useState({warning_signs:[""],coping_strategies:[""],distractions:[""],support_contacts:[{name:"",phone:"",relationship:""}],professional_contacts:[{name:"",phone:"",type:""}],safe_environment:"",reasons_to_live:[""]});s.useEffect((()=>{const e=localStorage.getItem("safespace_crisis_plan");e&&i(JSON.parse(e))}),[]);const o=e=>{i((s=>({...s,[e]:[...s[e],e.includes("contact")?{name:"",phone:"",relationship:""}:""]})))},c=(e,s,t)=>{i((a=>({...a,[e]:a[e].map(((e,a)=>a===s?t:e))})))},m=(e,s)=>{i((t=>({...t,[e]:t[e].filter(((e,t)=>t!==s))})))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Crisis Safety Plan"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Your personalized emergency support plan"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"1. Warning Signs"}),n.warning_signs.map(((s,t)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{value:s,onChange:e=>c("warning_signs",t,e.target.value),className:"input flex-1",placeholder:"What tells you a crisis may be developing?"}),n.warning_signs.length>1&&e.jsx("button",{onClick:()=>m("warning_signs",t),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(u,{className:"w-4 h-4"})})]},t))),e.jsxs("button",{onClick:()=>o("warning_signs"),className:"btn-secondary text-sm mt-2",children:[e.jsx(d,{className:"w-4 h-4"})," Add Warning Sign"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"2. Internal Coping Strategies"}),n.coping_strategies.map(((s,t)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{value:s,onChange:e=>c("coping_strategies",t,e.target.value),className:"input flex-1",placeholder:"Things you can do without contacting anyone"}),n.coping_strategies.length>1&&e.jsx("button",{onClick:()=>m("coping_strategies",t),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(u,{className:"w-4 h-4"})})]},t))),e.jsxs("button",{onClick:()=>o("coping_strategies"),className:"btn-secondary text-sm mt-2",children:[e.jsx(d,{className:"w-4 h-4"})," Add Strategy"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"3. Support Contacts"}),n.support_contacts.map(((s,t)=>e.jsx("div",{className:"card p-4 mb-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{value:s.name,onChange:e=>c("support_contacts",t,{...s,name:e.target.value}),className:"input",placeholder:"Name"}),e.jsx("input",{value:s.phone,onChange:e=>c("support_contacts",t,{...s,phone:e.target.value}),className:"input",placeholder:"Phone"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:s.relationship,onChange:e=>c("support_contacts",t,{...s,relationship:e.target.value}),className:"input flex-1",placeholder:"Relationship"}),n.support_contacts.length>1&&e.jsx("button",{onClick:()=>m("support_contacts",t),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(u,{className:"w-4 h-4"})})]})]})},t))),e.jsxs("button",{onClick:()=>o("support_contacts"),className:"btn-secondary text-sm",children:[e.jsx(d,{className:"w-4 h-4"})," Add Contact"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"4. Professional Contacts"}),n.professional_contacts.map(((s,t)=>e.jsx("div",{className:"card p-4 mb-3",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{value:s.name,onChange:e=>c("professional_contacts",t,{...s,name:e.target.value}),className:"input",placeholder:"Name/Organization"}),e.jsx("input",{value:s.phone,onChange:e=>c("professional_contacts",t,{...s,phone:e.target.value}),className:"input",placeholder:"Phone"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:s.type,onChange:e=>c("professional_contacts",t,{...s,type:e.target.value}),className:"input flex-1",placeholder:"Type (therapist, hotline)"}),n.professional_contacts.length>1&&e.jsx("button",{onClick:()=>m("professional_contacts",t),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(u,{className:"w-4 h-4"})})]})]})},t))),e.jsxs("button",{onClick:()=>o("professional_contacts"),className:"btn-secondary text-sm",children:[e.jsx(d,{className:"w-4 h-4"})," Add Professional"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"5. Reasons for Living"}),n.reasons_to_live.map(((s,t)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{value:s,onChange:e=>c("reasons_to_live",t,e.target.value),className:"input flex-1",placeholder:"What makes life worth living?"}),n.reasons_to_live.length>1&&e.jsx("button",{onClick:()=>m("reasons_to_live",t),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(u,{className:"w-4 h-4"})})]},t))),e.jsxs("button",{onClick:()=>o("reasons_to_live"),className:"btn-secondary text-sm mt-2",children:[e.jsx(d,{className:"w-4 h-4"})," Add Reason"]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-surface border-t border-border p-6",children:e.jsx("button",{onClick:async()=>{l||localStorage.setItem("safespace_crisis_plan",JSON.stringify(n)),t()},className:"btn-primary w-full",children:"Save Safety Plan"})})]})})}const L={phq9:{name:"PHQ-9 (Depression)",questions:["Little interest or pleasure in doing things","Feeling down, depressed, or hopeless","Trouble falling/staying asleep, or sleeping too much","Feeling tired or having little energy","Poor appetite or overeating","Feeling bad about yourself or that you are a failure","Trouble concentrating on things","Moving or speaking slowly, or being fidgety/restless","Thoughts that you would be better off dead or hurting yourself"],options:["Not at all","Several days","More than half the days","Nearly every day"],severity:[{max:4,level:"minimal",color:"green"},{max:9,level:"mild",color:"yellow"},{max:14,level:"moderate",color:"orange"},{max:19,level:"moderately severe",color:"red"},{max:27,level:"severe",color:"red"}]},gad7:{name:"GAD-7 (Anxiety)",questions:["Feeling nervous, anxious, or on edge","Not being able to stop or control worrying","Worrying too much about different things","Trouble relaxing","Being so restless that it's hard to sit still","Becoming easily annoyed or irritable","Feeling afraid as if something awful might happen"],options:["Not at all","Several days","More than half the days","Nearly every day"],severity:[{max:4,level:"minimal",color:"green"},{max:9,level:"mild",color:"yellow"},{max:14,level:"moderate",color:"orange"},{max:21,level:"severe",color:"red"}]}};function H({onClose:t}){const{user:l}=a(),[i,o]=s.useState(null),[c,d]=s.useState([]),[m,x]=s.useState(null),h=()=>{const e=c.reduce(((e,s)=>e+(s||0)),0),s=L[i].severity.find((s=>e<=s.max));x({total:e,severity:s.level,color:s.color})},u=async()=>{const e={assessment_type:i,responses:c,total_score:m.total,severity_level:m.severity};if(l);else{const s=JSON.parse(localStorage.getItem("safespace_assessments")||"[]");s.push({...e,id:Date.now(),created_at:(new Date).toISOString()}),localStorage.setItem("safespace_assessments",JSON.stringify(s))}t()};if(m)return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-lg w-full p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`w-20 h-20 rounded-full bg-${m.color}-500/20 flex items-center justify-center mx-auto mb-4`,children:e.jsx("span",{className:"text-4xl font-bold",children:m.total})}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Assessment Complete"}),e.jsxs("p",{className:"text-text-secondary capitalize",children:["Severity: ",m.severity]})]}),e.jsx("div",{className:"card p-4 bg-yellow-500/10 border border-yellow-500/20 mb-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important Note"}),e.jsx("p",{className:"text-text-secondary",children:"This is a screening tool, not a diagnosis. Please consult a mental health professional for proper evaluation."})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(null),className:"btn-secondary flex-1",children:"Retake"}),e.jsx("button",{onClick:u,className:"btn-primary flex-1",children:"Save Results"})]})]})});if(i){const s=L[i],t=c.every((e=>null!==e));return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:s.name}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Over the last 2 weeks, how often have you been bothered by:"})]}),e.jsx("button",{onClick:()=>o(null),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 space-y-6",children:s.questions.map(((t,a)=>e.jsxs("div",{className:"card p-4",children:[e.jsxs("p",{className:"font-medium mb-3",children:[a+1,". ",t]}),e.jsx("div",{className:"space-y-2",children:s.options.map(((s,t)=>e.jsx("button",{onClick:()=>{const e=[...c];e[a]=t,d(e)},className:"w-full p-3 rounded-lg text-left transition-colors "+(c[a]===t?"bg-primary text-white":"bg-hover hover:bg-hover/80"),children:s},t)))})]},a)))}),e.jsx("div",{className:"sticky bottom-0 bg-surface border-t border-border p-6",children:e.jsx("button",{onClick:h,disabled:!t,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:"Calculate Score"})})]})})}return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Mental Health Assessments"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"Validated screening tools for self-assessment"})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(E,{type:"assessment"}),e.jsx("div",{className:"card p-4 bg-red-50 border border-red-200 mb-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(n,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"Crisis Support Available 24/7"}),e.jsx("p",{className:"text-gray-700 mb-2",children:"If you're having thoughts of self-harm or suicide, please call 988 immediately."}),e.jsx("a",{href:"tel:988",className:"text-red-600 hover:text-red-700 font-medium",children:"Call 988 - Suicide & Crisis Lifeline"})]})]})}),e.jsx("div",{className:"space-y-4",children:Object.entries(L).map((([s,t])=>e.jsx("button",{onClick:()=>{return o(e=s),d(new Array(L[e].questions.length).fill(null)),void x(null);var e},className:"card p-6 w-full text-left hover:shadow-lg hover:-translate-y-1 transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.name}),e.jsxs("p",{className:"text-text-secondary text-sm mb-3",children:[t.questions.length," questions • 2-3 minutes"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[e.jsx(g,{size:14}),e.jsx("span",{children:"Clinically validated screening tool"})]})]}),e.jsx("div",{className:"text-primary text-2xl",children:"→"})]})},s)))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Remember:"})," These assessments are screening tools only. For diagnosis and treatment, please consult with a licensed mental health professional."]})})]})]})})}const $=[{id:"cbt",name:"CBT Thought Record",icon:b,gradient:"from-blue-500 to-cyan-500",description:"Challenge negative thought patterns",category:"Cognitive",premium:!1},{id:"dbt",name:"DBT Skills",icon:f,gradient:"from-pink-500 to-rose-500",description:"Practice dialectical behavior therapy",category:"Behavioral",premium:!0},{id:"mindfulness",name:"Mindfulness",icon:j,gradient:"from-purple-500 to-indigo-500",description:"Guided meditation exercises",category:"Mindfulness",premium:!1},{id:"sleep",name:"Sleep Tracker",icon:v,gradient:"from-indigo-500 to-blue-500",description:"Monitor sleep patterns",category:"Wellness",premium:!0},{id:"crisis",name:"Crisis Plan",icon:g,gradient:"from-red-500 to-orange-500",description:"Emergency safety planning",category:"Safety",premium:!1},{id:"assessments",name:"Assessments",icon:N,gradient:"from-green-500 to-emerald-500",description:"Mental health screening tools",category:"Assessment",premium:!1}];function G(){const a=t(),[l,n]=s.useState(null),[i,r]=s.useState({}),{isPremium:o}=P();s.useEffect((()=>{const e=JSON.parse(localStorage.getItem("safespace_tool_usage")||"{}");r(e)}),[]);if(l)return(()=>{switch(l){case"cbt":return e.jsx(z,{onClose:()=>n(null)});case"dbt":return e.jsx(B,{onClose:()=>n(null)});case"mindfulness":return e.jsx(F,{onClose:()=>n(null)});case"sleep":return e.jsx(W,{onClose:()=>n(null)});case"crisis":return e.jsx(q,{onClose:()=>n(null)});case"assessments":return e.jsx(H,{onClose:()=>n(null)});default:return null}})();const c=Object.values(i).reduce(((e,s)=>e+s),0),d=$.find((e=>e.id===Object.keys(i).sort(((e,s)=>(i[s]||0)-(i[e]||0)))[0]));return e.jsx(O,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 p-8 mb-6 shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute -top-24 -right-24 w-64 h-64 bg-white/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(y,{className:"w-10 h-10 text-white"}),e.jsx("h1",{className:"text-4xl font-bold text-white drop-shadow-lg",children:"Therapeutic Tools"}),o&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-sm font-medium text-white",children:[e.jsx(w,{size:16}),"Premium"]})]}),e.jsx("p",{className:"text-white/90 text-lg mb-4",children:"Evidence-based tools to support your mental wellness journey"}),c>0&&e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(k,{size:16}),e.jsxs("span",{className:"text-sm font-medium",children:[c," sessions"]})]})}),d&&e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(_,{size:16}),e.jsxs("span",{className:"text-sm font-medium",children:["Most used: ",d.name]})]})})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(S,{disclaimer:T.therapeutic,collapsible:!1})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx(I,{citations:A.cbt,title:"CBT Research"}),e.jsx(I,{citations:A.dbt,title:"DBT Research"}),e.jsx(I,{citations:A.mindfulness,title:"Mindfulness Research"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map((s=>{const t=s.icon,l=i[s.id]||0;return e.jsxs("button",{onClick:()=>(e=>{if(e.premium&&!o)return void a("/premium");const s=JSON.parse(localStorage.getItem("safespace_tool_usage")||"{}");s[e.id]=(s[e.id]||0)+1,localStorage.setItem("safespace_tool_usage",JSON.stringify(s)),r(s),n(e.id)})(s),className:"card p-6 text-left hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 group relative overflow-hidden "+(s.premium&&!o?"opacity-70":""),children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s.gradient} opacity-0 group-hover:opacity-5 transition-opacity`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${s.gradient} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform shadow-lg`,children:e.jsx(t,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-600 text-xs font-medium rounded-full",children:s.category}),s.premium&&!o&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-700 text-xs font-medium rounded-full",children:[e.jsx(w,{size:10}),"Premium"]})]}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-text-primary group-hover:text-primary transition-colors",children:s.name}),e.jsx("p",{className:"text-text-secondary text-sm mb-4",children:s.description}),l>0&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[e.jsx(C,{size:14}),e.jsxs("span",{children:["Used ",l," time",1!==l?"s":""]})]})]})]},s.id)}))}),e.jsx("div",{className:"mt-8",children:e.jsx(D,{})})]})})}export{G as default};
