import{j as e}from"./index-C2hV942_.js";import{r as s}from"./react-vendor-B4gIioy9.js";import{R as t,B as a,C as l,X as r,Y as i,T as n,b as c,L as o,c as d}from"./charts-BTXtbyhr.js";import{N as m,T as x,v as h,k as p,S as u,E as j,ax as g,w as b,I as f}from"./icons-Cn7BKMG2.js";import{S as N}from"./SafeComponent-Bl7I87cI.js";import{P as y}from"./PremiumPaywall-WAlq_sCS.js";import{g as v}from"./premiumUtils-Ccr3qdNt.js";function w(){const[o,d]=s.useState([]),[h,p]=s.useState("all");s.useEffect((()=>{const e=JSON.parse(localStorage.getItem("safespace_moods")||"{}"),s=Object.values(e),t={};s.forEach((e=>{e.tags&&e.tags.forEach((s=>{const a=`${s}_${e.mood}`;t[a]||(t[a]={tag:s,mood:e.mood,count:0}),t[a].count++}))}));const a=Object.values(t).filter((e=>"all"===h||e.mood===parseInt(h))).sort(((e,s)=>s.count-e.count)).slice(0,10);d(a)}),[h]);const u=["ðŸ˜¢","ðŸ˜•","ðŸ˜","ðŸ™‚","ðŸ˜Š"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-surface rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Tag Frequency Analysis"}),e.jsxs("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 bg-background border border-gray-200 rounded-xl text-sm",children:[e.jsx("option",{value:"all",children:"All Moods"}),[1,2,3,4,5].map((s=>e.jsxs("option",{value:s,children:[u[s-1]," Mood ",s]},s)))]})]}),o.length>0?e.jsx(t,{width:"100%",height:300,children:e.jsxs(a,{data:o,children:[e.jsx(l,{strokeDasharray:"3 3"}),e.jsx(r,{dataKey:"tag"}),e.jsx(i,{}),e.jsx(n,{}),e.jsx(c,{dataKey:"count",fill:"#8b5cf6"})]})}):e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx(m,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No tag data available"})]})]}),e.jsxs("div",{className:"bg-surface rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Top Tags"}),e.jsx("div",{className:"space-y-2",children:o.slice(0,5).map(((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-background rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:u[s.mood-1]}),e.jsx("span",{className:"font-medium text-text-primary",children:s.tag})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-text-secondary",children:[s.count," times"]}),e.jsx(x,{size:16,className:"text-green-500"})]})]},t)))})]})]})}function S(){const[a,c]=s.useState([]),[m,u]=s.useState({avgQuality:0,avgHours:0,sleepDebt:0});return s.useEffect((()=>{const e=JSON.parse(localStorage.getItem("safespace_sleep_logs")||"[]").slice(-30),s=e.map((e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),quality:e.quality,hours:e.hours}))),t=e.reduce(((e,s)=>e+s.quality),0)/e.length||0,a=e.reduce(((e,s)=>e+s.hours),0)/e.length||0,l=Math.max(0,30*(8-a));c(s),u({avgQuality:t.toFixed(1),avgHours:a.toFixed(1),sleepDebt:l.toFixed(1)})}),[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"bg-surface rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(h,{className:"text-primary",size:24}),e.jsx("h3",{className:"font-semibold text-text-primary",children:"Avg Quality"})]}),e.jsxs("p",{className:"text-3xl font-bold text-text-primary",children:[m.avgQuality,"/5"]})]}),e.jsxs("div",{className:"bg-surface rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(p,{className:"text-primary",size:24}),e.jsx("h3",{className:"font-semibold text-text-primary",children:"Avg Hours"})]}),e.jsxs("p",{className:"text-3xl font-bold text-text-primary",children:[m.avgHours,"h"]})]}),e.jsxs("div",{className:"bg-surface rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(x,{className:"text-orange-500",size:24}),e.jsx("h3",{className:"font-semibold text-text-primary",children:"Sleep Debt"})]}),e.jsxs("p",{className:"text-3xl font-bold text-text-primary",children:[m.sleepDebt,"h"]})]})]}),e.jsxs("div",{className:"bg-surface rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Sleep Quality Trend"}),a.length>0?e.jsx(t,{width:"100%",height:300,children:e.jsxs(o,{data:a,children:[e.jsx(l,{strokeDasharray:"3 3"}),e.jsx(r,{dataKey:"date"}),e.jsx(i,{domain:[0,5]}),e.jsx(n,{}),e.jsx(d,{type:"monotone",dataKey:"quality",stroke:"#8b5cf6",strokeWidth:2})]})}):e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx(h,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No sleep data available"})]})]}),e.jsxs("div",{className:"bg-surface rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Recommendations"}),e.jsxs("div",{className:"space-y-3",children:[m.avgHours<7&&e.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-xl",children:e.jsxs("p",{className:"text-sm text-orange-800",children:["ðŸ’¤ You're averaging ",m.avgHours," hours. Aim for 7-9 hours for optimal health."]})}),m.avgQuality<3&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-blue-800",children:"ðŸŒ™ Your sleep quality is below average. Try establishing a bedtime routine."})}),m.sleepDebt>10&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-sm text-red-800",children:"âš ï¸ High sleep debt detected. Prioritize rest this week."})})]})]})]})}function k(){const[t,a]=s.useState([]),[l]=s.useState(!1);s.useEffect((()=>{if(!l)return;const e=JSON.parse(localStorage.getItem("safespace_moods")||"{}"),s=Object.values(e).sort(((e,s)=>new Date(e.date)-new Date(s.date)));if(s.length<7)return;const t=s.slice(-7),r=t.reduce(((e,s)=>e+s.mood),0)/7,i=t[6].mood-t[0].mood,n=[];for(let a=1;a<=7;a++){const e=new Date;e.setDate(e.getDate()+a);const s=Math.max(1,Math.min(5,Math.round(r+.3*i))),t=Math.max(60,100-5*a);n.push({date:e.toLocaleDateString("en-US",{month:"short",day:"numeric"}),mood:s,confidence:t})}a(n)}),[l]);const r=["ðŸ˜¢","ðŸ˜•","ðŸ˜","ðŸ™‚","ðŸ˜Š"];return l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-surface rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"7-Day Mood Forecast"}),e.jsx("div",{className:"space-y-3",children:t.map(((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-background rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:r[s.mood-1]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-text-primary",children:s.date}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Predicted Mood: ",s.mood,"/5"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-text-primary",children:[s.confidence,"%"]}),e.jsx("p",{className:"text-xs text-text-secondary",children:"Confidence"})]})]},t)))})]}),t.some((e=>e.mood<=2))&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(j,{className:"text-orange-600 flex-shrink-0",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-orange-900 mb-2",children:"Low Mood Alert"}),e.jsx("p",{className:"text-sm text-orange-800 mb-3",children:"Our AI predicts potential low mood periods ahead. Consider these preventive actions:"}),e.jsxs("ul",{className:"text-sm text-orange-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Schedule time with supportive friends"}),e.jsx("li",{children:"â€¢ Plan enjoyable activities"}),e.jsx("li",{children:"â€¢ Ensure adequate sleep"}),e.jsx("li",{children:"â€¢ Practice self-care routines"})]})]})]})})]}):e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl p-8 text-white text-center",children:[e.jsx(u,{size:48,className:"mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Mood Prediction AI"}),e.jsx("p",{className:"mb-6 opacity-90",children:"Unlock AI-powered mood forecasting with Premium"}),e.jsxs("ul",{className:"text-left max-w-md mx-auto mb-6 space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âœ“"})," 7-day mood predictions"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âœ“"})," Risk alerts for low mood periods"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âœ“"})," Preventive suggestions"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âœ“"})," Confidence scores"]})]}),e.jsx("a",{href:"/premium",className:"inline-block px-6 py-3 bg-white text-purple-600 rounded-xl font-medium hover:bg-gray-100",children:"Upgrade to Premium"})]})}function D(){const[t,a]=s.useState("tags"),{isPremium:l}=v(),r=[{id:"tags",label:"Tag Analytics",icon:m},{id:"sleep",label:"Sleep Patterns",icon:h},{id:"prediction",label:"Mood Prediction",icon:g,premium:!0}],i=(()=>{switch(t){case"tags":return{title:"Understanding Mood Tags",content:"Research shows that identifying specific emotions (emotional granularity) helps regulate them better. Studies by Dr. Lisa Feldman Barrett found that people who can precisely label their emotions have better mental health outcomes.",source:"Barrett, L. F. (2017). How Emotions Are Made"};case"sleep":return{title:"Sleep & Mental Health Connection",content:"Sleep and mood are bidirectionally related. Poor sleep can worsen mental health, while mental health issues can disrupt sleep. The CDC recommends 7-9 hours of sleep for adults for optimal mental and physical health.",source:"Walker, M. (2017). Why We Sleep"};case"prediction":return{title:"Predictive Analytics in Mental Health",content:"Machine learning can identify patterns in mood data, but predictions are probabilistic, not deterministic. These insights should inform self-awareness, not replace clinical judgment or professional assessment.",source:"Torous et al. (2020). Digital Mental Health"};default:return null}})();return e.jsx(N,{children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 pb-24",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-8 mb-6 shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute -top-24 -right-24 w-64 h-64 bg-white/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(g,{className:"w-10 h-10 text-white"}),e.jsx("h1",{className:"text-4xl font-bold text-white drop-shadow-lg",children:"Advanced Analytics"})]}),e.jsx("p",{className:"text-white/90 text-lg",children:"Research-backed insights into your mental health patterns"})]})]}),e.jsx("div",{className:"card p-4 bg-yellow-50 border border-yellow-200 mb-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"Analytics Disclaimer"}),e.jsx("p",{className:"text-gray-700",children:"These analytics use statistical methods to identify patterns in your data. They are educational tools for self-reflection, not diagnostic instruments. Correlation does not imply causation. For clinical assessment, consult a mental health professional."})]})]})}),e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:r.map((s=>{const l=s.icon;return e.jsxs("button",{onClick:()=>a(s.id),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap transition-colors "+(t===s.id?"bg-primary text-white":"bg-surface text-text-secondary hover:text-text-primary"),children:[e.jsx(l,{size:18}),s.label,s.premium&&e.jsx("span",{className:"text-xs",children:"ðŸ’Ž"})]},s.id)}))}),i&&e.jsx("div",{className:"card p-4 bg-blue-50 border border-blue-200 mb-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(b,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:i.title}),e.jsx("p",{className:"text-gray-700 mb-2",children:i.content}),e.jsxs("p",{className:"text-xs text-gray-500 italic",children:["Source: ",i.source]})]})]})}),e.jsxs("div",{children:["tags"===t&&e.jsx(w,{}),"sleep"===t&&e.jsx(S,{}),"prediction"===t&&e.jsx(y,{feature:"Mood Prediction AI",description:"Unlock AI-powered mood forecasting and predictive insights with Premium. Get personalized alerts before mood dips.",children:e.jsx(k,{})})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("div",{className:"card p-4 bg-purple-50 border border-purple-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"How to Use These Insights"}),e.jsxs("ul",{className:"text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Look for patterns over time, not single data points"}),e.jsx("li",{children:"â€¢ Consider external factors (stress, life events, seasons)"}),e.jsx("li",{children:"â€¢ Use insights to inform conversations with your therapist"}),e.jsx("li",{children:"â€¢ Remember: self-tracking is a tool, not a solution"})]})]})]})}),e.jsx("div",{className:"card p-4 bg-green-50 border border-green-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(b,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"Evidence-Based Practices"}),e.jsx("p",{className:"text-gray-700",children:"The analytics methods used here are based on research in affective science, sleep medicine, and computational psychiatry. However, individual experiences vary, and these tools should complement, not replace, professional mental health care."})]})]})})]})]})})}export{D as default};
