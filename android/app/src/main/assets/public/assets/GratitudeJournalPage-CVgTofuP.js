import{j as e}from"./index-Duv89VAf.js";import{r as s,u as t}from"./react-vendor-B4gIioy9.js";import{u as a}from"./useAuth-BgjoR0ce.js";import{X as r,r as l,P as i,u as n,an as c,a as d,D as o,x as m,S as x,T as h,I as u}from"./icons-DVxOjm_j.js";import{R as j,B as p,X as g,Y as f,T as b,b as N}from"./charts-BTXtbyhr.js";import{S as v}from"./SafeComponent-DdckI7LM.js";import{g as y}from"./premiumUtils-Ccr3qdNt.js";import{D as w,d as S}from"./disclaimers-vV8DlMF2.js";import{R as k,r as D}from"./ResearchCard-C85HT-rf.js";import{C}from"./CrisisResources-B9wVHjNH.js";function _({entry:t,onClose:a,onSave:n}){const[c,d]=s.useState({date:(new Date).toISOString().split("T")[0],items:["","",""],mood_rating:3,notes:""});s.useEffect((()=>{t&&d(t)}),[t]);return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Gratitude Entry"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),e.jsx("input",{type:"date",value:c.date,onChange:e=>d({...c,date:e.target.value}),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"What are you grateful for?"}),c.items.map(((s,t)=>e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl mt-1",children:"âœ¨"}),e.jsx("input",{value:s,onChange:e=>((e,s)=>{const t=[...c.items];t[e]=s,d({...c,items:t})})(t,e.target.value),className:"input flex-1",placeholder:`Gratitude #${t+1}`}),c.items.length>1&&e.jsx("button",{onClick:()=>{return e=t,void(c.items.length>1&&d({...c,items:c.items.filter(((s,t)=>t!==e))}));var e},className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(l,{className:"w-4 h-4"})})]},t))),c.items.length<5&&e.jsxs("button",{onClick:()=>{c.items.length<5&&d({...c,items:[...c.items,""]})},className:"btn-secondary text-sm w-full",children:[e.jsx(i,{className:"w-4 h-4"})," Add Another"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"How do you feel? (1-5)"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map((s=>e.jsx("button",{onClick:()=>d({...c,mood_rating:s}),className:"flex-1 py-3 rounded-xl font-medium transition-colors "+(c.mood_rating===s?"bg-primary text-white":"bg-hover text-text-secondary hover:bg-hover/80"),children:["ðŸ˜”","ðŸ˜•","ðŸ˜Š","ðŸ˜„","ðŸ¤©"][s-1]},s)))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:c.notes,onChange:e=>d({...c,notes:e.target.value}),className:"input w-full h-24",placeholder:"Any reflections or thoughts..."})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-surface border-t border-border p-6",children:e.jsx("button",{onClick:()=>{const e=c.items.filter((e=>e.trim()));if(0===e.length)return alert("Add at least one gratitude item");n({...c,items:e,id:t?.id||Date.now()})},className:"btn-primary w-full",children:"Save Entry"})})]})})}function E({entry:s,onEdit:t,onDelete:a}){return e.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-sm",children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{children:(r=s.date,new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),e.jsx("span",{className:"text-2xl ml-2",children:["ðŸ˜”","ðŸ˜•","ðŸ˜Š","ðŸ˜„","ðŸ¤©"][s.mood_rating-1]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t(s),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(c,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(s.date),className:"p-2 hover:bg-hover rounded-lg text-red-500",children:e.jsx(l,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:s.items.map(((s,t)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:"âœ¨"}),e.jsx("p",{className:"text-text-primary flex-1",children:s})]},t)))}),s.notes&&e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx("p",{className:"text-text-secondary text-sm italic",children:s.notes})})]});var r}function I({entries:s}){if(0===s.length)return null;const t=[...Array(7)].map(((e,s)=>{const t=new Date;return t.setDate(t.getDate()-s),t.toISOString().split("T")[0]})).reverse().map((e=>{const t=s.find((s=>s.date===e));return{date:new Date(e).toLocaleDateString("en-US",{weekday:"short"}),mood:t?.mood_rating||0}})),a=s.length>0?(s.reduce(((e,s)=>e+s.mood_rating),0)/s.length).toFixed(1):0;return e.jsxs("div",{className:"card p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Weekly Mood Trend"}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-text-secondary text-sm",children:["Average Mood: ",e.jsxs("span",{className:"text-primary font-bold text-lg",children:[a,"/5"]})]})}),e.jsx(j,{width:"100%",height:200,children:e.jsxs(p,{data:t,children:[e.jsx(g,{dataKey:"date",stroke:"#888"}),e.jsx(f,{domain:[0,5],stroke:"#888"}),e.jsx(b,{}),e.jsx(N,{dataKey:"mood",fill:"#8b5cf6",radius:[8,8,0,0]})]})})]})}function O(){const{user:r}=a(),l=t(),[c,j]=s.useState([]),[p,g]=s.useState(!1),[f,b]=s.useState(null),[N,O]=s.useState(0),{isPremium:T}=y();s.useEffect((()=>{A()}),[r]);const A=()=>{const e=localStorage.getItem("safespace_gratitude_entries");if(e){const s=JSON.parse(e);j(s),R(s)}},R=e=>{if(!e.length)return O(0);const s=[...e].sort(((e,s)=>new Date(s.date)-new Date(e.date)));let t=0,a=new Date;a.setHours(0,0,0,0);for(const r of s){const e=new Date(r.date);e.setHours(0,0,0,0);if(Math.floor((a-e)/864e5)!==t)break;t++,a.setDate(a.getDate()-1)}O(t)},J=()=>{!T&&c.length>=10&&!U?l("/premium"):g(!0)},M=e=>{b(e),g(!0)},G=e=>{const s=JSON.parse(localStorage.getItem("safespace_gratitude_entries")||"[]").filter((s=>s.date!==e));localStorage.setItem("safespace_gratitude_entries",JSON.stringify(s)),A()},U=c.find((e=>e.date===(new Date).toISOString().split("T")[0]));return e.jsx(v,{children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(w,{disclaimer:S.gratitude})}),e.jsx("div",{className:"mb-6",children:e.jsx(k,{citations:D.gratitude,title:"Why Gratitude Works"})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"w-8 h-8 text-pink-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Gratitude Journal"}),e.jsx("p",{className:"text-text-secondary",children:"What are you grateful for today?"})]})]}),e.jsxs("button",{onClick:J,className:"btn-primary",children:[e.jsx(i,{className:"w-5 h-5"})," ",U?"Edit Today":"Add Entry"]})]}),!T&&c.length>=10&&e.jsx("div",{className:"card p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border border-orange-200 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Free Limit Reached"}),e.jsxs("p",{className:"text-gray-700",children:["You've reached ",10," entries. Upgrade to Premium for unlimited gratitude journaling."]})]})]}),e.jsxs("button",{onClick:()=>l("/premium"),className:"px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-xl font-medium hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx(m,{size:16}),"Upgrade"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(x,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-text-secondary",children:"Current Streak"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:[N," days"]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(n,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-text-secondary",children:"Total Entries"})]}),e.jsx("p",{className:"text-3xl font-bold",children:c.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(h,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-text-secondary",children:"This Month"})]}),e.jsx("p",{className:"text-3xl font-bold",children:c.filter((e=>new Date(e.date).getMonth()===(new Date).getMonth())).length})]})]}),e.jsx(I,{entries:c})]}),e.jsx("div",{className:"space-y-4",children:0===c.length?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(d,{className:"w-16 h-16 text-text-secondary mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Start Your Gratitude Journey"}),e.jsx("p",{className:"text-text-secondary mb-4",children:"Research shows that practicing gratitude can improve mental health and overall well-being."}),e.jsxs("div",{className:"max-w-md mx-auto mb-6 text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Daily gratitude practice can help you:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Increase positive emotions and life satisfaction"}),e.jsx("li",{children:"â€¢ Reduce stress and improve sleep quality"}),e.jsx("li",{children:"â€¢ Strengthen relationships and social connections"}),e.jsx("li",{children:"â€¢ Build resilience during challenging times"})]})]}),e.jsxs("button",{onClick:J,className:"btn-primary",children:[e.jsx(i,{className:"w-5 h-5"})," Create First Entry"]})]}):c.map((s=>e.jsx(E,{entry:s,onEdit:M,onDelete:G},s.date)))}),p&&e.jsx(_,{entry:f,onClose:()=>{g(!1),b(null)},onSave:e=>{const s=JSON.parse(localStorage.getItem("safespace_gratitude_entries")||"[]"),t=s.findIndex((s=>s.date===e.date));!T&&t<0&&s.length>=10||(t>=0?s[t]=e:s.unshift(e),localStorage.setItem("safespace_gratitude_entries",JSON.stringify(s)),A(),g(!1),b(null))}}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("div",{className:"card p-4 bg-blue-50 border border-blue-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"Optimal Practice Guidelines"}),e.jsxs("ul",{className:"text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Write 3-5 entries per session (Emmons & McCullough, 2003)"}),e.jsx("li",{children:"â€¢ Practice in the evening for better sleep quality"}),e.jsx("li",{children:"â€¢ Be specific - focus on details and people"}),e.jsx("li",{children:"â€¢ Reflect on surprises or unexpected positive moments"}),e.jsx("li",{children:"â€¢ Vary your entries to prevent habituation"})]})]})]})}),e.jsx(C,{compact:!0})]})]})})}export{O as default};
