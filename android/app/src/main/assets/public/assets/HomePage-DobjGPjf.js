import{c as e,j as t,a as s,u as a}from"./index-C2hV942_.js";import{r,u as l,L as o}from"./react-vendor-B4gIioy9.js";import{a as i,c as n,P as c}from"./badgeSystem-B5B5Dmxk.js";import{P as d,o as m,p as x,X as g,q as h,r as u,s as p,t as b,T as y,u as j,Z as f,S as N,M as v,v as w,w as k,B as S,U as D,a as T,l as C,x as O}from"./icons-Cn7BKMG2.js";import{R as I,A as M,C as L,X as z,Y as F,T as E,a as _}from"./charts-BTXtbyhr.js";import{S as J}from"./SafeComponent-Bl7I87cI.js";import{g as A,u as $,i as U,a as P}from"./personalizationEngine-5ackT6If.js";import{u as Y}from"./useHaptic-Cp-ndXlt.js";import{M as Q}from"./MicroInteraction-CSj6YPnO.js";import{g as q}from"./premiumUtils-Ccr3qdNt.js";const G=new class{constructor(){this.queue=this.loadQueue(),this.isOnline=navigator.onLine,window.addEventListener("online",(()=>{this.isOnline=!0,this.processQueue()})),window.addEventListener("offline",(()=>{this.isOnline=!1}))}loadQueue(){try{const e=localStorage.getItem("offline_queue");return e?JSON.parse(e):[]}catch{return[]}}saveQueue(){try{localStorage.setItem("offline_queue",JSON.stringify(this.queue))}catch(e){}}addAction(e){const t={id:Date.now()+Math.random(),action:e,timestamp:(new Date).toISOString(),retries:0};return this.queue.push(t),this.saveQueue(),this.isOnline&&this.processQueue(),t.id}async processQueue(){if(!this.isOnline||0===this.queue.length)return;const e=[...this.queue];for(const s of e)try{await this.executeAction(s.action),this.removeFromQueue(s.id)}catch(t){s.retries++,s.retries>=3&&this.removeFromQueue(s.id)}this.saveQueue()}async executeAction(e){switch(e.type){case"MOOD_LOG":return this.syncMoodLog(e.data);case"POST_CREATE":return this.syncPost(e.data);case"COMMENT_CREATE":return this.syncComment(e.data)}}async syncMoodLog(e){const t=JSON.parse(localStorage.getItem("safespace_moods")||"{}");t[e.date]=e,localStorage.setItem("safespace_moods",JSON.stringify(t))}async syncPost(e){const t=JSON.parse(localStorage.getItem("safespace_user_posts")||"[]");t.push(e),localStorage.setItem("safespace_user_posts",JSON.stringify(t))}async syncComment(e){}removeFromQueue(e){this.queue=this.queue.filter((t=>t.id!==e))}getQueueLength(){return this.queue.length}clearQueue(){this.queue=[],this.saveQueue()}},H=e("https://jzxbovqisripvsxvmkbb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6eGJvdnFpc3JpcHZzeHZta2JiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTc4ODksImV4cCI6MjA3NTA3Mzg4OX0.kH6hEyXL4xPPo6Xm8oU0WLsuc3W9VzJtPpVxalRVY1s");function W(){const[e,t]=r.useState({}),[s,a]=r.useState(!0);r.useEffect((()=>{l()}),[]);const l=async()=>{const{data:{user:e}}=await H.auth.getUser();if(!e){const e=JSON.parse(localStorage.getItem("safespace_moods")||"{}");return t(e),void a(!1)}const{data:s,error:r}=await H.from("moods").select("*").eq("user_id",e.id).order("date",{ascending:!1});if(!r&&s){const e=s.reduce(((e,t)=>(e[t.date]=t,e)),{});t(e)}a(!1)};return{moods:e,loading:s,saveMood:async(s,a)=>{const{data:{user:r}}=await H.auth.getUser();if(!r){const r={...e,[s]:a};return localStorage.setItem("safespace_moods",JSON.stringify(r)),t(r),{success:!0}}const{error:l}=await H.from("moods").upsert([{user_id:r.id,date:s,...a}]);return l?{success:!1,error:l}:(t({...e,[s]:a}),{success:!0})},refreshMoods:l}}const R=[{id:"work",label:"Work",color:"blue",category:"productivity"},{id:"productive",label:"Productive",color:"green",category:"productivity"},{id:"stressed",label:"Stressed",color:"red",category:"productivity"},{id:"exercise",label:"Exercise",color:"emerald",category:"health"},{id:"sleep",label:"Sleep",color:"indigo",category:"health"},{id:"tired",label:"Tired",color:"gray",category:"health"},{id:"energetic",label:"Energetic",color:"yellow",category:"health"},{id:"social",label:"Social",color:"pink",category:"social"},{id:"family",label:"Family",color:"rose",category:"social"},{id:"friends",label:"Friends",color:"purple",category:"social"},{id:"lonely",label:"Lonely",color:"slate",category:"social"},{id:"anxious",label:"Anxious",color:"orange",category:"mental"},{id:"calm",label:"Calm",color:"teal",category:"mental"},{id:"motivated",label:"Motivated",color:"lime",category:"mental"},{id:"overwhelmed",label:"Overwhelmed",color:"red",category:"mental"},{id:"meditation",label:"Meditation",color:"violet",category:"activity"},{id:"therapy",label:"Therapy",color:"cyan",category:"activity"},{id:"hobby",label:"Hobby",color:"amber",category:"activity"}],B={blue:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",green:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",red:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300",emerald:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300",indigo:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-300",gray:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",yellow:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300",pink:"bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300",rose:"bg-rose-100 text-rose-700 dark:bg-rose-900 dark:text-rose-300",purple:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",slate:"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",orange:"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300",teal:"bg-teal-100 text-teal-700 dark:bg-teal-900 dark:text-teal-300",lime:"bg-lime-100 text-lime-700 dark:bg-lime-900 dark:text-lime-300",violet:"bg-violet-100 text-violet-700 dark:bg-violet-900 dark:text-violet-300",cyan:"bg-cyan-100 text-cyan-700 dark:bg-cyan-900 dark:text-cyan-300",amber:"bg-amber-100 text-amber-700 dark:bg-amber-900 dark:text-amber-300"},X={productivity:{label:"Work & Productivity",icon:"üíº"},health:{label:"Physical Health",icon:"üí™"},social:{label:"Social & Relationships",icon:"üë•"},mental:{label:"Mental & Emotional",icon:"üß†"},activity:{label:"Activities",icon:"üéØ"}};function V({selectedTags:e=[],onChange:s,maxTags:a=5}){const{tags:l,createTag:o}=function(){const[e,t]=r.useState([]),[s,a]=r.useState(!0);r.useEffect((()=>{l()}),[]);const l=()=>{try{const e=JSON.parse(localStorage.getItem("safespace_custom_tags")||"[]");t([...R,...e])}catch(e){t(R)}finally{a(!1)}};return{tags:e,loading:s,createTag:(e,s="gray",a="custom")=>{try{const r=JSON.parse(localStorage.getItem("safespace_custom_tags")||"[]"),l={id:`custom_${Date.now()}`,label:e,color:s,category:a,custom:!0,createdAt:(new Date).toISOString()},o=[...r,l];return localStorage.setItem("safespace_custom_tags",JSON.stringify(o)),t([...R,...o]),{success:!0,tag:l}}catch(r){return{success:!1,error:r.message}}},deleteTag:e=>{try{const s=JSON.parse(localStorage.getItem("safespace_custom_tags")||"[]").filter((t=>t.id!==e));return localStorage.setItem("safespace_custom_tags",JSON.stringify(s)),t([...R,...s]),{success:!0}}catch(s){return{success:!1,error:s.message}}},getTagById:t=>e.find((e=>e.id===t)),getTagsByCategory:t=>e.filter((e=>e.category===t)),refreshTags:l}}(),[i,n]=r.useState(!1),[c,m]=r.useState(""),[x,g]=r.useState("blue"),[h,u]=r.useState("all"),p="all"===h?l:l.filter((e=>e.category===h));return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"block text-sm font-medium",children:["Tags (",e.length,"/",a,")"]}),t.jsxs("button",{type:"button",onClick:()=>n(!i),className:"text-sm text-primary flex items-center gap-1",children:[t.jsx(d,{size:16}),"Create Tag"]})]}),t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[t.jsx("button",{onClick:()=>u("all"),className:"px-3 py-1 rounded-lg text-sm font-medium whitespace-nowrap "+("all"===h?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700"),children:"All"}),Object.entries(X).map((([e,{label:s,icon:a}])=>t.jsxs("button",{onClick:()=>u(e),className:"px-3 py-1 rounded-lg text-sm font-medium whitespace-nowrap "+(h===e?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700"),children:[a," ",s]},e)))]}),i&&t.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-xl space-y-3",children:[t.jsx("input",{type:"text",value:c,onChange:e=>m(e.target.value),placeholder:"Tag name...",className:"w-full px-3 py-2 rounded-lg border dark:bg-gray-700",maxLength:20}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.keys(B).map((e=>t.jsx("button",{type:"button",onClick:()=>g(e),className:`w-8 h-8 rounded-full ${B[e]} ${x===e?"ring-2 ring-primary":""}`},e)))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"button",onClick:()=>{if(c.trim()){const t=o(c.trim(),x,"custom");t.success&&(s([...e,t.tag.id]),m(""),n(!1))}},className:"flex-1 bg-primary text-white py-2 rounded-lg font-medium",children:"Create"}),t.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg",children:"Cancel"})]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:p.map((r=>{const l=e.includes(r.id);return t.jsxs("button",{type:"button",onClick:()=>{return t=r.id,void(e.includes(t)?s(e.filter((e=>e!==t))):e.length<a&&s([...e,t]));var t},className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${B[r.color]} ${l?"ring-2 ring-primary":"opacity-60 hover:opacity-100"}`,children:[r.label,l&&t.jsx("span",{className:"ml-1",children:"‚úì"})]},r.id)}))}),e.length>=a&&t.jsxs("p",{className:"text-sm text-orange-600",children:["Maximum ",a," tags reached"]})]})}const Z=[{emoji:"üòä",label:"Amazing",value:5,color:"#10B981"},{emoji:"üôÇ",label:"Good",value:4,color:"#84CC16"},{emoji:"üòê",label:"Okay",value:3,color:"#F59E0B"},{emoji:"üò¢",label:"Low",value:2,color:"#F97316"},{emoji:"üò∞",label:"Struggling",value:1,color:"#EF4444"}];function K({onMoodLogged:e}){const[a,l]=r.useState(null),[o,d]=r.useState(""),[m,x]=r.useState([]),[g,h]=r.useState(!1),[u,p]=r.useState(!1),[b,y]=r.useState(!1),[j,f]=r.useState(null),[N,v]=r.useState(0),[w,k]=r.useState(!1),[S,D]=r.useState([]),T=(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`})(),C=new Date,O=C.getHours(),I=O<12?"Good morning":O<17?"Good afternoon":"Good evening",M=C.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),{moods:L,saveMood:z}=W();r.useEffect((()=>{const e=L[T];e&&(f(e),p(!0)),F(L)}),[T,L]);const F=e=>{let t=0;const s=new Date;for(let a=0;a<365;a++){const r=new Date(s);r.setDate(s.getDate()-a);if(!e[r.toISOString().split("T")[0]])break;t++}v(t)},E=()=>{D([])},_=()=>{p(!1),f(null)},J=200-o.length,A=J<20?"text-danger":J<50?"text-warning":"text-text-secondary";return b?t.jsxs("div",{className:"card p-6 mb-6 text-center dark:bg-gray-800 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:"üéâ"}),t.jsx("h3",{className:"text-xl font-semibold text-text-primary dark:text-white mb-2",children:"Mood logged!"}),N>1&&t.jsxs("p",{className:"text-text-secondary",children:[N," day streak! Keep it up üî•"]})]}):u&&j?t.jsx("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-3xl",children:j.emoji}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-text-primary dark:text-white",children:["Today's mood: ",j.label]}),j.note&&t.jsx("p",{className:"text-text-secondary dark:text-gray-300 text-sm truncate max-w-xs",children:j.note})]})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("button",{onClick:_,className:"px-4 py-2 bg-primary dark:bg-primary-light text-white rounded-xl text-sm font-medium hover:bg-primary/90 dark:hover:bg-primary-light/90 transition-colors",children:"Update"}),t.jsx("button",{className:"text-text-secondary dark:text-gray-300 text-sm hover:text-text-primary dark:hover:text-white",children:"View History"})]})]})}):t.jsxs("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-text-secondary dark:text-gray-300 text-sm",children:M}),t.jsxs("h2",{className:"text-xl font-semibold text-text-primary dark:text-white",children:[I,"!"]}),t.jsx("p",{className:"text-text-primary dark:text-gray-100 mt-2",children:"How are you feeling right now?"})]}),t.jsx("div",{className:"flex justify-between gap-2 mb-4",children:Z.map((e=>t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("button",{onClick:()=>(e=>{l(e),h(!0),s(`Selected ${e.label} mood`)})(e),"aria-label":`Select ${e.label} mood`,"aria-pressed":a?.value===e.value,className:"w-14 h-14 md:w-16 md:h-16 rounded-2xl flex items-center justify-center text-2xl md:text-3xl transition-all duration-200 hover:scale-110 "+(a?.value===e.value?"scale-110 shadow-lg":"hover:shadow-md"),style:{backgroundColor:`${e.color}20`},children:e.emoji}),a?.value===e.value&&t.jsx("span",{className:"text-xs text-text-secondary dark:text-gray-300 mt-1 font-medium",children:e.label})]},e.value)))}),g&&t.jsxs("div",{className:"overflow-hidden transition-all duration-300 ease-out",children:[t.jsx("div",{className:"mb-4",children:t.jsx(V,{selectedTags:m,onChange:x,maxTags:5})}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"mood-note",className:"sr-only",children:"Add a note about your mood (optional)"}),t.jsx("textarea",{id:"mood-note",value:o,onChange:e=>d(e.target.value.slice(0,200)),placeholder:"Want to add a note? (optional)","aria-label":"Mood note",className:"w-full p-3 border-2 border-gray-200 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl resize-none focus:border-primary dark:focus:border-primary-light outline-none transition-colors",rows:3,maxLength:200}),t.jsx("div",{className:"flex justify-end mt-1",children:t.jsxs("span",{className:`text-xs ${A}`,children:[J,"/200"]})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsx("button",{onClick:async()=>{const t={mood:a.value,emoji:a.emoji,label:a.label,note:o.trim(),tags:m,timestamp:(new Date).toISOString()};await z(T,t),(e=>{G.addAction({type:"MOOD_LOG",data:e})})({...t,date:T}),i(c.moodLog);const r=n().filter((e=>e.unlocked));r.length>0&&D(r),y(!0),F({...L,[T]:t}),s("Mood logged successfully!"),setTimeout((()=>{y(!1),f(t),p(!0),l(null),d(""),h(!1),e?.()}),3e3)},"aria-label":"Log your mood",className:"flex-1 bg-primary dark:bg-primary-light text-white py-3 rounded-xl font-semibold hover:bg-primary/90 dark:hover:bg-primary-light/90 transition-colors",children:"Log Mood"}),t.jsx("button",{onClick:()=>{l(null),h(!1),d(""),x([])},className:"text-text-secondary dark:text-gray-300 hover:text-text-primary dark:hover:text-white transition-colors",children:"Skip for now"})]})]}),S.length>0&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:E,role:"dialog","aria-labelledby":"badge-modal-title","aria-modal":"true",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"üéâ"}),t.jsx("h3",{id:"badge-modal-title",className:"text-2xl font-bold text-text-primary dark:text-white mb-2",children:"Badge Unlocked!"}),S.map(((e,s)=>t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{className:"text-4xl mb-2",children:e.badge.emoji}),t.jsx("h4",{className:"text-xl font-semibold text-text-primary dark:text-white",children:e.badge.name}),t.jsx("p",{className:"text-text-secondary dark:text-gray-300",children:e.badge.description}),t.jsxs("p",{className:"text-primary dark:text-primary-light font-medium mt-2",children:["+",e.badge.points," points"]})]},s))),t.jsx("button",{onClick:E,className:"mt-4 px-6 py-3 bg-primary dark:bg-primary-light text-white rounded-xl font-medium hover:bg-primary/90 dark:hover:bg-primary-light/90 transition-colors",children:"Awesome!"})]})})})]})}const ee={5:"#10B981",4:"#84CC16",3:"#F59E0B",2:"#F97316",1:"#EF4444"},te={5:"Amazing",4:"Good",3:"Okay",2:"Low",1:"Struggling"};function se(){const[e,s]=r.useState("week"),[a,l]=r.useState(new Date),{moods:o,loading:i}=W(),[n,c]=r.useState(null),[d,p]=r.useState(!1),b=e=>{const t=[],s=new Date(e),a=s.getDay();s.setDate(s.getDate()-a);for(let r=0;r<7;r++){const e=new Date(s);e.setDate(s.getDate()+r),t.push(e)}return t},y=e=>e.toISOString().split("T")[0],j=e=>{const t=new Date;return e.toDateString()===t.toDateString()},f=e=>{const t=new Date(a);t.setDate(t.getDate()+7*e),l(t)},N=e=>{const t=new Date(a);t.setMonth(t.getMonth()+e),l(t)},v=e=>{const t=y(e),s=o[t];s&&(c({date:e,mood:s}),p(!0))};if(i)return t.jsx("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4"}),t.jsx("div",{className:"grid grid-cols-7 gap-2",children:Array.from({length:7},((e,s)=>t.jsx("div",{className:"h-16 bg-gray-200 dark:bg-gray-700 rounded"},s)))})]})});return Object.keys(o).length>0?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h3",{className:"text-xl font-semibold text-text-primary dark:text-white",children:["Your Mood This ","week"===e?"Week":"Month"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>s("week"),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors "+("week"===e?"bg-primary text-white":"text-text-secondary hover:text-text-primary"),children:"Week"}),t.jsx("button",{onClick:()=>s("month"),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors "+("month"===e?"bg-primary text-white":"text-text-secondary hover:text-primary"),children:"Month"})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("button",{onClick:()=>"week"===e?f(-1):N(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(m,{size:20})}),t.jsx("span",{className:"font-medium text-text-primary",children:"week"===e?(()=>{const e=b(a),t=e[0],s=e[6];return`${t.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${s.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`})():a.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),t.jsx("button",{onClick:()=>"week"===e?f(1):N(1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(x,{size:20})})]}),"week"===e?t.jsx("div",{className:"grid grid-cols-7 gap-2",children:b(a).map(((e,s)=>{const a=y(e),r=o[a];return t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-text-secondary mb-1",children:["S","M","T","W","T","F","S"][s]}),t.jsx("div",{className:"text-sm font-medium mb-2",children:e.getDate()}),t.jsx("button",{onClick:()=>v(e),className:`w-full h-16 rounded-xl flex items-center justify-center text-2xl transition-all hover:scale-105 ${j(e)?"ring-2 ring-primary":""} ${r?"cursor-pointer shadow-sm":"border-2 border-dashed border-gray-300 cursor-default"}`,style:{backgroundColor:r?`${ee[r.mood]}20`:"transparent"},disabled:!r,children:r?r.emoji:""})]},s)}))}):t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>t.jsx("div",{className:"text-center text-xs font-medium text-text-secondary p-2",children:e},e))),(e=>{const t=e.getFullYear(),s=e.getMonth(),a=new Date(t,s,1),r=new Date(a);r.setDate(r.getDate()-a.getDay());const l=[],o=new Date(r);for(;l.length<42;)l.push(new Date(o)),o.setDate(o.getDate()+1);return l})(a).map(((e,s)=>{const r=y(e),l=o[r],i=((e,t)=>e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear())(e,a);return t.jsxs("button",{onClick:()=>v(e),className:`aspect-square p-1 rounded-lg text-sm transition-all hover:scale-105 ${j(e)?"ring-2 ring-primary":""} ${i?"text-text-primary":"text-gray-300"} ${l?"cursor-pointer":"cursor-default"}`,style:{backgroundColor:l?`${ee[l.mood]}20`:"transparent"},disabled:!l,children:[t.jsx("div",{className:"font-medium",children:e.getDate()}),l&&t.jsx("div",{className:"text-lg leading-none",children:l.emoji})]},s)}))]})]}),d&&n&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-surface dark:bg-gray-800 rounded-2xl p-6 max-w-sm w-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:n.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),t.jsx("button",{onClick:()=>p(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:t.jsx(g,{size:20})})]}),t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("div",{className:"text-4xl mb-2",children:n.mood.emoji}),t.jsxs("p",{className:"text-lg font-medium text-text-primary",children:["You felt ",te[n.mood.mood]]})]}),n.mood.note&&t.jsx("div",{className:"bg-gray-50 rounded-xl p-3 mb-4",children:t.jsx("p",{className:"text-text-secondary text-sm",children:n.mood.note})}),t.jsxs("p",{className:"text-xs text-text-secondary mb-4",children:["Logged at ",new Date(n.mood.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"flex-1 flex items-center justify-center gap-2 py-2 px-4 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors",children:[t.jsx(h,{size:16}),"Edit"]}),t.jsxs("button",{onClick:async()=>{if(n){const e=y(n.date),t={...o};delete t[e],localStorage.setItem("safespace_moods",JSON.stringify(t)),p(!1)}},className:"flex items-center justify-center gap-2 py-2 px-4 bg-danger text-white rounded-xl font-medium hover:bg-danger/90 transition-colors",children:[t.jsx(u,{size:16}),"Delete"]})]})]})})]}):t.jsxs("div",{className:"card p-6 mb-6 text-center dark:bg-gray-800 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:"üìä"}),t.jsx("h3",{className:"text-xl font-semibold text-text-primary dark:text-white mb-2",children:"Your Mood History"}),t.jsx("p",{className:"text-text-secondary dark:text-gray-300 mb-4",children:"Start tracking your mood to see patterns over time"}),t.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"px-6 py-2 bg-primary dark:bg-primary-light text-white rounded-xl font-medium hover:bg-primary/90 dark:hover:bg-primary-light/90 transition-colors",children:"Log your first mood"})]})}const ae={5:{label:"Amazing",emoji:"üòä"},4:{label:"Good",emoji:"üôÇ"},3:{label:"Okay",emoji:"üòê"},2:{label:"Low",emoji:"üò¢"},1:{label:"Struggling",emoji:"üò∞"}};function re(){const[e,s]=r.useState("7"),[a,l]=r.useState([]),[o,i]=r.useState(null),{moods:n,loading:c}=W(),[d,m]=r.useState(!0);r.useEffect((()=>{c||x()}),[e,n,c]);const x=()=>{const t=Object.entries(n||{}).map((([e,t])=>({date:e,mood:t.mood,emoji:t.emoji,label:t.label,note:t.note,timestamp:t.timestamp}))).sort(((e,t)=>new Date(e.date)-new Date(t.date))),s="all"===e?t.length:parseInt(e),a=("all"===e?t:t.slice(-s)).map((e=>({...e,displayDate:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})));l(a),g(a,t),m(!1)},g=(t,s)=>{if(0===t.length)return void i(null);const a=t.reduce(((e,t)=>e+t.mood),0)/t.length,r="all"===e?[]:s.slice(-2*parseInt(e),-parseInt(e)),l=a-(r.length>0?r.reduce(((e,t)=>e+t.mood),0)/r.length:a),o=t.reduce(((e,t)=>t.mood>e.mood?t:e)),n=t.reduce(((e,t)=>(e[t.mood]=(e[t.mood]||0)+1,e)),{}),c=Object.keys(n).reduce(((e,t)=>n[e]>n[t]?e:t)),d=t.filter((e=>e.mood>=4)).length,m=Math.round(d/t.length*100),x=t.reduce(((e,t)=>{const s=new Date(t.date).getDay();return e[s]||(e[s]=[]),e[s].push(t.mood),e}),{}),g=Object.entries(x).map((([e,t])=>{const s=t.reduce(((e,t)=>e+t),0)/t.length,a=t.reduce(((e,t)=>e+Math.pow(t-s,2)),0)/t.length;return{day:parseInt(e),variance:a}})),h=g.length>0?g.reduce(((e,t)=>t.variance<e.variance?t:e)):null;i({average:a,trend:l,bestDay:o,mostCommonMood:parseInt(c),goodDaysPercent:m,mostConsistentDay:h?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][h.day]:null})},h=r.useCallback((({active:e,payload:s,label:a})=>{if(e&&s&&s.length){const e=s[0].payload;return t.jsxs("div",{className:"bg-surface dark:bg-gray-700 p-3 rounded-xl shadow-lg border dark:border-gray-600",children:[t.jsx("p",{className:"font-medium",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),t.jsxs("p",{className:"text-lg",children:[e.emoji," ",e.label]}),e.note&&t.jsx("p",{className:"text-sm text-text-secondary mt-1 max-w-xs",children:e.note.length>50?`${e.note.slice(0,50)}...`:e.note})]})}return null}),[]),u=r.useCallback((e=>ae[e]?.emoji||""),[]);if(d)return t.jsx("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-48 mb-4"}),t.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-600 rounded"})]})});if(a.length<3)return t.jsxs("div",{className:"card p-6 mb-6 text-center dark:bg-gray-800 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:"üìà"}),t.jsx("h3",{className:"text-xl font-semibold text-text-primary dark:text-white mb-2",children:"Your Mood Trends"}),t.jsx("p",{className:"text-text-secondary dark:text-gray-300 mb-4",children:"Keep logging to see trends"}),t.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-full h-2 mb-2",children:t.jsx("div",{className:"bg-primary dark:bg-primary-light h-2 rounded-full transition-all duration-300",style:{width:a.length/3*100+"%"}})}),t.jsxs("p",{className:"text-sm text-text-secondary dark:text-gray-300",children:[a.length,"/3 moods needed"]})]});const f=r.useMemo((()=>({7:"Last 7 days",30:"Last 30 days",all:"All time"})),[]);return t.jsxs("div",{className:"card p-6 mb-6 dark:bg-gray-800 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-text-primary dark:text-white",children:"Your Mood Trends"}),t.jsx("p",{className:"text-text-secondary dark:text-gray-300 text-sm",children:f[e]})]}),t.jsx("div",{className:"flex gap-2",children:["7","30","all"].map((a=>t.jsx("button",{onClick:()=>s(a),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors "+(e===a?"bg-primary dark:bg-primary-light text-white":"text-text-secondary dark:text-gray-300 hover:text-text-primary dark:hover:text-white"),children:"all"===a?"All time":`${a} days`},a)))})]}),o&&t.jsxs("div",{className:"mb-6 p-4 bg-primary/5 dark:bg-primary/10 rounded-xl",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:ae[Math.round(o.average)]?.emoji}),t.jsxs("span",{className:"text-lg font-semibold",children:["Your average mood: ",o.average.toFixed(1)]})]}),0!==o.trend&&t.jsxs("p",{className:"text-sm text-text-secondary",children:[o.trend>0?"‚Üë":"‚Üì"," ",Math.abs(o.trend).toFixed(1)," ",o.trend>0?"better":"lower"," than last period"]})]}),t.jsx("div",{className:"h-64 md:h-80 mb-6",children:t.jsx(I,{width:"100%",height:"100%",children:t.jsxs(M,{data:a,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"moodGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#4F46E5",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#4F46E5",stopOpacity:0})]})}),t.jsx(L,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),t.jsx(z,{dataKey:"displayDate",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"}}),t.jsx(F,{domain:[1,5],ticks:[1,2,3,4,5],tickFormatter:u,axisLine:!1,tickLine:!1,tick:{fontSize:16}}),t.jsx(E,{content:t.jsx(h,{})}),t.jsx(_,{type:"monotone",dataKey:"mood",stroke:"#4F46E5",strokeWidth:3,fill:"url(#moodGradient)",dot:{fill:"#4F46E5",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#4F46E5",strokeWidth:2},animationDuration:1e3,animationEasing:"ease-out",isAnimationActive:!0})]})})}),o&&t.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[t.jsx(p,{className:"text-primary dark:text-primary-light",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium dark:text-white",children:"Best day"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-gray-300",children:[new Date(o.bestDay.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",o.bestDay.emoji]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[t.jsx(b,{className:"text-primary dark:text-primary-light",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium dark:text-white",children:"Most common mood"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-gray-300",children:[ae[o.mostCommonMood]?.emoji," ",ae[o.mostCommonMood]?.label]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[t.jsx(y,{className:"text-primary dark:text-primary-light",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium dark:text-white",children:"Good days"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-gray-300",children:[o.goodDaysPercent,"% felt good or better"]})]})]}),o.mostConsistentDay&&t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[t.jsx(j,{className:"text-primary dark:text-primary-light",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium dark:text-white",children:"Most consistent"}),t.jsxs("p",{className:"text-xs text-text-secondary dark:text-gray-300",children:[o.mostConsistentDay,"s"]})]})]})]})]})}const le={anxiety:["breathing-exercises","worry-scheduler","coping-skills","dbt-skills"],depression:["gratitude","habits","social","therapy-prep"],stress:["breathing-exercises","meditation","sleep-tracker","wellness-plan"],journaling:["gratitude","emotion-tracker","therapy-prep","voice-journal"],social:["circles","peer-support","accountability","private-groups"]},oe=e=>{const t=A();return!!t.usage?.features?.[e]},ie=e=>({gratitude:["journaling","mood-tracker","habits"],habits:["wellness-plan","reminders","challenges"],"mood-tracker":["emotion-tracker","analytics","insights"],circles:["social","peer-support","private-groups"]}[e]||[]);function ne({feature:e,isRecommended:s,isActive:a,priority:o,onDismiss:i}){const n=l(),[c,d]=r.useState(!1),m={urgent:{icon:N,text:"Needs Attention",color:"bg-red-500"},high:{icon:y,text:"Recommended",color:"bg-primary"},medium:{icon:f,text:"Quick Win",color:"bg-yellow-500"},low:null}[o],x=e.icon;return t.jsxs("div",{className:`card p-6 hover:shadow-xl transition-all relative ${{urgent:"border-2 border-red-400 shadow-lg shadow-red-100",high:"border-2 border-primary shadow-lg shadow-primary/20",medium:"border border-primary/30",low:"border border-gray-200"}[o]} ${a?"ring-2 ring-primary":""}`,children:[m&&t.jsxs("div",{className:`absolute -top-2 -right-2 ${m.color} text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 shadow-lg`,children:[t.jsx(m.icon,{className:"w-3 h-3"}),t.jsx("span",{children:m.text})]}),t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${e.gradient||"from-primary to-purple-500"} flex items-center justify-center text-white shadow-lg`,children:t.jsx(x,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-lg",children:e.name}),e.subtitle&&t.jsx("p",{className:"text-xs text-text-secondary",children:e.subtitle})]})]}),i&&t.jsx("button",{onClick:()=>d(!c),className:"p-1 hover:bg-hover rounded",children:t.jsx(v,{className:"w-4 h-4"})})]}),e.description&&t.jsx("p",{className:"text-sm text-text-secondary mb-4",children:e.description}),e.stats&&t.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:e.stats.map(((e,s)=>t.jsxs("div",{className:"bg-hover rounded-lg p-2 text-center",children:[t.jsx("p",{className:"text-lg font-bold text-primary",children:e.value}),t.jsx("p",{className:"text-xs text-text-secondary",children:e.label})]},s)))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>n(e.path),className:"btn-primary flex-1 text-sm",children:e.action||"Open"}),e.secondaryAction&&t.jsx("button",{onClick:e.secondaryAction.onClick,className:"btn-secondary text-sm",children:e.secondaryAction.label})]}),c&&i&&t.jsx("div",{className:"absolute top-12 right-4 bg-white shadow-xl rounded-lg p-2 z-10 border",children:t.jsx("button",{onClick:()=>{i(),d(!1)},className:"text-sm px-3 py-2 hover:bg-hover rounded w-full text-left",children:"Not interested"})})]})}const ce={gratitude:{name:"Gratitude Journal",icon:T,path:"/gratitude",color:"text-pink-500"},habits:{name:"Habit Tracker",icon:b,path:"/habits",color:"text-green-500"},"mood-tracker":{name:"Mood Tracker",icon:T,path:"/",color:"text-blue-500"},circles:{name:"Support Circles",icon:D,path:"/circles",color:"text-purple-500"},wellness:{name:"Wellness Score",icon:y,path:"/wellness",color:"text-teal-500"},insights:{name:"Insights",icon:S,path:"/insights",color:"text-indigo-500"},resources:{name:"Resources",icon:k,path:"/resources",color:"text-orange-500"},"sleep-tracker":{name:"Sleep Tracker",icon:w,path:"/tools",color:"text-blue-600"}};function de(){const e=l(),[s,a]=r.useState([]),[o,i]=r.useState([]),[n,c]=r.useState(!1),d=U();return r.useEffect((()=>{if(!d)return;const e=((e=6)=>{const t=A(),s=t.usage?.features||{};return Object.entries(s).sort((([,e],[,t])=>{const s=.7*e.count+(Date.now()-new Date(e.lastUsed).getTime()<864e5?100:0);return.7*t.count+(Date.now()-new Date(t.lastUsed).getTime()<864e5?100:0)-s})).slice(0,e).map((([e])=>e))})(6),t=(()=>{const e=A(),t=(new Date).getHours();return e.usage?.timePatterns?.[t]||[]})(),s=[...new Set([...t,...e])].slice(0,6),r=s.length>0?s:["mood-tracker","gratitude","habits","circles","wellness","insights"];a(r);const l=(()=>{const e=A();if(!e.enabled)return[];const t=[];(JSON.parse(localStorage.getItem("safespace_user_profile")||"{}").goals||[]).forEach((e=>{(le[e]||[]).forEach((s=>{oe(s)||t.push({featureId:s,reason:`Recommended for your ${e} goal`,priority:"high",timestamp:(new Date).toISOString()})}))}));const s=JSON.parse(localStorage.getItem("safespace_moods")||"{}"),a=Object.values(s).slice(-7);a.reduce(((e,t)=>e+t.rating),0)/a.length<3&&t.push({featureId:"crisis-support",reason:"Your recent mood shows you might need extra support",priority:"urgent",timestamp:(new Date).toISOString()});const r=e.usage?.features||{},l=Object.entries(r).sort((([,e],[,t])=>t.count-e.count))[0];if(l&&l[1].count>5){const[e]=l;ie(e).forEach((s=>{oe(s)||t.push({featureId:s,reason:`You might also like this based on your use of ${e}`,priority:"medium",timestamp:(new Date).toISOString()})}))}const o=e.recommendations?.dismissed||[];return t.filter((e=>!o.includes(e.featureId))).sort(((e,t)=>{const s={urgent:3,high:2,medium:1,low:0};return s[t.priority]-s[e.priority]})).slice(0,5)})();i(l);const o=(()=>{const e=JSON.parse(localStorage.getItem("safespace_moods")||"{}"),t=Object.values(e).slice(-1)[0];return(t?Math.floor((Date.now()-new Date(t.date).getTime())/864e5):999)>=3})();c(o)}),[d]),d?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[t.jsx(N,{className:"w-4 h-4 text-primary"}),t.jsx("span",{children:"Personalized for you"})]}),n&&t.jsxs("div",{className:"card p-4 bg-blue-50 border border-blue-200",children:[t.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"We miss you! üíô"}),t.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"It's been a few days since your last mood check-in. How are you feeling today?"}),t.jsx("button",{onClick:()=>e("/"),className:"btn-primary text-sm",children:"Quick Mood Check-In"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold mb-3",children:"Your Top Tools"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e=>{const s=ce[e];return s?t.jsx(ne,{feature:{name:s.name,icon:s.icon,path:s.path,gradient:"from-primary to-purple-500"},priority:"medium"},e):null}))})]}),o.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold mb-3",children:"Recommended for You"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map((e=>{const s=ce[e.featureId];return s?t.jsx(ne,{feature:{name:s.name,icon:s.icon,path:s.path,description:e.reason,gradient:"from-primary to-purple-500"},priority:e.priority,isRecommended:!0,onDismiss:()=>(e=>{const t=A(),s=t.recommendations?.dismissed||[];s.push(e),$({recommendations:{...t.recommendations,dismissed:s}})})(e.featureId)},e.featureId):null}))})]})]}):null}function me({actions:e=[]}){const[s,a]=r.useState(!1),{vibrate:l}=Y();return t.jsxs(t.Fragment,{children:[s&&t.jsx("div",{className:"fixed inset-0 bg-black/20 z-40 animate-fadeIn",onClick:()=>a(!1)}),t.jsxs("div",{className:"fixed bottom-20 right-4 md:bottom-8 z-50 flex flex-col-reverse items-end gap-3",children:[s&&e.map(((e,s)=>t.jsxs("div",{className:"flex items-center gap-3 animate-slideUp",style:{animationDelay:50*s+"ms"},children:[t.jsx("span",{className:"bg-gray-900 dark:bg-gray-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg",children:e.label}),t.jsx("button",{onClick:()=>(e=>{l("medium"),e.onClick(),a(!1)})(e),className:"w-12 h-12 bg-white dark:bg-gray-800 rounded-full shadow-lg flex items-center justify-center text-primary hover:scale-110 transition-transform active:scale-95","aria-label":e.label,children:e.icon})]},s))),t.jsx("button",{onClick:()=>{l("light"),a(!s)},className:"w-14 h-14 bg-gradient-to-r from-primary to-secondary rounded-full shadow-2xl flex items-center justify-center text-white hover:scale-110 transition-transform active:scale-95","aria-label":s?"Close menu":"Open menu",children:s?t.jsx(g,{size:24}):t.jsx(d,{size:24})})]})]})}function xe(){const{t:e}=a(),s=l(),[i,n]=r.useState(null),[c,d]=r.useState(0),[m,x]=r.useState(null),[g,h]=r.useState(!1),{isPremium:u,trialActive:p,daysLeft:b}=q();r.useEffect((()=>{try{const e=localStorage.getItem("safespace_user");e&&n(JSON.parse(e)),P(),((e,t=0)=>{const s=A();if(!s.enabled)return;const a=s.usage?.features||{},r=a[e]||{count:0,totalDuration:0},l={count:r.count+1,lastUsed:(new Date).toISOString(),totalDuration:r.totalDuration+t,avgDuration:Math.round((r.totalDuration+t)/(r.count+1))};a[e]=l,$({usage:{...s.usage,features:a}})})("home",0)}catch(t){x(e("errors.failedToLoad"))}}),[]);const y=[{icon:t.jsx(C,{size:20}),label:e("mood.logMood"),onClick:()=>h(!0),color:"from-indigo-500 to-purple-600"},{icon:t.jsx(T,{size:20}),label:e("gratitude.title"),onClick:()=>s("/gratitude"),color:"from-pink-500 to-red-600"},{icon:t.jsx(k,{size:20}),label:e("home.journal"),onClick:()=>s("/advanced-tools"),color:"from-blue-500 to-cyan-600"}];return m?t.jsx("div",{className:"max-w-4xl mx-auto p-4",children:t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[t.jsx("p",{className:"text-red-600 mb-4",children:m}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:e("errors.reloadPage")})]})}):t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-8 mb-6 shadow-xl",children:[t.jsx("div",{className:"absolute inset-0 bg-black/10"}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[i?.avatar&&t.jsxs("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-3xl border-2 border-white/30 shadow-lg relative",children:[i.avatar,u&&t.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full flex items-center justify-center",children:t.jsx(O,{size:14,className:"text-white"})})]}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white drop-shadow-lg",children:[e("welcome.back"),i?.username?`, ${i.username}`:"","! üëã"]}),t.jsx("p",{className:"text-white/90 text-lg mt-1",children:e("home.subtitle")})]})]}),u&&t.jsxs("div",{className:"hidden md:flex items-center gap-2 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full border border-white/30",children:[t.jsx(O,{size:18,className:"text-yellow-300"}),t.jsx("span",{className:"text-white font-medium",children:p?e("premium.trialDaysLeft",{days:b}):e("premium.title")})]})]})]}),!u&&t.jsx(o,{to:"/premium",className:"block mb-6",children:t.jsx("div",{className:"card p-6 bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300 hover:shadow-xl transition-all",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full flex items-center justify-center",children:t.jsx(O,{className:"text-white",size:24})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900",children:e("premium.upgrade")}),t.jsx("p",{className:"text-sm text-gray-700",children:e("premium.unlockUnlimited")})]})]}),t.jsx(N,{className:"text-yellow-500",size:24})]})})}),g&&t.jsx(J,{children:t.jsx("div",{className:"mb-6",children:t.jsx(K,{onMoodLogged:()=>{try{d((e=>e+1)),h(!1)}catch(e){}}})})}),t.jsx(J,{children:t.jsx("div",{className:"mb-6",children:t.jsx(se,{},c)})}),t.jsx(J,{children:t.jsx("div",{className:"mb-6",children:t.jsx(re,{},c)})}),t.jsx(J,{children:t.jsx("div",{className:"mb-6",children:t.jsx(de,{})})}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:e("home.quickActions")}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsx(Q,{type:"lift",children:t.jsxs(o,{to:"/gratitude",className:"card p-6 hover:shadow-xl transition-all duration-300 group block",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"‚ù§Ô∏è"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.gratitude")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.gratitudeDesc")})]})}),t.jsx(Q,{type:"lift",children:t.jsxs(o,{to:"/habits",className:"card p-6 hover:shadow-xl transition-all duration-300 group block",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üéØ"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.habits")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.habitsDesc")})]})}),t.jsx(Q,{type:"lift",children:t.jsxs(o,{to:"/emotions",className:"card p-6 hover:shadow-xl transition-all duration-300 group block",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üí≠"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.emotions")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.emotionsDesc")})]})}),t.jsxs(o,{to:"/coping-skills",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üõ†Ô∏è"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.copingSkills")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.copingSkillsDesc")})]}),t.jsxs(o,{to:"/reminders",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"‚è∞"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.reminders")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.remindersDesc")})]}),t.jsxs(o,{to:"/tools",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üß∞"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.therapyTools")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.therapyToolsDesc")})]}),t.jsxs(o,{to:"/wellness",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üìä"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.wellnessScore")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.wellnessScoreDesc")})]}),t.jsxs(o,{to:"/advanced-tools",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üöÄ"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.advancedTools")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.advancedToolsDesc")})]}),t.jsxs(o,{to:"/gamification",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üèÜ"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.gamification")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.gamificationDesc")})]}),t.jsxs(o,{to:"/wellness-plan",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üìÖ"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.wellnessPlan")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.wellnessPlanDesc")})]}),t.jsxs(o,{to:"/social",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"ü§ù"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.socialHub")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.socialHubDesc")})]}),t.jsxs(o,{to:"/analytics",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üìä"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.analytics")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.analyticsDesc")})]}),t.jsxs(o,{to:"/professional",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üè•"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.professional")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.professionalDesc")})]}),t.jsxs(o,{to:"/technical",className:"card p-6 hover:shadow-xl transition-all duration-300 group",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üì°"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.technical")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.technicalDesc")})]}),t.jsxs(o,{to:"/premium/features",className:"card p-6 hover:shadow-xl transition-all duration-300 group border-2 border-yellow-400",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:"üëë"}),t.jsx("h3",{className:"text-lg font-semibold",children:e("wellnessTools.premiumFeatures")})]}),t.jsx("p",{className:"text-text-secondary text-sm",children:e("wellnessTools.premiumFeaturesDesc")})]})]})]}),t.jsx(me,{actions:y})]})}export{xe as default};
