import{j as e}from"./index-Duv89VAf.js";import{u as s,r as t}from"./react-vendor-B4gIioy9.js";import{S as a}from"./SafeComponent-DdckI7LM.js";import{g as l}from"./premiumUtils-Ccr3qdNt.js";import{D as i,d as r}from"./disclaimers-vV8DlMF2.js";import{x as d,Z as n,ai as c,t as o,au as m,D as x}from"./icons-DVxOjm_j.js";const p=[{id:1,title:"7-Day Mood Tracker",description:"Track mood daily for 7 days",duration:7,progress:0,badge:"🎯"},{id:2,title:"30-Day Gratitude",description:"Write gratitude daily for 30 days",duration:30,progress:0,badge:"🙏"},{id:3,title:"Mindfulness Week",description:"Complete 5 mindfulness sessions",duration:7,progress:0,badge:"🧘"},{id:4,title:"Habit Builder",description:"Complete habits for 14 days",duration:14,progress:0,badge:"💪"}],h=[{id:1,title:"Getting Started",description:"Complete your first week",xp:100,badge:"🌟",tasks:["Log 3 moods","Join a circle"]},{id:2,title:"Wellness Warrior",description:"Use 5 different tools",xp:250,badge:"⚔️",tasks:["Use 5 tools"]},{id:3,title:"Master of Mindfulness",description:"Complete 20 sessions",xp:500,badge:"🧘",tasks:["20 mindfulness sessions"],premium:!0}];function g(){const g=s(),[u,f]=t.useState({level:1,xp:0,badges:[]}),[j,b]=t.useState({mood:0,gratitude:0,habits:0}),[N,v]=t.useState("challenges"),[y,w]=t.useState([]),{isPremium:S}=l();t.useEffect((()=>{const e=JSON.parse(localStorage.getItem("safespace_user_level")||'{"level":1,"xp":0,"badges":[]}');f(e);const s=JSON.parse(localStorage.getItem("safespace_active_challenges")||"[]");w(s);const t=JSON.parse(localStorage.getItem("safespace_moods")||"{}"),a=JSON.parse(localStorage.getItem("safespace_gratitude_entries")||"[]"),l=JSON.parse(localStorage.getItem("safespace_habits")||"[]");b({mood:k(Object.keys(t)),gratitude:k(a.map((e=>e.date))),habits:l.length>0?C(l[0]):0})}),[]);const k=e=>{if(!e.length)return 0;const s=e.sort().reverse();let t=0,a=new Date;a.setHours(0,0,0,0);for(const l of s){const e=new Date(l);e.setHours(0,0,0,0);if(Math.floor((a-e)/864e5)!==t)break;t++,a.setDate(a.getDate()-1)}return t},C=e=>{let s=0,t=new Date;for(;e.completions?.[t.toISOString().split("T")[0]];)s++,t.setDate(t.getDate()-1);return s},D=100*u.level;return e.jsx(a,{children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Gamification Hub"}),S&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-full text-xs font-medium",children:[e.jsx(d,{size:12}),"Premium"]})]}),e.jsxs("p",{className:"text-text-secondary",children:["Level up your mental wellness journey • ",S?"3 active challenges":"1 active challenge"]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(i,{disclaimer:r.general})}),e.jsxs("div",{className:"card p-6 mb-8 bg-gradient-to-r from-purple-500/10 to-pink-500/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-2xl font-bold",children:u.level}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Level ",u.level]}),e.jsxs("p",{className:"text-text-secondary",children:[u.xp," / ",D," XP"]})]})]}),e.jsx("div",{className:"flex gap-2",children:u.badges.map(((s,t)=>e.jsx("span",{className:"text-3xl",children:s},t)))})]}),e.jsx("div",{className:"w-full h-3 bg-hover rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500",style:{width:u.xp/D*100+"%"}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(n,{className:"w-6 h-6 text-yellow-500"}),e.jsx("h3",{className:"font-semibold",children:"Mood Streak"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:[j.mood," days"]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(c,{className:"w-6 h-6 text-pink-500"}),e.jsx("h3",{className:"font-semibold",children:"Gratitude Streak"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:[j.gratitude," days"]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(o,{className:"w-6 h-6 text-blue-500"}),e.jsx("h3",{className:"font-semibold",children:"Habit Streak"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:[j.habits," days"]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>v("challenges"),className:"px-6 py-3 rounded-xl font-medium "+("challenges"===N?"bg-primary text-white":"bg-hover"),children:[e.jsx(m,{className:"w-5 h-5 inline mr-2"}),"Challenges"]}),e.jsxs("button",{onClick:()=>v("quests"),className:"px-6 py-3 rounded-xl font-medium "+("quests"===N?"bg-primary text-white":"bg-hover"),children:[e.jsx(o,{className:"w-5 h-5 inline mr-2"}),"Quests"]})]}),"challenges"===N&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map((s=>e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-2xl",children:s.badge}),e.jsx("h3",{className:"text-lg font-semibold",children:s.title})]}),e.jsx("p",{className:"text-text-secondary text-sm",children:s.description})]}),e.jsxs("span",{className:"px-3 py-1 bg-hover rounded-full text-sm",children:[s.duration,"d"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.progress,"/",s.duration]})]}),e.jsx("div",{className:"w-full h-2 bg-hover rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary",style:{width:s.progress/s.duration*100+"%"}})})]}),e.jsx("button",{onClick:()=>(e=>{if(!S&&y.length>=1)return void g("/premium");const s=[...y,e];w(s),localStorage.setItem("safespace_active_challenges",JSON.stringify(s))})(s.id),disabled:y.includes(s.id),className:"btn-primary w-full",children:y.includes(s.id)?"Active":"Join Challenge"})]},s.id)))}),"quests"===N&&e.jsx("div",{className:"space-y-4",children:h.map((s=>e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:s.badge}),e.jsx("h3",{className:"text-xl font-semibold",children:s.title}),s.premium&&e.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-500 rounded text-xs font-medium",children:"PREMIUM"})]}),e.jsx("p",{className:"text-text-secondary mb-3",children:s.description}),e.jsx("div",{className:"space-y-1",children:s.tasks.map(((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-4 h-4 rounded border-2 border-text-secondary"}),e.jsx("span",{children:s})]},t)))})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:["+",s.xp]}),e.jsx("div",{className:"text-sm text-text-secondary",children:"XP"})]})]}),e.jsxs("button",{onClick:()=>(e=>{!e.premium||S||g("/premium")})(s),className:"btn-primary w-full mt-4 flex items-center justify-center gap-2",children:[s.premium&&!S&&e.jsx(x,{size:16}),"Start Quest"]})]},s.id)))})]})})}export{g as default};
