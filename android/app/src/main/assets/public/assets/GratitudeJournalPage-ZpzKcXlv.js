import{j as e,u as s}from"./index-C2hV942_.js";import{r as t,u as a}from"./react-vendor-B4gIioy9.js";import{u as i}from"./useAuth-Cbz8KsVG.js";import{X as r,r as l,P as n,u as d,au as c,a as o,D as m,x,S as h,T as u,I as g}from"./icons-Cn7BKMG2.js";import{R as j,B as p,X as f,Y as b,T as N,b as y}from"./charts-BTXtbyhr.js";import{S as v}from"./SafeComponent-Bl7I87cI.js";import{g as w}from"./premiumUtils-Ccr3qdNt.js";import{D as S,d as k}from"./disclaimers-DMKdW3Y_.js";import{R as D,r as C}from"./ResearchCard-Dmj6EKWy.js";import{C as _}from"./CrisisResources-CuPIys0w.js";function I({entry:s,onClose:a,onSave:i}){const[d,c]=t.useState({date:(new Date).toISOString().split("T")[0],items:["","",""],mood_rating:3,notes:""});t.useEffect((()=>{s&&c(s)}),[s]);return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-surface border-b border-border p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Gratitude Entry"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date"}),e.jsx("input",{type:"date",value:d.date,onChange:e=>c({...d,date:e.target.value}),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"What are you grateful for?"}),d.items.map(((s,t)=>e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("span",{className:"text-2xl mt-1",children:"âœ¨"}),e.jsx("input",{value:s,onChange:e=>((e,s)=>{const t=[...d.items];t[e]=s,c({...d,items:t})})(t,e.target.value),className:"input flex-1",placeholder:`Gratitude #${t+1}`}),d.items.length>1&&e.jsx("button",{onClick:()=>{return e=t,void(d.items.length>1&&c({...d,items:d.items.filter(((s,t)=>t!==e))}));var e},className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(l,{className:"w-4 h-4"})})]},t))),d.items.length<5&&e.jsxs("button",{onClick:()=>{d.items.length<5&&c({...d,items:[...d.items,""]})},className:"btn-secondary text-sm w-full",children:[e.jsx(n,{className:"w-4 h-4"})," Add Another"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"How do you feel? (1-5)"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map((s=>e.jsx("button",{onClick:()=>c({...d,mood_rating:s}),className:"flex-1 py-3 rounded-xl font-medium transition-colors "+(d.mood_rating===s?"bg-primary text-white":"bg-hover text-text-secondary hover:bg-hover/80"),children:["ðŸ˜”","ðŸ˜•","ðŸ˜Š","ðŸ˜„","ðŸ¤©"][s-1]},s)))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:d.notes,onChange:e=>c({...d,notes:e.target.value}),className:"input w-full h-24",placeholder:"Any reflections or thoughts..."})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-surface border-t border-border p-6",children:e.jsx("button",{onClick:()=>{const e=d.items.filter((e=>e.trim()));if(0===e.length)return alert("Add at least one gratitude item");i({...d,items:e,id:s?.id||Date.now()})},className:"btn-primary w-full",children:"Save Entry"})})]})})}function O({entry:s,onEdit:t,onDelete:a}){return e.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-text-secondary text-sm",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("span",{children:(i=s.date,new Date(i).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),e.jsx("span",{className:"text-2xl ml-2",children:["ðŸ˜”","ðŸ˜•","ðŸ˜Š","ðŸ˜„","ðŸ¤©"][s.mood_rating-1]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t(s),className:"p-2 hover:bg-hover rounded-lg",children:e.jsx(c,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(s.date),className:"p-2 hover:bg-hover rounded-lg text-red-500",children:e.jsx(l,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:s.items.map(((s,t)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-xl",children:"âœ¨"}),e.jsx("p",{className:"text-text-primary flex-1",children:s})]},t)))}),s.notes&&e.jsx("div",{className:"pt-4 border-t border-border",children:e.jsx("p",{className:"text-text-secondary text-sm italic",children:s.notes})})]});var i}function T({entries:s}){if(0===s.length)return null;const t=[...Array(7)].map(((e,s)=>{const t=new Date;return t.setDate(t.getDate()-s),t.toISOString().split("T")[0]})).reverse().map((e=>{const t=s.find((s=>s.date===e));return{date:new Date(e).toLocaleDateString("en-US",{weekday:"short"}),mood:t?.mood_rating||0}})),a=s.length>0?(s.reduce(((e,s)=>e+s.mood_rating),0)/s.length).toFixed(1):0;return e.jsxs("div",{className:"card p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Weekly Mood Trend"}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-text-secondary text-sm",children:["Average Mood: ",e.jsxs("span",{className:"text-primary font-bold text-lg",children:[a,"/5"]})]})}),e.jsx(j,{width:"100%",height:200,children:e.jsxs(p,{data:t,children:[e.jsx(f,{dataKey:"date",stroke:"#888"}),e.jsx(b,{domain:[0,5],stroke:"#888"}),e.jsx(N,{}),e.jsx(y,{dataKey:"mood",fill:"#8b5cf6",radius:[8,8,0,0]})]})})]})}function A(){const{user:r}=i(),{t:l}=s(),c=a(),[j,p]=t.useState([]),[f,b]=t.useState(!1),[N,y]=t.useState(null),[A,E]=t.useState(0),{isPremium:M}=w();t.useEffect((()=>{J()}),[r]);const J=()=>{const e=localStorage.getItem("safespace_gratitude_entries");if(e){const s=JSON.parse(e);p(s),R(s)}},R=e=>{if(!e.length)return E(0);const s=[...e].sort(((e,s)=>new Date(s.date)-new Date(e.date)));let t=0,a=new Date;a.setHours(0,0,0,0);for(const i of s){const e=new Date(i.date);e.setHours(0,0,0,0);if(Math.floor((a-e)/864e5)!==t)break;t++,a.setDate(a.getDate()-1)}E(t)},U=()=>{!M&&j.length>=10&&!G?c("/premium"):b(!0)},W=e=>{y(e),b(!0)},F=e=>{const s=JSON.parse(localStorage.getItem("safespace_gratitude_entries")||"[]").filter((s=>s.date!==e));localStorage.setItem("safespace_gratitude_entries",JSON.stringify(s)),J()},G=j.find((e=>e.date===(new Date).toISOString().split("T")[0]));return e.jsx(v,{children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx(S,{disclaimer:k.gratitude})}),e.jsx("div",{className:"mb-6",children:e.jsx(D,{citations:C.gratitude,title:"Why Gratitude Works"})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{className:"w-8 h-8 text-pink-500"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:l("gratitude.title")}),e.jsx("p",{className:"text-text-secondary",children:l("gratitude.subtitle")})]})]}),e.jsxs("button",{onClick:U,className:"btn-primary",children:[e.jsx(n,{className:"w-5 h-5"})," ",l(G?"gratitude.editToday":"gratitude.addEntry")]})]}),!M&&j.length>=10&&e.jsx("div",{className:"card p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border border-orange-200 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:l("gratitude.limitReached")}),e.jsx("p",{className:"text-gray-700",children:l("gratitude.limitMessage",{limit:10})})]})]}),e.jsxs("button",{onClick:()=>c("/premium"),className:"px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-xl font-medium hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx(x,{size:16}),l("premium.upgrade")]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(h,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-text-secondary",children:l("gratitude.currentStreak")})]}),e.jsx("p",{className:"text-3xl font-bold",children:l("gratitude.streakDays",{count:A})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(d,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-text-secondary",children:l("gratitude.totalEntries")})]}),e.jsx("p",{className:"text-3xl font-bold",children:j.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(u,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-text-secondary",children:l("gratitude.thisMonth")})]}),e.jsx("p",{className:"text-3xl font-bold",children:j.filter((e=>new Date(e.date).getMonth()===(new Date).getMonth())).length})]})]}),e.jsx(T,{entries:j})]}),e.jsx("div",{className:"space-y-4",children:0===j.length?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(o,{className:"w-16 h-16 text-text-secondary mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:l("gratitude.empty.title")}),e.jsx("p",{className:"text-text-secondary mb-4",children:l("gratitude.empty.description")}),e.jsxs("div",{className:"max-w-md mx-auto mb-6 text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:l("gratitude.empty.benefitsTitle")}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",l("gratitude.empty.benefit1")]}),e.jsxs("li",{children:["â€¢ ",l("gratitude.empty.benefit2")]}),e.jsxs("li",{children:["â€¢ ",l("gratitude.empty.benefit3")]}),e.jsxs("li",{children:["â€¢ ",l("gratitude.empty.benefit4")]})]})]}),e.jsxs("button",{onClick:U,className:"btn-primary",children:[e.jsx(n,{className:"w-5 h-5"})," ",l("gratitude.createFirst")]})]}):j.map((s=>e.jsx(O,{entry:s,onEdit:W,onDelete:F},s.date)))}),f&&e.jsx(I,{entry:N,onClose:()=>{b(!1),y(null)},onSave:e=>{const s=JSON.parse(localStorage.getItem("safespace_gratitude_entries")||"[]"),t=s.findIndex((s=>s.date===e.date));!M&&t<0&&s.length>=10||(t>=0?s[t]=e:s.unshift(e),localStorage.setItem("safespace_gratitude_entries",JSON.stringify(s)),J(),b(!1),y(null))}}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("div",{className:"card p-4 bg-blue-50 border border-blue-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(g,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:l("gratitude.guidelines.title")}),e.jsxs("ul",{className:"text-gray-700 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",l("gratitude.guidelines.tip1")]}),e.jsxs("li",{children:["â€¢ ",l("gratitude.guidelines.tip2")]}),e.jsxs("li",{children:["â€¢ ",l("gratitude.guidelines.tip3")]}),e.jsxs("li",{children:["â€¢ ",l("gratitude.guidelines.tip4")]}),e.jsxs("li",{children:["â€¢ ",l("gratitude.guidelines.tip5")]})]})]})]})}),e.jsx(_,{compact:!0})]})]})})}export{A as default};
