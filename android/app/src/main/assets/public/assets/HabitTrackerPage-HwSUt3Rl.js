import{u as e,j as s}from"./index-C2hV942_.js";import{u as t,r as a}from"./react-vendor-B4gIioy9.js";import{S as i}from"./SafeComponent-Bl7I87cI.js";import{L as l}from"./LimitWarningBanner-Cz_8YhFz.js";import{g as c}from"./premiumUtils-Ccr3qdNt.js";import{D as n,d as m}from"./disclaimers-DMKdW3Y_.js";import{R as r,r as o}from"./ResearchCard-Dmj6EKWy.js";import{x as d,P as x,T as h,av as b,aw as p}from"./icons-Cn7BKMG2.js";function j(){const j=t(),{t:f}=e(),[u,N]=a.useState([]),[y,g]=a.useState(!1),[v,w]=a.useState({name:"",icon:"ðŸŽ¯",color:"blue",frequency:"daily"}),{isPremium:S}=c();a.useEffect((()=>{const e=JSON.parse(localStorage.getItem("space4u_habits")||"[]");N(e)}),[]);const k=()=>{!S&&u.length>=5?j("/premium"):g(!0)},C=e=>{let s=0,t=new Date;for(;e.completions[t.toISOString().split("T")[0]];)s++,t.setDate(t.getDate()-1);return s},D=(new Date).toISOString().split("T")[0];return s.jsx(i,{children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"text-3xl font-bold",children:f("habits.title")}),S&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-full text-xs font-medium",children:[s.jsx(d,{size:12}),f("common.premium")]})]}),s.jsx("p",{className:"text-text-secondary",children:f("habits.subtitle")})]}),s.jsxs("button",{onClick:k,className:"btn-primary",children:[s.jsx(x,{className:"w-5 h-5"})," ",f("habits.addHabit")]})]}),s.jsx("div",{className:"mb-6",children:s.jsx(n,{disclaimer:m.habits})}),s.jsx("div",{className:"mb-6",children:s.jsx(r,{citations:o.habits,title:"The Science of Habit Formation"})}),!S&&u.length>=5&&s.jsx(l,{limit:5,feature:"habits",current:u.length}),0===u.length?s.jsxs("div",{className:"card p-12 text-center",children:[s.jsx(h,{className:"w-16 h-16 text-text-secondary mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:f("habits.empty.title")}),s.jsx("p",{className:"text-text-secondary mb-4",children:f("habits.empty.description")}),s.jsxs("div",{className:"max-w-md mx-auto mb-6 text-left",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:f("habits.empty.keysTitle")}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("li",{children:["â€¢ ",f("habits.empty.key1")]}),s.jsxs("li",{children:["â€¢ ",f("habits.empty.key2")]}),s.jsxs("li",{children:["â€¢ ",f("habits.empty.key3")]}),s.jsxs("li",{children:["â€¢ ",f("habits.empty.key4")]})]})]}),s.jsxs("button",{onClick:k,className:"btn-primary",children:[s.jsx(x,{className:"w-5 h-5"})," ",f("habits.createFirst")]})]}):s.jsx("div",{className:"space-y-4",children:u.map((e=>s.jsx("div",{className:"card p-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>(e=>{const s=(new Date).toISOString().split("T")[0],t=u.map((t=>{if(t.id===e){const e={...t.completions};return e[s]=!e[s],{...t,completions:e}}return t}));localStorage.setItem("space4u_habits",JSON.stringify(t)),N(t)})(e.id),className:"text-4xl hover:scale-110 transition-transform",children:e.completions[D]?s.jsx(b,{className:"w-10 h-10 text-green-500"}):s.jsx(p,{className:"w-10 h-10 text-text-secondary"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:e.icon}),s.jsx("h3",{className:"text-xl font-semibold",children:e.name})]}),s.jsx("p",{className:"text-text-secondary text-sm",children:f("habits.streakInfo",{streak:C(e),total:Object.values(e.completions).filter(Boolean).length})})]})]})})},e.id)))}),y&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-surface rounded-2xl max-w-md w-full p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:f("habits.modal.title")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:f("habits.modal.nameLabel")}),s.jsx("input",{value:v.name,onChange:e=>w({...v,name:e.target.value}),className:"input w-full",placeholder:f("habits.modal.namePlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:f("habits.modal.iconLabel")}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:["ðŸŽ¯","ðŸ’ª","ðŸ§˜","ðŸ“š","ðŸ’§","ðŸƒ","ðŸŽ¨","ðŸŽµ"].map((e=>s.jsx("button",{onClick:()=>w({...v,icon:e}),className:"text-3xl p-2 rounded-lg "+(v.icon===e?"bg-primary/20":"hover:bg-hover"),children:e},e)))})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>g(!1),className:"btn-secondary flex-1",children:f("common.cancel")}),s.jsx("button",{onClick:()=>{const e={...v,id:Date.now(),completions:{}},s=[...u,e];localStorage.setItem("space4u_habits",JSON.stringify(s)),N(s),g(!1),w({name:"",icon:"ðŸŽ¯",color:"blue",frequency:"daily"})},disabled:!v.name,className:"btn-primary flex-1",children:f("common.create")})]})]})]})})]})})}export{j as default};

