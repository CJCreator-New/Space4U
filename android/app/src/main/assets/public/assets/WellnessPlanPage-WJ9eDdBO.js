import{j as e}from"./index-Duv89VAf.js";import{u as s,r as t}from"./react-vendor-B4gIioy9.js";import{S as i}from"./SafeComponent-DdckI7LM.js";import{g as a}from"./premiumUtils-Ccr3qdNt.js";import{L as l}from"./LimitWarningBanner-DHTA60kX.js";import{D as n,d as c}from"./disclaimers-vV8DlMF2.js";import{x as r,P as d,ao as m,ap as o,k as x}from"./icons-DVxOjm_j.js";function p(){const p=s(),{isPremium:h}=a(),[j,u]=t.useState([]),[v,f]=t.useState(null),[N,y]=t.useState(!1),[b,g]=t.useState({title:"",time:"09:00",activity_type:"morning_ritual",days:[1,2,3,4,5]}),w=v?.activities?.length||0,_=h||w<5;t.useEffect((()=>{const e=JSON.parse(localStorage.getItem("safespace_wellness_plans")||"[]");u(e),e.length>0&&f(e[0])}),[]);const S=()=>{const e={id:Date.now(),name:"My Wellness Plan",activities:[],is_active:!0},s=[e,...j];localStorage.setItem("safespace_wellness_plans",JSON.stringify(s)),u(s),f(e)},k=(new Date).toISOString().split("T")[0],C=v?.activities?.filter((e=>e.days.includes((new Date).getDay())))||[];return e.jsx(i,{children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Wellness Plan"}),h&&e.jsx(r,{className:"w-6 h-6 text-yellow-500"})]}),e.jsx("p",{className:"text-text-secondary",children:"Your personalized daily routine"})]}),v?e.jsxs("button",{onClick:()=>y(!0),disabled:!_,className:"btn-primary",children:[e.jsx(d,{className:"w-5 h-5"})," Add Activity"]}):e.jsxs("button",{onClick:S,className:"btn-primary",children:[e.jsx(d,{className:"w-5 h-5"})," Create Plan"]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(n,{disclaimer:c.general})}),!h&&w>=5&&e.jsx(l,{current:w,limit:5,itemName:"activities",featureName:"Unlimited Activities"}),v?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Today's Activities"}),e.jsxs("div",{className:"space-y-3",children:[C.map((s=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-hover rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>(e=>{const s=(new Date).toISOString().split("T")[0],t=j.map((t=>t.id===v.id?{...t,activities:t.activities.map((t=>{if(t.id===e){const e={...t.completions};return e[s]=!e[s],{...t,completions:e}}return t}))}:t));localStorage.setItem("safespace_wellness_plans",JSON.stringify(t)),u(t),f(t.find((e=>e.id===v.id)))})(s.id),children:s.completions?.[k]?e.jsx(m,{className:"w-6 h-6 text-green-500"}):e.jsx(o,{className:"w-6 h-6 text-text-secondary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{children:s.time}),e.jsxs("span",{className:"capitalize",children:["• ",s.activity_type.replace("_"," ")]})]})]})]})},s.id))),0===C.length&&e.jsx("p",{className:"text-text-secondary text-center py-8",children:"No activities scheduled for today"})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"All Activities"}),e.jsx("div",{className:"space-y-2",children:v.activities?.map((s=>e.jsx("div",{className:"p-4 bg-hover rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[s.time," • ",s.days.length," days/week"]})]}),e.jsx("span",{className:"text-sm text-text-secondary capitalize",children:s.activity_type.replace("_"," ")})]})},s.id)))})]})]}):e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(Calendar,{className:"w-16 h-16 text-text-secondary mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Create Your Wellness Plan"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Build a personalized daily routine for better mental health"}),e.jsxs("button",{onClick:S,className:"btn-primary",children:[e.jsx(d,{className:"w-5 h-5"})," Create Plan"]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-surface rounded-2xl max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"New Activity"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Activity Title"}),e.jsx("input",{value:b.title,onChange:e=>g({...b,title:e.target.value}),className:"input w-full",placeholder:"Morning meditation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time"}),e.jsx("input",{type:"time",value:b.time,onChange:e=>g({...b,time:e.target.value}),className:"input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),e.jsxs("select",{value:b.activity_type,onChange:e=>g({...b,activity_type:e.target.value}),className:"input w-full",children:[e.jsx("option",{value:"morning_ritual",children:"Morning Ritual"}),e.jsx("option",{value:"evening_ritual",children:"Evening Ritual"}),e.jsx("option",{value:"daily_task",children:"Daily Task"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"btn-secondary flex-1",children:"Cancel"}),e.jsx("button",{onClick:()=>{if(!v)return;if(!_)return void p("/premium");const e={...b,id:Date.now(),completions:{}},s=j.map((s=>s.id===v.id?{...s,activities:[...s.activities||[],e]}:s));localStorage.setItem("safespace_wellness_plans",JSON.stringify(s)),u(s),f(s.find((e=>e.id===v.id))),y(!1),g({title:"",time:"09:00",activity_type:"morning_ritual",days:[1,2,3,4,5]})},disabled:!b.title,className:"btn-primary flex-1",children:"Add"})]})]})]})})]})})}export{p as default};
