import{j as e}from"./index-C2hV942_.js";import{u as s,r as t}from"./react-vendor-B4gIioy9.js";import{S as a}from"./SafeComponent-Bl7I87cI.js";import{M as l}from"./MicroInteraction-CSj6YPnO.js";import{i as r,g as i,B as n,L as c}from"./badgeSystem-B5B5Dmxk.js";import{X as o,x as d,q as m,T as x,U as h,s as p,a as u,Y as j,z as g,_ as b,G as f,$ as y,m as N,I as v,p as w,a0 as S,r as C}from"./icons-Cn7BKMG2.js";import"./useHaptic-Cp-ndXlt.js";const k=["ðŸ˜Š","ðŸ˜Ž","ðŸŒŸ","ðŸ¦‹","ðŸŒ¸","ðŸŒˆ","ðŸŽ¨","ðŸ“š","ðŸŽµ","â˜•","ðŸŒ™","â­"];function _(){const _=s(),[I,D]=t.useState(null),[O,E]=t.useState(null),[J,L]=t.useState(null),[A,P]=t.useState([]),[z,M]=t.useState([]),[T,U]=t.useState([]),[R,W]=t.useState(!1),[B,F]=t.useState(!1),[H,V]=t.useState(""),[$,Y]=t.useState(!0),[q,G]=t.useState({username:"",avatar:"",bio:"",interests:[]});t.useEffect((()=>{K()}),[]);const K=()=>{const e=JSON.parse(localStorage.getItem("space4u_user")||"{}");D(e),G({username:e.username||"",avatar:e.avatar||"ðŸ˜Š",bio:e.bio||"",interests:e.interests||[]});const s=r();E(s),Q(),Z(),ee(),se();const t=localStorage.getItem("space4u_premium_banner_dismissed");Y(!t)},Q=()=>{const e=JSON.parse(localStorage.getItem("space4u_moods")||"{}"),s=JSON.parse(localStorage.getItem("space4u_user_posts")||"[]"),t=JSON.parse(localStorage.getItem("space4u_user_circles")||"[]"),a=Object.values(e),l=X(e),r=a.filter((e=>{const s=new Date(e.timestamp),t=new Date;return t.setDate(t.getDate()-7),s>=t})),i=r.length>0?r.reduce(((e,s)=>e+s.mood),0)/r.length:0,n=s.reduce(((e,s)=>e+(s.hearts||0)),0);L({currentStreak:l,totalMoodLogs:a.length,avgMoodThisWeek:i,circlesJoined:t.length,postsCreated:s.length,heartsReceived:n})},X=e=>{const s=new Date;let t=0;for(let a=0;a<365;a++){const l=new Date(s);l.setDate(s.getDate()-a);if(!e[l.toISOString().split("T")[0]])break;t++}return t},Z=()=>{P([{type:"mood",text:"Logged mood ðŸ˜Š",time:"2 hours ago",icon:"ðŸ˜Š"},{type:"post",text:"Posted in Anxiety Support",time:"5 hours ago",icon:"ðŸ’¬"},{type:"badge",text:'Earned "Week Warrior" badge ðŸ”¥',time:"1 day ago",icon:"ðŸ†"},{type:"circle",text:"Joined Work & Career circle",time:"2 days ago",icon:"ðŸ‘¥"},{type:"mood",text:"Logged mood ðŸ˜",time:"1 day ago",icon:"ðŸ˜"},{type:"exercise",text:"Completed breathing exercise",time:"3 days ago",icon:"ðŸ§˜"},{type:"post",text:"Posted in Daily Check-in",time:"4 days ago",icon:"ðŸ’¬"},{type:"mood",text:"Logged mood ðŸ™‚",time:"4 days ago",icon:"ðŸ™‚"}])},ee=()=>{const e=JSON.parse(localStorage.getItem("space4u_user_circles")||"[]"),s=JSON.parse(localStorage.getItem("space4u_circles")||"[]").filter((s=>e.includes(s.id))).map((e=>({...e,unreadCount:Math.floor(5*Math.random())})));M(s)},se=()=>{const e=JSON.parse(localStorage.getItem("space4u_hearted_posts")||"[]"),s=JSON.parse(localStorage.getItem("space4u_posts")||"[]").filter((s=>e.includes(s.id))).slice(0,3);U(s)},te=O&&c[O.level]||c.beginner;!O||i(O.totalPoints);const ae=O?.badges.filter((e=>e.unlocked)).length||0,le=Object.keys(n).length;return I&&J?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[$&&e.jsxs("div",{className:"bg-gradient-to-r from-primary to-primary-light text-white p-4 rounded-xl mb-6 relative",children:[e.jsx("button",{onClick:()=>{localStorage.setItem("space4u_premium_banner_dismissed","true"),Y(!1)},className:"absolute top-2 right-2 text-white/80 hover:text-white",children:e.jsx(o,{size:20})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Unlock Premium for advanced insights"}),e.jsx("p",{className:"text-sm text-white/90",children:"Full history â€¢ Priority support â€¢ Ad-free experience"})]}),e.jsx("button",{className:"bg-white text-primary px-4 py-2 rounded-lg font-medium hover:bg-white/90 transition-colors",children:"Learn More"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary to-primary-light text-white p-6 rounded-xl mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-30 h-30 bg-white/20 rounded-full flex items-center justify-center text-4xl border-4",style:{width:"120px",height:"120px",borderColor:O?.totalPoints>=500?"#FFD700":"rgba(255,255,255,0.3)"},children:I.avatar||"ðŸ˜Š"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h1",{className:"text-3xl font-bold",children:I.username||"Anonymous User"}),O?.totalPoints>=500&&e.jsx(d,{className:"text-yellow-300",size:24})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"bg-white/20 px-3 py-1 rounded-full text-sm font-medium",children:"Anonymous User"}),O?.totalPoints>=500&&e.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 px-3 py-1 rounded-full text-sm font-medium",children:"Premium Member"})]}),e.jsx("p",{className:"text-white/80",children:"Member since Oct 2025"})]})]}),e.jsx(l,{type:"scale",children:e.jsx("button",{onClick:()=>W(!0),className:"bg-white/20 hover:bg-white/30 p-3 rounded-xl transition-colors",children:e.jsx(m,{size:20})})})]})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3 mb-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(x,{className:"text-primary",size:24}),e.jsx("h3",{className:"text-lg font-semibold",children:"Mood Journey"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Current streak"}),e.jsxs("p",{className:"text-xl font-bold",children:[J.currentStreak," days ðŸ”¥"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Total mood logs"}),e.jsx("p",{className:"text-xl font-bold",children:J.totalMoodLogs})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Average mood this week"}),e.jsxs("p",{className:"text-xl font-bold",children:[J.avgMoodThisWeek.toFixed(1)," ðŸ™‚"]})]})]}),e.jsx(l,{type:"press",children:e.jsx("button",{onClick:()=>_("/insights"),className:"text-primary font-medium text-sm mt-4 hover:underline",children:"View Insights"})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(h,{className:"text-primary",size:24}),e.jsx("h3",{className:"text-lg font-semibold",children:"Community"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Circles joined"}),e.jsx("p",{className:"text-xl font-bold",children:J.circlesJoined})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Posts created"}),e.jsx("p",{className:"text-xl font-bold",children:J.postsCreated})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Hearts received"}),e.jsx("p",{className:"text-xl font-bold",children:J.heartsReceived})]})]}),e.jsx(l,{type:"press",children:e.jsx("button",{onClick:()=>_("/circles"),className:"text-primary font-medium text-sm mt-4 hover:underline",children:"My Circles"})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(p,{className:"text-primary",size:24}),e.jsx("h3",{className:"text-lg font-semibold",children:"Achievements"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Current level"}),e.jsxs("p",{className:"text-xl font-bold",children:[te.name," ",te.emoji]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Total points"}),e.jsx("p",{className:"text-xl font-bold",children:O?.totalPoints||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Badges earned"}),e.jsxs("p",{className:"text-xl font-bold",children:[ae,"/",le]})]})]}),e.jsx("button",{className:"text-primary font-medium text-sm mt-4 hover:underline",children:"View Badges"})]})]}),e.jsxs("div",{className:"card p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Your Recent Activity"}),e.jsx("div",{className:"space-y-4",children:A.slice(0,10).map(((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-sm",children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-text-primary",children:s.text}),e.jsx("p",{className:"text-sm text-text-secondary",children:s.time})]})]},t)))}),A.length>10&&e.jsx("button",{className:"text-primary font-medium text-sm mt-4 hover:underline",children:"Load more"})]}),e.jsxs("div",{className:"card p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"My Circles"}),z.length>0?e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:z.map((s=>e.jsxs("div",{className:"flex-shrink-0 bg-gray-50 p-4 rounded-xl min-w-48",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),s.unreadCount>0&&e.jsxs("span",{className:"bg-primary text-white text-xs px-2 py-1 rounded-full",children:[s.unreadCount," new"]})]})]}),e.jsx("button",{onClick:()=>_(`/circles/${s.id}`),className:"text-primary font-medium text-sm hover:underline",children:"View"})]},s.id)))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"mx-auto text-text-secondary mb-4",size:48}),e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Join your first circle"}),e.jsx("p",{className:"text-text-secondary mb-4",children:"Connect with others who understand your journey"}),e.jsx(l,{type:"scale",children:e.jsx("button",{onClick:()=>_("/circles"),className:"bg-primary text-white px-6 py-2 rounded-xl font-medium hover:bg-primary/90 transition-colors",children:"Explore Circles"})})]})]}),e.jsxs("div",{className:"card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Posts I've Hearted"}),e.jsx("button",{className:"text-primary font-medium text-sm hover:underline",children:"See All"})]}),T.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:T.map((s=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsxs("p",{className:"text-sm text-text-primary mb-2 line-clamp-3",children:[s.content.slice(0,100),"..."]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-text-secondary",children:[e.jsx("span",{children:s.circle}),e.jsx("span",{children:new Date(s.timestamp).toLocaleDateString()})]})]},s.id)))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{className:"mx-auto text-text-secondary mb-4",size:48}),e.jsx("p",{className:"text-text-secondary",children:"No saved posts yet"})]})]}),e.jsxs("div",{className:"card p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Settings"}),e.jsx("div",{className:"space-y-3",children:[{icon:j,label:"Notifications",onClick:()=>{}},{icon:g,label:"Privacy & Data",onClick:()=>{}},{icon:d,label:O?.totalPoints>=500?"Manage Premium":"Upgrade to Premium",onClick:()=>_(O?.totalPoints>=500?"/premium/manage":"/premium")},{icon:b,label:"Settings",onClick:()=>_("/settings")},{icon:f,label:"Language",onClick:()=>{}},{icon:y,label:"Help & Support",onClick:()=>{}},{icon:N,label:"Resource Library",onClick:()=>_("/resources")},{icon:v,label:"About space4u",onClick:()=>{}}].map(((s,t)=>e.jsxs("button",{onClick:s.onClick,className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:"text-text-secondary",size:20}),e.jsx("span",{className:"text-text-primary",children:s.label})]}),e.jsx(w,{className:"text-text-secondary",size:16})]},t)))})]}),e.jsxs("div",{className:"card p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Account Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{const e={profile:JSON.parse(localStorage.getItem("space4u_user")||"{}"),moods:JSON.parse(localStorage.getItem("space4u_moods")||"{}"),posts:JSON.parse(localStorage.getItem("space4u_user_posts")||"[]"),circles:JSON.parse(localStorage.getItem("space4u_user_circles")||"[]"),badges:JSON.parse(localStorage.getItem("space4u_badges")||"{}"),exportedAt:(new Date).toISOString()},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`space4u-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-xl transition-colors",children:[e.jsx(S,{className:"text-primary",size:20}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-text-primary",children:"Export My Data"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Download all your data as JSON"})]})]}),e.jsxs("button",{onClick:()=>F(!0),className:"w-full flex items-center gap-3 p-3 hover:bg-red-50 rounded-xl transition-colors text-red-600",children:[e.jsx(C,{size:20}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-red-500",children:"Permanently delete your account and data"})]})]})]})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Edit Profile"}),e.jsx("button",{onClick:()=>W(!1),children:e.jsx(o,{size:24})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",children:"Avatar"}),e.jsx("div",{className:"grid grid-cols-6 gap-3",children:k.map((s=>e.jsx("button",{onClick:()=>G({...q,avatar:s}),className:"w-12 h-12 rounded-full text-2xl flex items-center justify-center border-2 "+(q.avatar===s?"border-primary bg-primary/10":"border-gray-200"),children:s},s)))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username"}),e.jsx("input",{type:"text",value:q.username,onChange:e=>G({...q,username:e.target.value}),className:"w-full p-3 border border-gray-200 rounded-xl focus:border-primary outline-none",placeholder:"Enter username",maxLength:20}),e.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[q.username.length,"/20 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio (Optional)"}),e.jsx("textarea",{value:q.bio,onChange:e=>G({...q,bio:e.target.value}),className:"w-full p-3 border border-gray-200 rounded-xl focus:border-primary outline-none resize-none",placeholder:"Tell your story anonymously...",rows:3,maxLength:200}),e.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[q.bio.length,"/200 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Interests"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Anxiety","Depression","Stress","Work","Relationships","Self-care"].map((s=>e.jsx("button",{onClick:()=>{const e=q.interests.includes(s)?q.interests.filter((e=>e!==s)):[...q.interests,s];G({...q,interests:e})},className:"p-2 rounded-lg text-sm font-medium transition-colors "+(q.interests.includes(s)?"bg-primary text-white":"bg-gray-100 text-text-secondary hover:bg-gray-200"),children:s},s)))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>W(!1),className:"flex-1 py-3 border border-gray-200 rounded-xl font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{const e={...I,...q,updatedAt:(new Date).toISOString()};localStorage.setItem("space4u_user",JSON.stringify(e)),D(e),W(!1);const s=document.createElement("div");s.textContent="Profile updated successfully!",s.className="fixed top-4 right-4 bg-success text-white px-4 py-2 rounded-xl shadow-lg z-50",document.body.appendChild(s),setTimeout((()=>document.body.removeChild(s)),2e3)},className:"flex-1 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors",children:"Save Changes"})]})]})})}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Delete Account"}),e.jsx("button",{onClick:()=>F(!1),children:e.jsx(o,{size:24})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-text-primary mb-4",children:"Are you sure you want to delete your account? This action cannot be undone."}),e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:"All your data including moods, posts, and badges will be permanently deleted."}),e.jsx("p",{className:"text-sm font-medium mb-2",children:'Type "DELETE" to confirm:'}),e.jsx("input",{type:"text",value:H,onChange:e=>V(e.target.value),className:"w-full p-3 border border-gray-200 rounded-xl focus:border-red-500 outline-none",placeholder:"DELETE"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>F(!1),className:"flex-1 py-3 border border-gray-200 rounded-xl font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{if("DELETE"!==H)return;["space4u_user","space4u_moods","space4u_user_posts","space4u_user_circles","space4u_badges","space4u_hearted_posts","space4u_onboarding_completed"].forEach((e=>localStorage.removeItem(e))),window.location.href="/"},disabled:"DELETE"!==H,className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete Account"})]})]})})})]}):e.jsx(a,{children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"animate-pulse space-y-6",children:e.jsx("div",{className:"card p-6",children:e.jsx("div",{className:"h-32 bg-gray-200 rounded"})})})})})}export{_ as default};

