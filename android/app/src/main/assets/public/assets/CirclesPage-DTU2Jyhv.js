import{j as e}from"./index-Duv89VAf.js";import{r as s,u as a}from"./react-vendor-B4gIioy9.js";import{m as r}from"./mockCircles-7k7XJQN9.js";import{f as l}from"./helpers-BubsLHy_.js";import{U as i,y as t,C as n,X as c,i as o,z as d,D as m,x,j as u,F as h,a as p,E as g,I as j}from"./icons-DVxOjm_j.js";import{S as b}from"./SafeComponent-DdckI7LM.js";import{g as f}from"./premiumUtils-Ccr3qdNt.js";import{u as v}from"./useDebounce-DCk0LtND.js";function y({circle:s,isJoined:a,onJoin:r,onLeave:c,onClick:o}){return e.jsxs("div",{onClick:()=>o(s.id),className:"card p-5 cursor-pointer hover:shadow-lg transition-all duration-200 border-l-4",style:{borderLeftColor:s.color},children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-4xl mb-3",children:s.icon}),e.jsx("h3",{className:"font-bold text-lg text-text-primary mb-2",children:s.name}),e.jsx("p",{className:"text-text-secondary text-sm leading-relaxed line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-text-secondary mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(i,{size:14}),e.jsxs("span",{children:[l(s.members)," members"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(t,{size:14}),e.jsxs("span",{children:[l(s.posts)," posts"]})]})]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),a?c(s.id):r(s.id)},className:"w-full py-2 px-4 rounded-xl font-medium transition-all duration-200 "+(a?"bg-success/10 text-success border border-success/20 hover:bg-success/20":"bg-primary text-white hover:bg-primary/90"),children:a?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(n,{size:16}),"Joined"]}):"Join Circle"})]})}function N({isOpen:a,onClose:r,children:l,snapPoints:i=["50%","90%"],initialSnap:t=0}){const{dragY:n,handleTouchStart:c,handleTouchMove:o,handleTouchEnd:d}=function(e,a){const[r,l]=s.useState(0),[i,t]=s.useState(!1),n=s.useRef(0),c=s.useRef(0);return s.useEffect((()=>(e&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="unset"})),[e]),{dragY:r,isDragging:i,handleTouchStart:e=>{n.current=e.touches[0].clientY,t(!0)},handleTouchMove:e=>{if(!i)return;c.current=e.touches[0].clientY;const s=c.current-n.current;s>0&&l(s)},handleTouchEnd:()=>{t(!1),r>100&&a(),l(0)}}}(a,r);if(!a)return null;const m=i[t];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",onClick:r,children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn"}),e.jsxs("div",{className:"relative bg-surface dark:bg-gray-800 w-full rounded-t-3xl shadow-2xl animate-slideUp",style:{height:m,transform:`translateY(${n}px)`,transition:0===n?"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)":"none"},onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"w-full py-4 flex justify-center cursor-grab active:cursor-grabbing",onTouchStart:c,onTouchMove:o,onTouchEnd:d,children:e.jsx("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})}),e.jsx("div",{className:"px-6 pb-6 overflow-y-auto",style:{maxHeight:"calc(100% - 40px)"},children:l})]})]})}function w({isOpen:s,onClose:a,filters:r,onFiltersChange:l}){return e.jsx(N,{isOpen:s,onClose:a,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Filter Circles"}),e.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(c,{size:20})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium text-text-primary mb-3",children:"Category"}),e.jsx("div",{className:"space-y-2",children:[{value:"all",label:"All"},{value:"mental-health",label:"Mental Health"},{value:"lifestyle",label:"Lifestyle"},{value:"support",label:"Support Groups"}].map((s=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"category",value:s.value,checked:r.category===s.value,onChange:e=>l({...r,category:e.target.value}),className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-text-primary",children:s.label})]},s.value)))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-medium text-text-primary mb-3",children:"Sort by"}),e.jsx("div",{className:"space-y-2",children:[{value:"recommended",label:"Recommended"},{value:"members",label:"Most Members"},{value:"active",label:"Most Active"},{value:"recent",label:"Recently Joined"}].map((s=>e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"sort",value:s.value,checked:r.sort===s.value,onChange:e=>l({...r,sort:e.target.value}),className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-text-primary",children:s.label})]},s.value)))})]}),e.jsx("button",{onClick:()=>{a()},className:"w-full bg-primary text-white py-3 rounded-xl font-semibold hover:bg-primary/90 transition-colors",children:"Apply Filters"})]})})}function C({size:s="medium",className:a=""}){return e.jsx(o,{className:`animate-spin text-primary ${{small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[s]} ${a}`})}function S(){return e.jsxs("div",{className:"card p-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})}function k(){return e.jsxs("div",{className:"card p-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/6"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"})]})]})}function J(){return e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 mb-4 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:[...Array(35)].map(((s,a)=>e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded animate-pulse"},a)))})]})}function z(){return e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 mb-4 animate-pulse"}),e.jsx("div",{className:"h-64 bg-gray-100 rounded flex items-center justify-center",children:e.jsx(C,{size:"large"})})]})}function L({progress:s=0,className:a=""}){return e.jsx("div",{className:`w-full bg-gray-200 rounded-full h-2 ${a}`,children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,s))}%`}})})}function M({type:s="spinner",...a}){const r={spinner:C,circleCard:S,postCard:k,calendar:J,chart:z,progress:L}[s]||C;return e.jsx(r,{...a})}function A(){const l=a(),[t,n]=s.useState("discover"),[c,o]=s.useState(""),N=v(c,300),[C,S]=s.useState(!1),[k,J]=s.useState({category:"all",sort:"recommended"}),[z,L]=s.useState([]),[A,R]=s.useState([]),[T,P]=s.useState(!0),{isPremium:O}=f();s.useEffect((()=>{D()}),[]);const D=()=>{const e=localStorage.getItem("safespace_circles"),s=e?JSON.parse(e):[];L(s),R(r),P(!1)},E=e=>{if(!O&&z.length>=3)return void l("/premium");const s=[...z,e];L(s),localStorage.setItem("safespace_circles",JSON.stringify(s)),R((s=>s.map((s=>s.id===e?{...s,members:s.members+1,isJoined:!0}:s))))},I=e=>{const s=z.filter((s=>s!==e));L(s),localStorage.setItem("safespace_circles",JSON.stringify(s)),R((s=>s.map((s=>s.id===e?{...s,members:s.members-1,isJoined:!1}:s))))},F=e=>{l(`/circles/${e}`)},Y=(()=>{let e=A;switch(N&&(e=e.filter((e=>e.name.toLowerCase().includes(N.toLowerCase())||e.description.toLowerCase().includes(N.toLowerCase())))),"all"!==k.category&&(e=e.filter((e=>e.category===k.category))),"my-circles"===t&&(e=e.filter((e=>z.includes(e.id)))),k.sort){case"members":e.sort(((e,s)=>s.members-e.members));break;case"active":e.sort(((e,s)=>s.posts-e.posts));break;case"recent":e=e.filter((e=>z.includes(e.id)))}return e})(),$=(()=>{const e=JSON.parse(localStorage.getItem("safespace_user")||"{}").interests||[];return A.filter((s=>!(!e.includes("anxiety")||!s.name.includes("Anxiety"))||(!(!e.includes("depression")||!s.name.includes("Depression"))||(!(!e.includes("work")||!s.name.includes("Work"))||!(!e.includes("wellness")||!s.name.includes("Wellness")))))).slice(0,4)})();return T?e.jsx(b,{children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-6"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6},((s,a)=>e.jsx(M,{type:"circleCard"},a)))})]})})}):e.jsx(b,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"card p-4 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 mb-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"Safe & Supportive Community"}),e.jsx("p",{className:"text-gray-700",children:"Our circles are peer support spaces, not therapy groups. Be kind, respectful, and supportive. If you're in crisis, please contact a mental health professional or call 988."})]})]})}),e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-purple-500 via-pink-500 to-red-500 p-8 mb-6 shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute -top-24 -right-24 w-64 h-64 bg-white/10 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(i,{className:"w-10 h-10 text-white"}),e.jsx("h1",{className:"text-4xl font-bold text-white drop-shadow-lg",children:"Support Circles"})]}),e.jsx("p",{className:"text-white/90 text-lg",children:"Find your community, share your journey, support others"})]})]}),e.jsxs("div",{className:"mb-6",children:[!O&&z.length>=3&&e.jsx("div",{className:"card p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border border-orange-200 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Circle Limit Reached"}),e.jsxs("p",{className:"text-gray-700",children:["You've joined ",3," circles. Upgrade to Premium for unlimited circles and private groups."]})]})]}),e.jsxs("button",{onClick:()=>l("/premium"),className:"px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-xl font-medium hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[e.jsx(x,{size:16}),"Upgrade"]})]})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary",size:20}),e.jsx("input",{type:"text",placeholder:"Search circles...",value:c,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary outline-none transition-colors"})]}),e.jsx("button",{onClick:()=>S(!0),className:"px-4 py-3 border-2 border-gray-200 rounded-xl hover:border-primary transition-colors",children:e.jsx(h,{size:20})})]}),e.jsxs("div",{className:"flex gap-1 mb-6",children:[e.jsx("button",{onClick:()=>n("discover"),className:"px-6 py-2 rounded-xl font-medium transition-colors "+("discover"===t?"bg-primary text-white":"text-text-secondary hover:text-text-primary"),children:"Discover"}),e.jsxs("button",{onClick:()=>n("my-circles"),className:"px-6 py-2 rounded-xl font-medium transition-colors "+("my-circles"===t?"bg-primary text-white":"text-text-secondary hover:text-text-primary"),children:["My Circles (",z.length,")"]})]})]}),"discover"===t&&$.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Recommended for You"}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:$.map((s=>e.jsx("div",{className:"flex-shrink-0 w-64",children:e.jsx(y,{circle:s,isJoined:z.includes(s.id),onJoin:E,onLeave:I,onClick:F})},s.id)))})]}),"my-circles"===t&&0===z.length?e.jsx(EmptyStates.NoCircles,{onAction:()=>n("discover")}):0===Y.length&&N?e.jsx(EmptyStates.NoSearchResults,{onAction:()=>o("")}):Y.length>50?e.jsx("div",{className:"space-y-4",children:Y.map((s=>e.jsx(y,{circle:s,isJoined:z.includes(s.id),onJoin:E,onLeave:I,onClick:F},s.id)))}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Y.map(((s,a)=>e.jsx("div",{className:"stagger-item",style:{animationDelay:50*a+"ms"},children:e.jsx(y,{circle:s,isJoined:z.includes(s.id),onJoin:E,onLeave:I,onClick:F})},s.id)))}),e.jsx(w,{isOpen:C,onClose:()=>S(!1),filters:k,onFiltersChange:J}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("div",{className:"card p-4 bg-green-50 border border-green-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(p,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"Community Guidelines"}),e.jsxs("ul",{className:"text-gray-700 space-y-1",children:[e.jsx("li",{children:"• Be respectful and supportive - everyone's journey is unique"}),e.jsx("li",{children:"• Share your experiences, not medical advice"}),e.jsx("li",{children:"• Respect privacy - what's shared here stays here"}),e.jsx("li",{children:"• Report harmful content using the report button"}),e.jsx("li",{children:"• Remember: peer support complements, doesn't replace professional care"})]})]})]})}),e.jsx("div",{className:"card p-4 bg-yellow-50 border border-yellow-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(g,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"When to Seek Professional Help"}),e.jsx("p",{className:"text-gray-700 mb-2",children:"While peer support is valuable, it's not a substitute for professional mental health care. Seek professional help if you're experiencing:"}),e.jsxs("ul",{className:"text-gray-700 space-y-1",children:[e.jsx("li",{children:"• Persistent feelings of sadness, anxiety, or hopelessness"}),e.jsx("li",{children:"• Thoughts of self-harm or suicide"}),e.jsx("li",{children:"• Difficulty functioning in daily life"}),e.jsx("li",{children:"• Substance abuse issues"})]}),e.jsx("p",{className:"text-gray-700 mt-2 font-medium",children:"Crisis support: Call 988 (Suicide & Crisis Lifeline) - Available 24/7"})]})]})}),e.jsx("div",{className:"card p-4 bg-purple-50 border border-purple-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j,{className:"w-5 h-5 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold mb-1 text-gray-900",children:"The Power of Peer Support"}),e.jsx("p",{className:"text-gray-700",children:"Research shows that peer support can reduce feelings of isolation, increase hope, and improve coping skills. Studies indicate that both giving and receiving support benefits mental health. However, peer support works best alongside professional treatment when needed."}),e.jsx("p",{className:"text-xs text-gray-500 italic mt-2",children:"Source: Davidson et al. (2012). Peer Support Among Adults With Serious Mental Illness"})]})]})})]})]})})}export{A as default};
